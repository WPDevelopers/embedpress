var zt=Object.defineProperty,Kt=Object.defineProperties;var Yt=Object.getOwnPropertyDescriptors;var $t=Object.getOwnPropertySymbols;var Bt=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable;var Dt=Math.pow,Ut=(Ce,Me,qe)=>Me in Ce?zt(Ce,Me,{enumerable:!0,configurable:!0,writable:!0,value:qe}):Ce[Me]=qe,Te=(Ce,Me)=>{for(var qe in Me||(Me={}))Bt.call(Me,qe)&&Ut(Ce,qe,Me[qe]);if($t)for(var qe of $t(Me))Wt.call(Me,qe)&&Ut(Ce,qe,Me[qe]);return Ce},Lt=(Ce,Me)=>Kt(Ce,Yt(Me));var Vt=(Ce,Me)=>{var qe={};for(var Ie in Ce)Bt.call(Ce,Ie)&&Me.indexOf(Ie)<0&&(qe[Ie]=Ce[Ie]);if(Ce!=null&&$t)for(var Ie of $t(Ce))Me.indexOf(Ie)<0&&Wt.call(Ce,Ie)&&(qe[Ie]=Ce[Ie]);return qe};(function(){"use strict";typeof navigator=="object"&&function(Z,m){typeof exports=="object"&&typeof module!="undefined"?module.exports=m():typeof define=="function"&&define.amd?define("Plyr",m):(Z=typeof globalThis!="undefined"?globalThis:Z||self).Plyr=m()}(void 0,function(){(function(){if(typeof window!="undefined")try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),e.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch(t){var i=function(n,r){var s,a;return(r=r||{}).bubbles=!!r.bubbles,r.cancelable=!!r.cancelable,(s=document.createEvent("CustomEvent")).initCustomEvent(n,r.bubbles,r.cancelable,r.detail),a=s.preventDefault,s.preventDefault=function(){a.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(l){this.defaultPrevented=!0}},s};i.prototype=window.Event.prototype,window.CustomEvent=i}})();var Z=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function m(e,i,t){return(i=function(n){var r=function(s,a){if(typeof s!="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var c=l.call(s,a);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}(n,"string");return typeof r=="symbol"?r:String(r)}(i))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function D(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function he(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function fe(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?he(Object(t),!0).forEach(function(n){je(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}(function(e){var i=function(){try{return!!Symbol.iterator}catch(a){return!1}}(),t=function(a){var l={next:function(){var c=a.shift();return{done:c===void 0,value:c}}};return i&&(l[Symbol.iterator]=function(){return l}),l},n=function(a){return encodeURIComponent(a).replace(/%20/g,"+")},r=function(a){return decodeURIComponent(String(a).replace(/\+/g," "))};(function(){try{var a=e.URLSearchParams;return new a("?a=1").toString()==="a=1"&&typeof a.prototype.set=="function"&&typeof a.prototype.entries=="function"}catch(l){return!1}})()||function(){var a=function(c){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var u=typeof c;if(u!=="undefined")if(u==="string")c!==""&&this._fromString(c);else if(c instanceof a){var f=this;c.forEach(function(I,O){f.append(O,I)})}else{if(c===null||u!=="object")throw new TypeError("Unsupported input's type for URLSearchParams");if(Object.prototype.toString.call(c)==="[object Array]")for(var v=0;v<c.length;v++){var p=c[v];if(Object.prototype.toString.call(p)!=="[object Array]"&&p.length===2)throw new TypeError("Expected [string, any] as entry at index "+v+" of URLSearchParams's input");this.append(p[0],p[1])}else for(var P in c)c.hasOwnProperty(P)&&this.append(P,c[P])}},l=a.prototype;l.append=function(c,u){c in this._entries?this._entries[c].push(String(u)):this._entries[c]=[String(u)]},l.delete=function(c){delete this._entries[c]},l.get=function(c){return c in this._entries?this._entries[c][0]:null},l.getAll=function(c){return c in this._entries?this._entries[c].slice(0):[]},l.has=function(c){return c in this._entries},l.set=function(c,u){this._entries[c]=[String(u)]},l.forEach=function(c,u){var f;for(var v in this._entries)if(this._entries.hasOwnProperty(v)){f=this._entries[v];for(var p=0;p<f.length;p++)c.call(u,f[p],v,this)}},l.keys=function(){var c=[];return this.forEach(function(u,f){c.push(f)}),t(c)},l.values=function(){var c=[];return this.forEach(function(u){c.push(u)}),t(c)},l.entries=function(){var c=[];return this.forEach(function(u,f){c.push([f,u])}),t(c)},i&&(l[Symbol.iterator]=l.entries),l.toString=function(){var c=[];return this.forEach(function(u,f){c.push(n(f)+"="+n(u))}),c.join("&")},e.URLSearchParams=a}();var s=e.URLSearchParams.prototype;typeof s.sort!="function"&&(s.sort=function(){var a=this,l=[];this.forEach(function(u,f){l.push([f,u]),a._entries||a.delete(f)}),l.sort(function(u,f){return u[0]<f[0]?-1:u[0]>f[0]?1:0}),a._entries&&(a._entries={});for(var c=0;c<l.length;c++)this.append(l[c][0],l[c][1])}),typeof s._fromString!="function"&&Object.defineProperty(s,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(a){if(this._entries)this._entries={};else{var l=[];this.forEach(function(v,p){l.push(p)});for(var c=0;c<l.length;c++)this.delete(l[c])}var u,f=(a=a.replace(/^\?/,"")).split("&");for(c=0;c<f.length;c++)u=f[c].split("="),this.append(r(u[0]),u.length>1?r(u[1]):"")}})})(Z!==void 0?Z:typeof window!="undefined"?window:typeof self!="undefined"?self:Z),function(e){if(function(){try{var t=new e.URL("b","http://a");return t.pathname="c d",t.href==="http://a/c%20d"&&t.searchParams}catch(n){return!1}}()||function(){var t=e.URL,n=function(s,a){typeof s!="string"&&(s=String(s)),a&&typeof a!="string"&&(a=String(a));var l,c=document;if(a&&(e.location===void 0||a!==e.location.href)){a=a.toLowerCase(),(l=(c=document.implementation.createHTMLDocument("")).createElement("base")).href=a,c.head.appendChild(l);try{if(l.href.indexOf(a)!==0)throw new Error(l.href)}catch(z){throw new Error("URL unable to set base "+a+" due to "+z)}}var u=c.createElement("a");u.href=s,l&&(c.body.appendChild(u),u.href=u.href);var f=c.createElement("input");if(f.type="url",f.value=s,u.protocol===":"||!/:/.test(u.href)||!f.checkValidity()&&!a)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:u});var v=new e.URLSearchParams(this.search),p=!0,P=!0,I=this;["append","delete","set"].forEach(function(z){var _=v[z];v[z]=function(){_.apply(v,arguments),p&&(P=!1,I.search=v.toString(),P=!0)}}),Object.defineProperty(this,"searchParams",{value:v,enumerable:!0});var O=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==O&&(O=this.search,P&&(p=!1,this.searchParams._fromString(this.search),p=!0))}})},r=n.prototype;["hash","host","hostname","port","protocol"].forEach(function(s){(function(a){Object.defineProperty(r,a,{get:function(){return this._anchorElement[a]},set:function(l){this._anchorElement[a]=l},enumerable:!0})})(s)}),Object.defineProperty(r,"search",{get:function(){return this._anchorElement.search},set:function(s){this._anchorElement.search=s,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(r,{toString:{get:function(){var s=this;return function(){return s.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(s){this._anchorElement.href=s,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(s){this._anchorElement.pathname=s},enumerable:!0},origin:{get:function(){var s={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],a=this._anchorElement.port!=s&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(a?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(s){},enumerable:!0},username:{get:function(){return""},set:function(s){},enumerable:!0}}),n.createObjectURL=function(s){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(s){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),e.location!==void 0&&!("origin"in e.location)){var i=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:i,enumerable:!0})}catch(t){setInterval(function(){e.location.origin=i()},100)}}}(Z!==void 0?Z:typeof window!="undefined"?window:typeof self!="undefined"?self:Z);var Fe={addCSS:!0,thumbWidth:15,watch:!0},Le=function(e){return e!=null?e.constructor:null},He=function(e,i){return!!(e&&i&&e instanceof i)},Ne=function(e){return e==null},$e=function(e){return Le(e)===Object},Ee=function(e){return Le(e)===String},Se=function(e){return Array.isArray(e)},ut=function(e){return He(e,NodeList)},ie={nullOrUndefined:Ne,object:$e,number:function(e){return Le(e)===Number&&!Number.isNaN(e)},string:Ee,boolean:function(e){return Le(e)===Boolean},function:function(e){return Le(e)===Function},array:Se,nodeList:ut,element:function(e){return He(e,Element)},event:function(e){return He(e,Event)},empty:function(e){return Ne(e)||(Ee(e)||Se(e)||ut(e))&&!e.length||$e(e)&&!Object.keys(e).length}};function vt(e,i){if(1>i){var t=function(n){var r="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return r?Math.max(0,(r[1]?r[1].length:0)-(r[2]?+r[2]:0)):0}(i);return parseFloat(e.toFixed(t))}return Math.round(e/i)*i}var Nt=function(){function e(i,t){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),ie.element(i)?this.element=i:ie.string(i)&&(this.element=document.querySelector(i)),ie.element(this.element)&&ie.empty(this.element.rangeTouch)&&(this.config=fe({},Fe,{},t),this.init())}return function(i,t,n){t&&D(i.prototype,t),n&&D(i,n)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(i){var t=this,n=i?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(r){t.element[n](r,function(s){return t.set(s)},!1)})}},{key:"get",value:function(i){if(!e.enabled||!ie.event(i))return null;var t,n=i.target,r=i.changedTouches[0],s=parseFloat(n.getAttribute("min"))||0,a=parseFloat(n.getAttribute("max"))||100,l=parseFloat(n.getAttribute("step"))||1,c=n.getBoundingClientRect(),u=100/c.width*(this.config.thumbWidth/2)/100;return 0>(t=100/c.width*(r.clientX-c.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*u:50<t&&(t+=2*(t-50)*u),s+vt(t/100*(a-s),l)}},{key:"set",value:function(i){e.enabled&&ie.event(i)&&!i.target.disabled&&(i.preventDefault(),i.target.value=this.get(i),function(t,n){if(t&&n){var r=new Event(n,{bubbles:!0});t.dispatchEvent(r)}}(i.target,i.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(i){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=null;if(ie.empty(i)||ie.string(i)?n=Array.from(document.querySelectorAll(ie.string(i)?i:'input[type="range"]')):ie.element(i)?n=[i]:ie.nodeList(i)?n=Array.from(i):ie.array(i)&&(n=i.filter(ie.element)),ie.empty(n))return null;var r=fe({},Fe,{},t);if(ie.string(i)&&r.watch){var s=new MutationObserver(function(a){Array.from(a).forEach(function(l){Array.from(l.addedNodes).forEach(function(c){ie.element(c)&&function(u,f){return function(){return Array.from(document.querySelectorAll(f)).includes(this)}.call(u,f)}(c,i)&&new e(c,r)})})});s.observe(document.body,{childList:!0,subtree:!0})}return n.map(function(a){return new e(a,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const Ye=e=>e!=null?e.constructor:null,we=(e,i)=>!!(e&&i&&e instanceof i),Ue=e=>e==null,wt=e=>Ye(e)===Object,at=e=>Ye(e)===String,kt=e=>typeof e=="function",Pt=e=>Array.isArray(e),Ct=e=>we(e,NodeList),Tt=e=>Ue(e)||(at(e)||Pt(e)||Ct(e))&&!e.length||wt(e)&&!Object.keys(e).length;var o={nullOrUndefined:Ue,object:wt,number:e=>Ye(e)===Number&&!Number.isNaN(e),string:at,boolean:e=>Ye(e)===Boolean,function:kt,array:Pt,weakMap:e=>we(e,WeakMap),nodeList:Ct,element:e=>e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object",textNode:e=>Ye(e)===Text,event:e=>we(e,Event),keyboardEvent:e=>we(e,KeyboardEvent),cue:e=>we(e,window.TextTrackCue)||we(e,window.VTTCue),track:e=>we(e,TextTrack)||!Ue(e)&&at(e.kind),promise:e=>we(e,Promise)&&kt(e.then),url:e=>{if(we(e,window.URL))return!0;if(!at(e))return!1;let i=e;e.startsWith("http://")&&e.startsWith("https://")||(i=`http://${e}`);try{return!Tt(new URL(i).hostname)}catch(t){return!1}},empty:Tt};const yt=(()=>{const e=document.createElement("span"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(i).find(n=>e.style[n]!==void 0);return!!o.string(t)&&i[t]})();function Qe(e,i){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(t){}},i)}var te={isIE:!!window.document.documentMode,isEdge:/Edge/g.test(navigator.userAgent),isWebKit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function ot(e,i){return i.split(".").reduce((t,n)=>t&&t[n],e)}function J(e={},...i){if(!i.length)return e;const t=i.shift();return o.object(t)?(Object.keys(t).forEach(n=>{o.object(t[n])?(Object.keys(e).includes(n)||Object.assign(e,{[n]:{}}),J(e[n],t[n])):Object.assign(e,{[n]:t[n]})}),J(e,...i)):e}function Et(e,i){const t=e.length?e:[e];Array.from(t).reverse().forEach((n,r)=>{const s=r>0?i.cloneNode(!0):i,a=n.parentNode,l=n.nextSibling;s.appendChild(n),l?a.insertBefore(s,l):a.appendChild(s)})}function it(e,i){o.element(e)&&!o.empty(i)&&Object.entries(i).filter(([,t])=>!o.nullOrUndefined(t)).forEach(([t,n])=>e.setAttribute(t,n))}function C(e,i,t){const n=document.createElement(e);return o.object(i)&&it(n,i),o.string(t)&&(n.innerText=t),n}function _e(e,i,t,n){o.element(i)&&i.appendChild(C(e,t,n))}function pe(e){o.nodeList(e)||o.array(e)?Array.from(e).forEach(pe):o.element(e)&&o.element(e.parentNode)&&e.parentNode.removeChild(e)}function Be(e){if(!o.element(e))return;let{length:i}=e.childNodes;for(;i>0;)e.removeChild(e.lastChild),i-=1}function Je(e,i){return o.element(i)&&o.element(i.parentNode)&&o.element(e)?(i.parentNode.replaceChild(e,i),e):null}function ge(e,i){if(!o.string(e)||o.empty(e))return{};const t={},n=J({},i);return e.split(",").forEach(r=>{const s=r.trim(),a=s.replace(".",""),l=s.replace(/[[\]]/g,"").split("="),[c]=l,u=l.length>1?l[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":o.string(n.class)?t.class=`${n.class} ${a}`:t.class=a;break;case"#":t.id=s.replace("#","");break;case"[":t[c]=u}}),J(n,t)}function Ae(e,i){if(!o.element(e))return;let t=i;o.boolean(t)||(t=!e.hidden),e.hidden=t}function $(e,i,t){if(o.nodeList(e))return Array.from(e).map(n=>$(n,i,t));if(o.element(e)){let n="toggle";return t!==void 0&&(n=t?"add":"remove"),e.classList[n](i),e.classList.contains(i)}return!1}function ht(e,i){return o.element(e)&&e.classList.contains(i)}function Re(e,i){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(i)).includes(this)}).call(e,i)}function Xe(e){return this.elements.container.querySelectorAll(e)}function ee(e){return this.elements.container.querySelector(e)}function bt(e=null,i=!1){o.element(e)&&e.focus({preventScroll:!0,focusVisible:i})}const Ge={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},X={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,i){const t=X[e]||i!=="html5";return{api:t,ui:t&&X.rangeInput}},pip:!(te.isIPhone||!o.function(C("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||C("video").disablePictureInPicture)),airplay:o.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(o.empty(e))return!1;const[i]=e.split("/");let t=e;if(!this.isHTML5||i!==this.type)return!1;Object.keys(Ge).includes(t)&&(t+=`; codecs="${Ge[e]}"`);try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch(n){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range",e.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:yt!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},lt=(()=>{let e=!1;try{const i=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(i){}return e})();function nt(e,i,t,n=!1,r=!0,s=!1){if(!e||!("addEventListener"in e)||o.empty(i)||!o.function(t))return;const a=i.split(" ");let l=s;lt&&(l={passive:r,capture:s}),a.forEach(c=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:e,type:c,callback:t,options:l}),e[n?"addEventListener":"removeEventListener"](c,t,l)})}function R(e,i="",t,n=!0,r=!1){nt.call(this,e,i,t,!0,n,r)}function De(e,i="",t,n=!0,r=!1){nt.call(this,e,i,t,!1,n,r)}function dt(e,i="",t,n=!0,r=!1){const s=(...a)=>{De(e,i,s,n,r),t.apply(this,a)};nt.call(this,e,i,s,!0,n,r)}function E(e,i="",t=!1,n={}){if(!o.element(e)||o.empty(i))return;const r=new CustomEvent(i,{bubbles:t,detail:Lt(Te({},n),{plyr:this})});e.dispatchEvent(r)}function St(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:i,type:t,callback:n,options:r}=e;i.removeEventListener(t,n,r)}),this.eventListeners=[])}function y(){return new Promise(e=>this.ready?setTimeout(e,0):R.call(this,this.elements.container,"ready",e)).then(()=>{})}function g(e){o.promise(e)&&e.then(null,()=>{})}function d(e){return o.array(e)?e.filter((i,t)=>e.indexOf(i)===t):e}function b(e,i){return o.array(e)&&e.length?e.reduce((t,n)=>Math.abs(n-i)<Math.abs(t-i)?n:t):null}function T(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const k=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[i,t])=>Lt(Te({},e),{[i/t]:[i,t]}),{});function M(e){return o.array(e)||o.string(e)&&e.includes(":")?(o.array(e)?e:e.split(":")).map(Number).every(o.number):!1}function A(e){if(!o.array(e)||!e.every(o.number))return null;const[i,t]=e,n=(s,a)=>a===0?s:n(a,s%a),r=n(i,t);return[i/r,t/r]}function L(e){const i=n=>M(n)?n.split(":").map(Number):null;let t=i(e);if(t===null&&(t=i(this.config.ratio)),t===null&&!o.empty(this.embed)&&o.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:n,videoHeight:r}=this.media;t=[n,r]}return A(t)}function Y(e){if(!this.isVideo)return{};const{wrapper:i}=this.elements,t=L.call(this,e);if(!o.array(t))return{};const[n,r]=A(t),s=100/n*r;if(T(`aspect-ratio: ${n}/${r}`)?i.style.aspectRatio=`${n}/${r}`:i.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),l=(a-s)/(a/50);this.fullscreen.active?i.style.paddingBottom=null:this.media.style.transform=`translateY(-${l}%)`}else this.isHTML5&&i.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:t}}function se(e,i,t=.05){const n=e/i,r=b(Object.keys(k),n);return Math.abs(r-n)<=t?k[r]:[e,i]}const K={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{const i=e.getAttribute("type");return!!o.empty(i)||X.mime.call(this,i)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:K.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,o.empty(this.config.ratio)||Y.call(e),Object.defineProperty(e.media,"quality",{get(){const i=K.getSources.call(e).find(t=>t.getAttribute("src")===e.source);return i&&Number(i.getAttribute("size"))},set(i){if(e.quality!==i){if(e.config.quality.forced&&o.function(e.config.quality.onChange))e.config.quality.onChange(i);else{const t=K.getSources.call(e).find(c=>Number(c.getAttribute("size"))===i);if(!t)return;const{currentTime:n,paused:r,preload:s,readyState:a,playbackRate:l}=e.media;e.media.src=t.getAttribute("src"),(s!=="none"||a)&&(e.once("loadedmetadata",()=>{e.speed=l,e.currentTime=n,r||g(e.play())}),e.media.load())}E.call(e,e.media,"qualitychange",!1,{quality:i})}}})},cancelRequests(){this.isHTML5&&(pe(K.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function H(e,...i){return o.empty(e)?e:e.toString().replace(/{(\d+)}/g,(t,n)=>i[n].toString())}const B=(e="",i="",t="")=>e.replace(new RegExp(i.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),de=(e="")=>e.toString().replace(/\w\S*/g,i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase());function ne(e=""){let i=e.toString();return i=function(t=""){let n=t.toString();return n=B(n,"-"," "),n=B(n,"_"," "),n=de(n),B(n," ","")}(i),i.charAt(0).toLowerCase()+i.slice(1)}function ye(e){const i=document.createElement("div");return i.appendChild(e),i.innerHTML}const xe={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Q={get(e="",i={}){if(o.empty(e)||o.empty(i))return"";let t=ot(i.i18n,e);if(o.empty(t))return Object.keys(xe).includes(e)?xe[e]:"";const n={"{seektime}":i.seekTime,"{title}":i.title};return Object.entries(n).forEach(([r,s])=>{t=B(t,r,s)}),t}};class ke{constructor(i){m(this,"get",t=>{if(!ke.supported||!this.enabled)return null;const n=window.localStorage.getItem(this.key);if(o.empty(n))return null;const r=JSON.parse(n);return o.string(t)&&t.length?r[t]:r}),m(this,"set",t=>{if(!ke.supported||!this.enabled||!o.object(t))return;let n=this.get();o.empty(n)&&(n={}),J(n,t);try{window.localStorage.setItem(this.key,JSON.stringify(n))}catch(r){}}),this.enabled=i.config.storage.enabled,this.key=i.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const i="___test";return window.localStorage.setItem(i,i),window.localStorage.removeItem(i),!0}catch(i){return!1}}}function be(e,i="text"){return new Promise((t,n)=>{try{const r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",()=>{if(i==="text")try{t(JSON.parse(r.responseText))}catch(s){t(r.responseText)}else t(r.response)}),r.addEventListener("error",()=>{throw new Error(r.status)}),r.open("GET",e,!0),r.responseType=i,r.send()}catch(r){n(r)}})}function Oe(e,i){if(!o.string(e))return;const t="cache",n=o.string(i);let r=!1;const s=()=>document.getElementById(i)!==null,a=(l,c)=>{l.innerHTML=c,n&&s()||document.body.insertAdjacentElement("afterbegin",l)};if(!n||!s()){const l=ke.supported,c=document.createElement("div");if(c.setAttribute("hidden",""),n&&c.setAttribute("id",i),l){const u=window.localStorage.getItem(`${t}-${i}`);if(r=u!==null,r){const f=JSON.parse(u);a(c,f.content)}}be(e).then(u=>{if(!o.empty(u)){if(l)try{window.localStorage.setItem(`${t}-${i}`,JSON.stringify({content:u}))}catch(f){}a(c,u)}}).catch(()=>{})}}const We=e=>Math.trunc(e/60/60%60,10),q=e=>Math.trunc(e/60%60,10),N=e=>Math.trunc(e%60,10);function U(e=0,i=!1,t=!1){if(!o.number(e))return U(void 0,i,t);const n=l=>`0${l}`.slice(-2);let r=We(e);const s=q(e),a=N(e);return r=i||r>0?`${r}:`:"",`${t&&e>0?"-":""}${r}${n(s)}:${n(a)}`}const h={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),i=window.location.host?window.location.host:window.top.location.host,t=e.host!==i||te.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=ee.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Xe.call(this,this.config.selectors.buttons.play),pause:ee.call(this,this.config.selectors.buttons.pause),restart:ee.call(this,this.config.selectors.buttons.restart),rewind:ee.call(this,this.config.selectors.buttons.rewind),fastForward:ee.call(this,this.config.selectors.buttons.fastForward),mute:ee.call(this,this.config.selectors.buttons.mute),pip:ee.call(this,this.config.selectors.buttons.pip),airplay:ee.call(this,this.config.selectors.buttons.airplay),settings:ee.call(this,this.config.selectors.buttons.settings),captions:ee.call(this,this.config.selectors.buttons.captions),fullscreen:ee.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ee.call(this,this.config.selectors.progress),this.elements.inputs={seek:ee.call(this,this.config.selectors.inputs.seek),volume:ee.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ee.call(this,this.config.selectors.display.buffer),currentTime:ee.call(this,this.config.selectors.display.currentTime),duration:ee.call(this,this.config.selectors.display.duration)},o.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,i){const t="http://www.w3.org/2000/svg",n=h.getIconUrl.call(this),r=`${n.cors?"":n.url}#${this.config.iconPrefix}`,s=document.createElementNS(t,"svg");it(s,J(i,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(t,"use"),l=`${r}-${e}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",l),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l),s.appendChild(a),s},createLabel(e,i={}){const t=Q.get(e,this.config);return C("span",Lt(Te({},i),{class:[i.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),t)},createBadge(e){if(o.empty(e))return null;const i=C("span",{class:this.config.classNames.menu.value});return i.appendChild(C("span",{class:this.config.classNames.menu.badge},e)),i},createButton(e,i){const t=J({},i);let n=ne(e);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(a=>{Object.keys(t).includes(a)&&(r[a]=t[a],delete t[a])}),r.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(a=>a===this.config.classNames.control)||J(t,{class:`${t.class} ${this.config.classNames.control}`}):t.class=this.config.classNames.control,e){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":t.class+=` ${this.config.classNames.control}--overlaid`,n="play",r.label="play",r.icon="play";break;default:o.empty(r.label)&&(r.label=n),o.empty(r.icon)&&(r.icon=e)}const s=C(r.element);return r.toggle?(s.appendChild(h.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild(h.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild(h.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild(h.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild(h.createIcon.call(this,r.icon)),s.appendChild(h.createLabel.call(this,r.label))),J(t,ge(this.config.selectors.buttons[n],t)),it(s,t),n==="play"?(o.array(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(s)):this.elements.buttons[n]=s,s},createRange(e,i){const t=C("input",J(ge(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Q.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},i));return this.elements.inputs[e]=t,h.updateRangeFill.call(this,t),Nt.setup(t),t},createProgress(e,i){const t=C("progress",J(ge(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},i));if(e!=="volume"){t.appendChild(C("span",null,"0"));const n={played:"played",buffer:"buffered"}[e],r=n?Q.get(n,this.config):"";t.innerText=`% ${r.toLowerCase()}`}return this.elements.display[e]=t,t},createTime(e,i){const t=ge(this.config.selectors.display[e],i),n=C("div",J(t,{class:`${t.class?t.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Q.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts(e,i){R.call(this,e,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const n=Re(e,'[role="menuitemradio"]');if(!n&&[" ","ArrowRight"].includes(t.key))h.showMenuPanel.call(this,i,!0);else{let r;t.key!==" "&&(t.key==="ArrowDown"||n&&t.key==="ArrowRight"?(r=e.nextElementSibling,o.element(r)||(r=e.parentNode.firstElementChild)):(r=e.previousElementSibling,o.element(r)||(r=e.parentNode.lastElementChild)),bt.call(this,r,!0))}},!1),R.call(this,e,"keyup",t=>{t.key==="Return"&&h.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:i,type:t,title:n,badge:r=null,checked:s=!1}){const a=ge(this.config.selectors.inputs[t]),l=C("button",J(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":s,value:e})),c=C("span");c.innerHTML=n,o.element(r)&&c.appendChild(r),l.appendChild(c),Object.defineProperty(l,"checked",{enumerable:!0,get:()=>l.getAttribute("aria-checked")==="true",set(u){u&&Array.from(l.parentNode.children).filter(f=>Re(f,'[role="menuitemradio"]')).forEach(f=>f.setAttribute("aria-checked","false")),l.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(l,"click keyup",u=>{if(!o.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),l.checked=!0,t){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}h.showMenuPanel.call(this,"home",o.keyboardEvent(u))}},t,!1),h.bindMenuItemShortcuts.call(this,l,t),i.appendChild(l)},formatTime(e=0,i=!1){return o.number(e)?U(e,We(this.duration)>0,i):e},updateTimeDisplay(e=null,i=0,t=!1){o.element(e)&&o.number(i)&&(e.innerText=h.formatTime(i,t))},updateVolume(){this.supported.ui&&(o.element(this.elements.inputs.volume)&&h.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),o.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(e,i=0){o.element(e)&&(e.value=i,h.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!o.event(e))return;let i=0;const t=(s,a)=>{const l=o.number(a)?a:0,c=o.element(s)?s:this.elements.display.buffer;if(o.element(c)){c.value=l;const u=c.getElementsByTagName("span")[0];o.element(u)&&(u.childNodes[0].nodeValue=l)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=this.currentTime,r=this.duration,i=n===0||r===0||Number.isNaN(n)||Number.isNaN(r)?0:(n/r*100).toFixed(2),e.type==="timeupdate"&&h.setRange.call(this,this.elements.inputs.seek,i);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}var n,r},updateRangeFill(e){const i=o.event(e)?e.target:e;if(o.element(i)&&i.getAttribute("type")==="range"){if(Re(i,this.config.selectors.inputs.seek)){i.setAttribute("aria-valuenow",this.currentTime);const t=h.formatTime(this.currentTime),n=h.formatTime(this.duration),r=Q.get("seekLabel",this.config);i.setAttribute("aria-valuetext",r.replace("{currentTime}",t).replace("{duration}",n))}else if(Re(i,this.config.selectors.inputs.volume)){const t=100*i.value;i.setAttribute("aria-valuenow",t),i.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else i.setAttribute("aria-valuenow",i.value);(te.isWebKit||te.isIPadOS)&&i.style.setProperty("--value",i.value/i.max*100+"%")}},updateSeekTooltip(e){var i,t;if(!this.config.tooltips.seek||!o.element(this.elements.inputs.seek)||!o.element(this.elements.display.seekTooltip)||this.duration===0)return;const n=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,s=f=>$(n,r,f);if(this.touch)return void s(!1);let a=0;const l=this.elements.progress.getBoundingClientRect();if(o.event(e))a=100/l.width*(e.pageX-l.left);else{if(!ht(n,r))return;a=parseFloat(n.style.left,10)}a<0?a=0:a>100&&(a=100);const c=this.duration/100*a;n.innerText=h.formatTime(c);const u=(i=this.config.markers)===null||i===void 0||(t=i.points)===null||t===void 0?void 0:t.find(({time:f})=>f===Math.round(c));u&&n.insertAdjacentHTML("afterbegin",`${u.label}<br>`),n.style.left=`${a}%`,o.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&s(e.type==="mouseenter")},timeUpdate(e){const i=!o.element(this.elements.display.duration)&&this.config.invertTime;h.updateTimeDisplay.call(this,this.elements.display.currentTime,i?this.duration-this.currentTime:this.currentTime,i),e&&e.type==="timeupdate"&&this.media.seeking||h.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=Dt(2,32))return Ae(this.elements.display.currentTime,!0),void Ae(this.elements.progress,!0);o.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=o.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&h.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&h.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&h.setMarkers.call(this),h.updateSeekTooltip.call(this)},toggleMenuButton(e,i){Ae(this.elements.settings.buttons[e],!i)},updateSetting(e,i,t){const n=this.elements.settings.panels[e];let r=null,s=i;if(e==="captions")r=this.currentTrack;else{if(r=o.empty(t)?this[e]:t,o.empty(r)&&(r=this.config[e].default),!o.empty(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${e}`);if(!this.config[e].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${e}`)}if(o.element(s)||(s=n&&n.querySelector('[role="menu"]')),!o.element(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=h.getLabel.call(this,e,r);const a=s&&s.querySelector(`[value="${r}"]`);o.element(a)&&(a.checked=!0)},getLabel(e,i){switch(e){case"speed":return i===1?Q.get("normal",this.config):`${i}&times;`;case"quality":if(o.number(i)){const t=Q.get(`qualityLabel.${i}`,this.config);return t.length?t:`${i}p`}return de(i);case"captions":return S.getLabel.call(this);default:return null}},setQualityMenu(e){if(!o.element(this.elements.settings.panels.quality))return;const i="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');o.array(e)&&(this.options.quality=d(e).filter(s=>this.config.quality.options.includes(s)));const n=!o.empty(this.options.quality)&&this.options.quality.length>1;if(h.toggleMenuButton.call(this,i,n),Be(t),h.checkMenu.call(this),!n)return;const r=s=>{const a=Q.get(`qualityBadge.${s}`,this.config);return a.length?h.createBadge.call(this,a):null};this.options.quality.sort((s,a)=>{const l=this.config.quality.options;return l.indexOf(s)>l.indexOf(a)?1:-1}).forEach(s=>{h.createMenuItem.call(this,{value:s,list:t,type:i,title:h.getLabel.call(this,"quality",s),badge:r(s)})}),h.updateSetting.call(this,i,t)},setCaptionsMenu(){if(!o.element(this.elements.settings.panels.captions))return;const e="captions",i=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=S.getTracks.call(this),n=!!t.length;if(h.toggleMenuButton.call(this,e,n),Be(i),h.checkMenu.call(this),!n)return;const r=t.map((s,a)=>({value:a,checked:this.captions.toggled&&this.currentTrack===a,title:S.getLabel.call(this,s),badge:s.language&&h.createBadge.call(this,s.language.toUpperCase()),list:i,type:"language"}));r.unshift({value:-1,checked:!this.captions.toggled,title:Q.get("disabled",this.config),list:i,type:"language"}),r.forEach(h.createMenuItem.bind(this)),h.updateSetting.call(this,e,i)},setSpeedMenu(){if(!o.element(this.elements.settings.panels.speed))return;const e="speed",i=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(n=>n>=this.minimumSpeed&&n<=this.maximumSpeed);const t=!o.empty(this.options.speed)&&this.options.speed.length>1;h.toggleMenuButton.call(this,e,t),Be(i),h.checkMenu.call(this),t&&(this.options.speed.forEach(n=>{h.createMenuItem.call(this,{value:n,list:i,type:e,title:h.getLabel.call(this,"speed",n)})}),h.updateSetting.call(this,e,i))},checkMenu(){const{buttons:e}=this.elements.settings,i=!o.empty(e)&&Object.values(e).some(t=>!t.hidden);Ae(this.elements.settings.menu,!i)},focusFirstMenuItem(e,i=!1){if(this.elements.settings.popup.hidden)return;let t=e;o.element(t)||(t=Object.values(this.elements.settings.panels).find(r=>!r.hidden));const n=t.querySelector('[role^="menuitem"]');bt.call(this,n,i)},toggleMenu(e){const{popup:i}=this.elements.settings,t=this.elements.buttons.settings;if(!o.element(i)||!o.element(t))return;const{hidden:n}=i;let r=n;if(o.boolean(e))r=e;else if(o.keyboardEvent(e)&&e.key==="Escape")r=!1;else if(o.event(e)){const s=o.function(e.composedPath)?e.composedPath()[0]:e.target,a=i.contains(s);if(a||!a&&e.target!==t&&r)return}t.setAttribute("aria-expanded",r),Ae(i,!r),$(this.elements.container,this.config.classNames.menu.open,r),r&&o.keyboardEvent(e)?h.focusFirstMenuItem.call(this,null,!0):r||n||bt.call(this,t,o.keyboardEvent(e))},getMenuSize(e){const i=e.cloneNode(!0);i.style.position="absolute",i.style.opacity=0,i.removeAttribute("hidden"),e.parentNode.appendChild(i);const t=i.scrollWidth,n=i.scrollHeight;return pe(i),{width:t,height:n}},showMenuPanel(e="",i=!1){const t=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!o.element(t))return;const n=t.parentNode,r=Array.from(n.children).find(s=>!s.hidden);if(X.transitions&&!X.reducedMotion){n.style.width=`${r.scrollWidth}px`,n.style.height=`${r.scrollHeight}px`;const s=h.getMenuSize.call(this,t),a=l=>{l.target===n&&["width","height"].includes(l.propertyName)&&(n.style.width="",n.style.height="",De.call(this,n,yt,a))};R.call(this,n,yt,a),n.style.width=`${s.width}px`,n.style.height=`${s.height}px`}Ae(r,!0),Ae(t,!1),h.focusFirstMenuItem.call(this,t,i)},setDownloadUrl(){const e=this.elements.buttons.download;o.element(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:i,createButton:t,createProgress:n,createRange:r,createTime:s,setQualityMenu:a,setSpeedMenu:l,showMenuPanel:c}=h;this.elements.controls=null,o.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const u=C("div",ge(this.config.selectors.controls.wrapper));this.elements.controls=u;const f={class:"plyr__controls__item"};return d(o.array(this.config.controls)?this.config.controls:[]).forEach(v=>{if(v==="restart"&&u.appendChild(t.call(this,"restart",f)),v==="rewind"&&u.appendChild(t.call(this,"rewind",f)),v==="play"&&u.appendChild(t.call(this,"play",f)),v==="fast-forward"&&u.appendChild(t.call(this,"fast-forward",f)),v==="progress"){const p=C("div",{class:`${f.class} plyr__progress__container`}),P=C("div",ge(this.config.selectors.progress));if(P.appendChild(r.call(this,"seek",{id:`plyr-seek-${e.id}`})),P.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){const I=C("span",{class:this.config.classNames.tooltip},"00:00");P.appendChild(I),this.elements.display.seekTooltip=I}this.elements.progress=P,p.appendChild(this.elements.progress),u.appendChild(p)}if(v==="current-time"&&u.appendChild(s.call(this,"currentTime",f)),v==="duration"&&u.appendChild(s.call(this,"duration",f)),v==="mute"||v==="volume"){let{volume:p}=this.elements;if(o.element(p)&&u.contains(p)||(p=C("div",J({},f,{class:`${f.class} plyr__volume`.trim()})),this.elements.volume=p,u.appendChild(p)),v==="mute"&&p.appendChild(t.call(this,"mute")),v==="volume"&&!te.isIos&&!te.isIPadOS){const P={max:1,step:.05,value:this.config.volume};p.appendChild(r.call(this,"volume",J(P,{id:`plyr-volume-${e.id}`})))}}if(v==="captions"&&u.appendChild(t.call(this,"captions",f)),v==="settings"&&!o.empty(this.config.settings)){const p=C("div",J({},f,{class:`${f.class} plyr__menu`.trim(),hidden:""}));p.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const P=C("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),I=C("div"),O=C("div",{id:`plyr-settings-${e.id}-home`}),z=C("div",{role:"menu"});O.appendChild(z),I.appendChild(O),this.elements.settings.panels.home=O,this.config.settings.forEach(_=>{const G=C("button",J(ge(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));i.call(this,G,_),R.call(this,G,"click",()=>{c.call(this,_,!1)});const oe=C("span",null,Q.get(_,this.config)),w=C("span",{class:this.config.classNames.menu.value});w.innerHTML=e[_],oe.appendChild(w),G.appendChild(oe),z.appendChild(G);const j=C("div",{id:`plyr-settings-${e.id}-${_}`,hidden:""}),le=C("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});le.appendChild(C("span",{"aria-hidden":!0},Q.get(_,this.config))),le.appendChild(C("span",{class:this.config.classNames.hidden},Q.get("menuBack",this.config))),R.call(this,j,"keydown",Pe=>{Pe.key==="ArrowLeft"&&(Pe.preventDefault(),Pe.stopPropagation(),c.call(this,"home",!0))},!1),R.call(this,le,"click",()=>{c.call(this,"home",!1)}),j.appendChild(le),j.appendChild(C("div",{role:"menu"})),I.appendChild(j),this.elements.settings.buttons[_]=G,this.elements.settings.panels[_]=j}),P.appendChild(I),p.appendChild(P),u.appendChild(p),this.elements.settings.popup=P,this.elements.settings.menu=p}if(v==="pip"&&X.pip&&u.appendChild(t.call(this,"pip",f)),v==="airplay"&&X.airplay&&u.appendChild(t.call(this,"airplay",f)),v==="download"){const p=J({},f,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(p.download="");const{download:P}=this.config.urls;!o.url(P)&&this.isEmbed&&J(p,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(t.call(this,"download",p))}v==="fullscreen"&&u.appendChild(t.call(this,"fullscreen",f))}),this.isHTML5&&a.call(this,K.getQualityOptions.call(this)),l.call(this),u},inject(){if(this.config.loadSprite){const r=h.getIconUrl.call(this);r.cors&&Oe(r.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const i={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;o.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),o.element(this.config.controls)||o.string(this.config.controls)?e=this.config.controls:(e=h.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:S.getLabel.call(this)}),t=!1);let n;if(t&&o.string(this.config.controls)&&(e=(r=>{let s=r;return Object.entries(i).forEach(([a,l])=>{s=B(s,`{${a}}`,l)}),s})(e)),o.string(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),o.element(n)||(n=this.elements.container),n[o.element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),o.element(this.elements.controls)||h.findElements.call(this),!o.empty(this.elements.buttons)){const r=s=>{const a=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>ht(s,a),set(l=!1){$(s,a,l),s.setAttribute("aria-pressed",l?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{o.array(s)||o.nodeList(s)?Array.from(s).filter(Boolean).forEach(r):r(s)})}if(te.isEdge&&Qe(n),this.config.tooltips.controls){const{classNames:r,selectors:s}=this.config,a=`${s.controls.wrapper} ${s.labels} .${r.hidden}`,l=Xe.call(this,a);Array.from(l).forEach(c=>{$(c,this.config.classNames.hidden,!1),$(c,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers(){var e,i;if(!this.duration||this.elements.markers)return;const t=(e=this.config.markers)===null||e===void 0||(i=e.points)===null||i===void 0?void 0:i.filter(({time:c})=>c>0&&c<this.duration);if(t==null||!t.length)return;const n=document.createDocumentFragment(),r=document.createDocumentFragment();let s=null;const a=`${this.config.classNames.tooltip}--visible`,l=c=>$(s,a,c);t.forEach(c=>{const u=C("span",{class:this.config.classNames.marker},""),f=c.time/this.duration*100+"%";s&&(u.addEventListener("mouseenter",()=>{c.label||(s.style.left=f,s.innerHTML=c.label,l(!0))}),u.addEventListener("mouseleave",()=>{l(!1)})),u.addEventListener("click",()=>{this.currentTime=c.time}),u.style.left=f,r.appendChild(u)}),n.appendChild(r),this.config.tooltips.seek||(s=C("span",{class:this.config.classNames.tooltip},""),n.appendChild(s)),this.elements.markers={points:r,tip:s},this.elements.progress.appendChild(n)}};function x(e,i=!0){let t=e;if(i){const n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch(n){return null}}function F(e){const i=new URLSearchParams;return o.object(e)&&Object.entries(e).forEach(([t,n])=>{i.set(t,n)}),i}const S={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!X.textTracks)return void(o.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&h.setCaptionsMenu.call(this));var e,i;if(o.element(this.elements.captions)||(this.elements.captions=C("div",ge(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),e=this.elements.captions,i=this.elements.wrapper,o.element(e)&&o.element(i)&&i.parentNode.insertBefore(e,i.nextSibling)),te.isIE&&window.URL){const s=this.media.querySelectorAll("track");Array.from(s).forEach(a=>{const l=a.getAttribute("src"),c=x(l);c!==null&&c.hostname!==window.location.href.hostname&&["http:","https:"].includes(c.protocol)&&be(l,"blob").then(u=>{a.setAttribute("src",window.URL.createObjectURL(u))}).catch(()=>{pe(a)})})}const t=d((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(s=>s.split("-")[0]));let n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();n==="auto"&&([n]=t);let r=this.storage.get("captions");if(o.boolean(r)||({active:r}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:r,language:n,languages:t}),this.isHTML5){const s=this.config.captions.update?"addtrack removetrack":"removetrack";R.call(this,this.media.textTracks,s,S.update.bind(this))}setTimeout(S.update.bind(this),0)},update(){const e=S.getTracks.call(this,!0),{active:i,language:t,meta:n,currentTrackNode:r}=this.captions,s=!!e.find(a=>a.language===t);this.isHTML5&&this.isVideo&&e.filter(a=>!n.get(a)).forEach(a=>{this.debug.log("Track added",a),n.set(a,{default:a.mode==="showing"}),a.mode==="showing"&&(a.mode="hidden"),R.call(this,a,"cuechange",()=>S.updateCues.call(this))}),(s&&this.language!==t||!e.includes(r))&&(S.setLanguage.call(this,t),S.toggle.call(this,i&&s)),this.elements&&$(this.elements.container,this.config.classNames.captions.enabled,!o.empty(e)),o.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&h.setCaptionsMenu.call(this)},toggle(e,i=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,n=this.config.classNames.captions.active,r=o.nullOrUndefined(e)?!t:e;if(r!==t){if(i||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!i){const s=S.getTracks.call(this),a=S.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=a.language,void S.set.call(this,s.indexOf(a))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),$(this.elements.container,n,r),this.captions.toggled=r,h.updateSetting.call(this,"captions"),E.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout(()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,i=!0){const t=S.getTracks.call(this);if(e!==-1)if(o.number(e))if(e in t){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const n=t[e],{language:r}=n||{};this.captions.currentTrackNode=n,h.updateSetting.call(this,"captions"),i||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),E.call(this,this.media,"languagechange")}S.toggle.call(this,!0,i),this.isHTML5&&this.isVideo&&S.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else S.toggle.call(this,!1,i)},setLanguage(e,i=!0){if(!o.string(e))return void this.debug.warn("Invalid language argument",e);const t=e.toLowerCase();this.captions.language=t;const n=S.getTracks.call(this),r=S.findTrack.call(this,[t]);S.set.call(this,n.indexOf(r),i)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(i=>!this.isHTML5||e||this.captions.meta.has(i)).filter(i=>["captions","subtitles"].includes(i.kind))},findTrack(e,i=!1){const t=S.getTracks.call(this),n=a=>Number((this.captions.meta.get(a)||{}).default),r=Array.from(t).sort((a,l)=>n(l)-n(a));let s;return e.every(a=>(s=r.find(l=>l.language===a),!s)),s||(i?r[0]:void 0)},getCurrentTrack(){return S.getTracks.call(this)[this.currentTrack]},getLabel(e){let i=e;return!o.track(i)&&X.textTracks&&this.captions.toggled&&(i=S.getCurrentTrack.call(this)),o.track(i)?o.empty(i.label)?o.empty(i.language)?Q.get("enabled",this.config):e.language.toUpperCase():i.label:Q.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!o.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!o.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let i=e;if(!i){const n=S.getCurrentTrack.call(this);i=Array.from((n||{}).activeCues||[]).map(r=>r.getCueAsHTML()).map(ye)}const t=i.map(n=>n.trim()).join(`
`);if(t!==this.elements.captions.innerHTML){Be(this.elements.captions);const n=C("span",ge(this.config.selectors.caption));n.innerHTML=t,this.elements.captions.appendChild(n),E.call(this,this.media,"cuechange")}}},W={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"Pop-up",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},posterThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},posterThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},me="picture-in-picture",re="inline",ce={html5:"html5",youtube:"youtube",vimeo:"vimeo"},pt="audio",st="video",mt=()=>{};class ft{constructor(i=!1){this.enabled=window.console&&i,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):mt}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):mt}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):mt}}class ue{constructor(i){m(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;o.element(t)&&(t.pressed=this.active);const n=this.target===this.player.media?this.target:this.player.elements.container;E.call(this.player,n,this.active?"enterfullscreen":"exitfullscreen",!0)}),m(this,"toggleFallback",(t=!1)=>{var n,r;if(t?this.scrollPosition={x:(n=window.scrollX)!=null?n:0,y:(r=window.scrollY)!=null?r:0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",$(this.target,this.player.config.classNames.fullscreen.fallback,t),te.isIos){let s=document.head.querySelector('meta[name="viewport"]');const a="viewport-fit=cover";s||(s=document.createElement("meta"),s.setAttribute("name","viewport"));const l=o.string(s.content)&&s.content.includes(a);t?(this.cleanupViewport=!l,l||(s.content+=`,${a}`)):this.cleanupViewport&&(s.content=s.content.split(",").filter(c=>c.trim()!==a).join(","))}this.onChange()}),m(this,"trapFocus",t=>{if(te.isIos||te.isIPadOS||!this.active||t.key!=="Tab")return;const n=document.activeElement,r=Xe.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=r,a=r[r.length-1];n!==a||t.shiftKey?n===s&&t.shiftKey&&(a.focus(),t.preventDefault()):(s.focus(),t.preventDefault())}),m(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":ue.nativeSupported?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");$(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),m(this,"enter",()=>{this.supported&&(te.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!ue.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?o.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),m(this,"exit",()=>{if(this.supported)if(te.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),g(this.player.play());else if(!ue.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!o.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),m(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=i,this.prefix=ue.prefix,this.property=ue.property,this.scrollPosition={x:0,y:0},this.forceFallback=i.config.fullscreen.fallback==="force",this.player.elements.fullscreen=i.config.fullscreen.container&&function(t,n){const{prototype:r}=Element;return(r.closest||function(){let s=this;do{if(Re.matches(s,n))return s;s=s.parentElement||s.parentNode}while(s!==null&&s.nodeType===1);return null}).call(t,n)}(this.player.elements.container,i.config.fullscreen.container),R.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),R.call(this.player,this.player.elements.container,"dblclick",t=>{o.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),R.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return ue.nativeSupported&&!this.forceFallback}static get prefix(){if(o.function(document.exitFullscreen))return"";let i="";return["webkit","moz","ms"].some(t=>!(!o.function(document[`${t}ExitFullscreen`])&&!o.function(document[`${t}CancelFullScreen`]))&&(i=t,!0)),i}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,ue.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||ue.nativeSupported||!te.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!ue.nativeSupported||this.forceFallback)return ht(this.target,this.player.config.classNames.fullscreen.fallback);const i=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return i&&i.shadowRoot?i===this.target.getRootNode().host:i===this.target}get target(){var i;return te.isIos&&this.player.config.fullscreen.iosNative?this.player.media:(i=this.player.elements.fullscreen)!=null?i:this.player.elements.container}}function Ve(e,i=1){return new Promise((t,n)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=i?t:n)(r)};Object.assign(r,{onload:s,onerror:s,src:e})})}const V={addStyleHook(){$(this.elements.container,this.config.selectors.container.replace(".",""),!0),$(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void V.toggleNativeControls.call(this,!0);o.element(this.elements.controls)||(h.inject.call(this),this.listeners.controls()),V.toggleNativeControls.call(this),this.isHTML5&&S.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,h.updateVolume.call(this),h.timeUpdate.call(this),h.durationUpdate.call(this),V.checkPlaying.call(this),$(this.elements.container,this.config.classNames.pip.supported,X.pip&&this.isHTML5&&this.isVideo),$(this.elements.container,this.config.classNames.airplay.supported,X.airplay&&this.isHTML5),$(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{E.call(this,this.media,"ready")},0),V.setTitle.call(this),this.poster&&V.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&h.durationUpdate.call(this),this.config.mediaMetadata&&h.setMediaMetadata.call(this)},setTitle(){let e=Q.get("play",this.config);if(o.string(this.config.title)&&!o.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(i=>{i.setAttribute("aria-label",e)}),this.isEmbed){const i=ee.call(this,"iframe");if(!o.element(i))return;const t=o.empty(this.config.title)?"video":this.config.title,n=Q.get("frameTitle",this.config);i.setAttribute("title",n.replace("{title}",t))}},togglePoster(e){$(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,i=!0){return i&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),y.call(this).then(()=>Ve(e)).catch(t=>{throw e===this.poster&&V.togglePoster.call(this,!1),t}).then(()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),V.togglePoster.call(this,!0),e)))},checkPlaying(e){$(this.elements.container,this.config.classNames.playing,this.playing),$(this.elements.container,this.config.classNames.paused,this.paused),$(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(i=>{Object.assign(i,{pressed:this.playing}),i.setAttribute("aria-label",Q.get(this.playing?"pause":"play",this.config))}),o.event(e)&&e.type==="timeupdate"||V.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{$(this.elements.container,this.config.classNames.loading,this.loading),V.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:i}=this.elements;if(i&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(e||this.loading||this.paused||i.pressed||i.hover||t))}},migrateStyles(){Object.values(Te({},this.media.style)).filter(e=>!o.empty(e)&&o.string(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),o.empty(this.media.style)&&this.media.removeAttribute("style")}};class ze{constructor(i){m(this,"firstTouch",()=>{const{player:t}=this,{elements:n}=t;t.touch=!0,$(n.container,t.config.classNames.isTouch,!0)}),m(this,"global",(t=!0)=>{const{player:n}=this;n.config.keyboard.global&&nt.call(n,window,"keydown keyup",this.handleKey,t,!1),nt.call(n,document.body,"click",this.toggleMenu,t),dt.call(n,document.body,"touchstart",this.firstTouch)}),m(this,"container",()=>{const{player:t}=this,{config:n,elements:r,timers:s}=t;!n.keyboard.global&&n.keyboard.focused&&R.call(t,r.container,"keydown keyup",this.handleKey,!1),R.call(t,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",c=>{const{controls:u}=r;u&&c.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let f=0;["touchstart","touchmove","mousemove"].includes(c.type)&&(V.toggleControls.call(t,!0),f=t.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>V.toggleControls.call(t,!1),f)});const a=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const c=r.wrapper,{active:u}=t.fullscreen,[f,v]=L.call(t),p=T(`aspect-ratio: ${f} / ${v}`);if(!u)return void(p?(c.style.width=null,c.style.height=null):(c.style.maxWidth=null,c.style.margin=null));const[P,I]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],O=P/I>f/v;p?(c.style.width=O?"auto":"100%",c.style.height=O?"100%":"auto"):(c.style.maxWidth=O?I/v*f+"px":null,c.style.margin=O?"0 auto":null)},l=()=>{clearTimeout(s.resized),s.resized=setTimeout(a,50)};R.call(t,r.container,"enterfullscreen exitfullscreen",c=>{const{target:u}=t.fullscreen;u===r.container&&(!t.isEmbed&&o.empty(t.config.ratio)||(a(),(c.type==="enterfullscreen"?R:De).call(t,window,"resize",l)))})}),m(this,"media",()=>{const{player:t}=this,{elements:n}=t;if(R.call(t,t.media,"timeupdate seeking seeked",s=>h.timeUpdate.call(t,s)),R.call(t,t.media,"durationchange loadeddata loadedmetadata",s=>h.durationUpdate.call(t,s)),R.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),R.call(t,t.media,"progress playing seeking seeked",s=>h.updateProgress.call(t,s)),R.call(t,t.media,"volumechange",s=>h.updateVolume.call(t,s)),R.call(t,t.media,"playing play pause ended emptied timeupdate",s=>V.checkPlaying.call(t,s)),R.call(t,t.media,"waiting canplay seeked playing",s=>V.checkLoading.call(t,s)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const s=ee.call(t,`.${t.config.classNames.video}`);if(!o.element(s))return;R.call(t,n.container,"click",a=>{([n.container,s].includes(a.target)||s.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(a,t.restart,"restart"),this.proxy(a,()=>{g(t.play())},"play")):this.proxy(a,()=>{g(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&R.call(t,n.wrapper,"contextmenu",s=>{s.preventDefault()},!1),R.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),R.call(t,t.media,"ratechange",()=>{h.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),R.call(t,t.media,"qualitychange",s=>{h.updateSetting.call(t,"quality",null,s.detail.quality)}),R.call(t,t.media,"ready qualitychange",()=>{h.setDownloadUrl.call(t)});const r=t.config.events.concat(["keyup","keydown"]).join(" ");R.call(t,t.media,r,s=>{let{detail:a={}}=s;s.type==="error"&&(a=t.media.error),E.call(t,n.container,s.type,!0,a)})}),m(this,"proxy",(t,n,r)=>{const{player:s}=this,a=s.config.listeners[r];let l=!0;o.function(a)&&(l=a.call(s,t)),l!==!1&&o.function(n)&&n.call(s,t)}),m(this,"bind",(t,n,r,s,a=!0)=>{const{player:l}=this,c=l.config.listeners[s],u=o.function(c);R.call(l,t,n,f=>this.proxy(f,r,s),a&&!u)}),m(this,"controls",()=>{const{player:t}=this,{elements:n}=t,r=te.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach(s=>{this.bind(s,"click",()=>{g(t.togglePlay())},"play")}),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(n.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(n.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(n.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(n.buttons.download,"click",()=>{E.call(t,t.media,"download")},"download"),this.bind(n.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(n.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),h.toggleMenu.call(t,s)},null,!1),this.bind(n.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),h.toggleMenu.call(t,s)):h.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(n.settings.menu,"keydown",s=>{s.key==="Escape"&&h.toggleMenu.call(t,s)}),this.bind(n.inputs.seek,"mousedown mousemove",s=>{const a=n.progress.getBoundingClientRect(),l=100/a.width*(s.pageX-a.left);s.currentTarget.setAttribute("seek-value",l)}),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const a=s.currentTarget,l="play-on-seeked";if(o.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;t.lastSeekTime=Date.now();const c=a.hasAttribute(l),u=["mouseup","touchend","keyup"].includes(s.type);c&&u?(a.removeAttribute(l),g(t.play())):!u&&t.playing&&(a.setAttribute(l,""),t.pause())}),te.isIos){const s=Xe.call(t,'input[type="range"]');Array.from(s).forEach(a=>this.bind(a,r,l=>Qe(l.target)))}this.bind(n.inputs.seek,r,s=>{const a=s.currentTarget;let l=a.getAttribute("seek-value");o.empty(l)&&(l=a.value),a.removeAttribute("seek-value"),t.currentTime=l/a.max*t.duration},"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",s=>h.updateSeekTooltip.call(t,s)),this.bind(n.progress,"mousemove touchmove",s=>{const{posterThumbnails:a}=t;a&&a.loaded&&a.startMove(s)}),this.bind(n.progress,"mouseleave touchend click",()=>{const{posterThumbnails:s}=t;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(n.progress,"mousedown touchstart",s=>{const{posterThumbnails:a}=t;a&&a.loaded&&a.startScrubbing(s)}),this.bind(n.progress,"mouseup touchend",s=>{const{posterThumbnails:a}=t;a&&a.loaded&&a.endScrubbing(s)}),te.isWebKit&&Array.from(Xe.call(t,'input[type="range"]')).forEach(s=>{this.bind(s,"input",a=>h.updateRangeFill.call(t,a.target))}),t.config.toggleInvert&&!o.element(n.display.duration)&&this.bind(n.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,h.timeUpdate.call(t))}),this.bind(n.inputs.volume,r,s=>{t.volume=s.target.value},"volume"),this.bind(n.controls,"mouseenter mouseleave",s=>{n.controls.hover=!t.touch&&s.type==="mouseenter"}),n.fullscreen&&Array.from(n.fullscreen.children).filter(s=>!s.contains(n.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",a=>{n.controls&&(n.controls.hover=!t.touch&&a.type==="mouseenter")})}),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{n.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(n.controls,"focusin",()=>{const{config:s,timers:a}=t;$(n.controls,s.classNames.noTransition,!0),V.toggleControls.call(t,!0),setTimeout(()=>{$(n.controls,s.classNames.noTransition,!1)},0);const l=this.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout(()=>V.toggleControls.call(t,!1),l)}),this.bind(n.inputs.volume,"wheel",s=>{const a=s.webkitDirectionInvertedFromDevice,[l,c]=[s.deltaX,-s.deltaY].map(v=>a?-v:v),u=Math.sign(Math.abs(l)>Math.abs(c)?l:c);t.increaseVolume(u/50);const{volume:f}=t.media;(u===1&&f<1||u===-1&&f>0)&&s.preventDefault()},"volume",!1)}),this.player=i,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(i){const{player:t}=this,{elements:n}=t,{key:r,type:s,altKey:a,ctrlKey:l,metaKey:c,shiftKey:u}=i,f=s==="keydown",v=f&&r===this.lastKey;if(!(a||l||c||u)&&r){if(f){const P=document.activeElement;if(o.element(P)){const{editable:I}=t.config.selectors,{seek:O}=n.inputs;if(P!==O&&Re(P,I)||i.key===" "&&Re(P,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(r)&&(i.preventDefault(),i.stopPropagation()),r){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":v||(p=parseInt(r,10),t.currentTime=t.duration/10*p);break;case" ":case"k":v||g(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":v||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":v||t.toggleCaptions();break;case"l":t.loop=!t.loop}r==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=r}else this.lastKey=null;var p}}toggleMenu(i){h.toggleMenu.call(this.player,i)}}var rt=function(e,i){return e(i={exports:{}},i.exports),i.exports}(function(e,i){e.exports=function(){var t=function(){},n={},r={},s={};function a(p,P){p=p.push?p:[p];var I,O,z,_=[],G=p.length,oe=G;for(I=function(w,j){j.length&&_.push(w),--oe||P(_)};G--;)O=p[G],(z=r[O])?I(O,z):(s[O]=s[O]||[]).push(I)}function l(p,P){if(p){var I=s[p];if(r[p]=P,I)for(;I.length;)I[0](p,P),I.splice(0,1)}}function c(p,P){p.call&&(p={success:p}),P.length?(p.error||t)(P):(p.success||t)(p)}function u(p,P,I,O){var z,_,G=document,oe=I.async,w=(I.numRetries||0)+1,j=I.before||t,le=p.replace(/[\?|#].*$/,""),Pe=p.replace(/^(css|img)!/,"");O=O||0,/(^css!|\.css$)/.test(le)?((_=G.createElement("link")).rel="stylesheet",_.href=Pe,(z="hideFocus"in _)&&_.relList&&(z=0,_.rel="preload",_.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(le)?(_=G.createElement("img")).src=Pe:((_=G.createElement("script")).src=p,_.async=oe===void 0||oe),_.onload=_.onerror=_.onbeforeload=function(Ke){var ve=Ke.type[0];if(z)try{_.sheet.cssText.length||(ve="e")}catch(Ft){Ft.code!=18&&(ve="e")}if(ve=="e"){if((O+=1)<w)return u(p,P,I,O)}else if(_.rel=="preload"&&_.as=="style")return _.rel="stylesheet";P(p,ve,Ke.defaultPrevented)},j(p,_)!==!1&&G.head.appendChild(_)}function f(p,P,I){var O,z,_=(p=p.push?p:[p]).length,G=_,oe=[];for(O=function(w,j,le){if(j=="e"&&oe.push(w),j=="b"){if(!le)return;oe.push(w)}--_||P(oe)},z=0;z<G;z++)u(p[z],O,I)}function v(p,P,I){var O,z;if(P&&P.trim&&(O=P),z=(O?I:P)||{},O){if(O in n)throw"LoadJS";n[O]=!0}function _(G,oe){f(p,function(w){c(z,w),G&&c({success:G,error:oe},w),l(O,w)},z)}if(z.returnPromise)return new Promise(_);_()}return v.ready=function(p,P){return a(p,function(I){c(P,I)}),v},v.done=function(p){l(p,[])},v.reset=function(){n={},r={},s={}},v.isDefined=function(p){return p in n},v}()});function Ze(e){return new Promise((i,t)=>{rt(e,{success:i,error:t})})}function ae(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,E.call(this,this.media,e?"play":"pause"))}const ct={setup(){const e=this;$(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Y.call(e),o.object(window.Vimeo)?ct.ready.call(e):Ze(e.config.urls.vimeo.sdk).then(()=>{ct.ready.call(e)}).catch(i=>{e.debug.warn("Vimeo SDK (player.js) failed to load",i)})},ready(){const e=this,i=e.config.vimeo,oe=i,{premium:t,referrerPolicy:n}=oe,r=Vt(oe,["premium","referrerPolicy"]);let s=e.media.getAttribute("src"),a="";o.empty(s)?(s=e.media.getAttribute(e.config.attributes.embed.id),a=e.media.getAttribute(e.config.attributes.embed.hash)):a=function(w){const j=w.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return j&&j.length===5?j[4]:null}(s);const l=a?{h:a}:{};t&&Object.assign(r,{controls:!1,sidedock:!1});const c=F(Te(Te({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline},l),r)),u=(f=s,o.empty(f)?null:o.number(Number(f))?f:f.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:f);var f;const v=C("iframe"),p=H(e.config.urls.vimeo.iframe,u,c);if(v.setAttribute("src",p),v.setAttribute("allowfullscreen",""),v.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),o.empty(n)||v.setAttribute("referrerPolicy",n),t||!i.customControls)v.setAttribute("data-poster",e.poster),e.media=Je(v,e.media);else{const w=C("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});w.appendChild(v),e.media=Je(w,e.media)}i.customControls||be(H(e.config.urls.vimeo.api,p)).then(w=>{!o.empty(w)&&w.thumbnail_url&&V.setPoster.call(e,w.thumbnail_url).catch(()=>{})}),e.embed=new window.Vimeo.Player(v,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(ae.call(e,!0),e.embed.play()),e.media.pause=()=>(ae.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:P}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>P,set(w){const{embed:j,media:le,paused:Pe,volume:Ke}=e,ve=Pe&&!j.hasPlayed;le.seeking=!0,E.call(e,le,"seeking"),Promise.resolve(ve&&j.setVolume(0)).then(()=>j.setCurrentTime(w)).then(()=>ve&&j.pause()).then(()=>ve&&j.setVolume(Ke)).catch(()=>{})}});let I=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>I,set(w){e.embed.setPlaybackRate(w).then(()=>{I=w,E.call(e,e.media,"ratechange")}).catch(()=>{e.options.speed=[1]})}});let{volume:O}=e.config;Object.defineProperty(e.media,"volume",{get:()=>O,set(w){e.embed.setVolume(w).then(()=>{O=w,E.call(e,e.media,"volumechange")})}});let{muted:z}=e.config;Object.defineProperty(e.media,"muted",{get:()=>z,set(w){const j=!!o.boolean(w)&&w;e.embed.setMuted(!!j||e.config.muted).then(()=>{z=j,E.call(e,e.media,"volumechange")})}});let _,{loop:G}=e.config;Object.defineProperty(e.media,"loop",{get:()=>G,set(w){const j=o.boolean(w)?w:e.config.loop.active;e.embed.setLoop(j).then(()=>{G=j})}}),e.embed.getVideoUrl().then(w=>{_=w,h.setDownloadUrl.call(e)}).catch(w=>{this.debug.warn(w)}),Object.defineProperty(e.media,"currentSrc",{get:()=>_}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(w=>{const[j,le]=w;e.embed.ratio=se(j,le),Y.call(this)}),e.embed.setAutopause(e.config.autopause).then(w=>{e.config.autopause=w}),e.embed.getVideoTitle().then(w=>{e.config.title=w,V.setTitle.call(this)}),e.embed.getCurrentTime().then(w=>{P=w,E.call(e,e.media,"timeupdate")}),e.embed.getDuration().then(w=>{e.media.duration=w,E.call(e,e.media,"durationchange")}),e.embed.getTextTracks().then(w=>{e.media.textTracks=w,S.setup.call(e)}),e.embed.on("cuechange",({cues:w=[]})=>{const j=w.map(le=>function(Pe){const Ke=document.createDocumentFragment(),ve=document.createElement("div");return Ke.appendChild(ve),ve.innerHTML=Pe,Ke.firstChild.innerText}(le.text));S.updateCues.call(e,j)}),e.embed.on("loaded",()=>{e.embed.getPaused().then(w=>{ae.call(e,!w),w||E.call(e,e.media,"playing")}),o.element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)}),e.embed.on("bufferstart",()=>{E.call(e,e.media,"waiting")}),e.embed.on("bufferend",()=>{E.call(e,e.media,"playing")}),e.embed.on("play",()=>{ae.call(e,!0),E.call(e,e.media,"playing")}),e.embed.on("pause",()=>{ae.call(e,!1)}),e.embed.on("timeupdate",w=>{e.media.seeking=!1,P=w.seconds,E.call(e,e.media,"timeupdate")}),e.embed.on("progress",w=>{e.media.buffered=w.percent,E.call(e,e.media,"progress"),parseInt(w.percent,10)===1&&E.call(e,e.media,"canplaythrough"),e.embed.getDuration().then(j=>{j!==e.media.duration&&(e.media.duration=j,E.call(e,e.media,"durationchange"))})}),e.embed.on("seeked",()=>{e.media.seeking=!1,E.call(e,e.media,"seeked")}),e.embed.on("ended",()=>{e.media.paused=!0,E.call(e,e.media,"ended")}),e.embed.on("error",w=>{e.media.error=w,E.call(e,e.media,"error")}),i.customControls&&setTimeout(()=>V.build.call(e),0)}};function et(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,E.call(this,this.media,e?"play":"pause"))}function At(e){return e.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const tt={setup(){if($(this.elements.wrapper,this.config.classNames.embed,!0),o.object(window.YT)&&o.function(window.YT.Player))tt.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{o.function(e)&&e(),tt.ready.call(this)},Ze(this.config.urls.youtube.sdk).catch(i=>{this.debug.warn("YouTube API failed to load",i)})}},getTitle(e){be(H(this.config.urls.youtube.api,e)).then(i=>{if(o.object(i)){const{title:t,height:n,width:r}=i;this.config.title=t,V.setTitle.call(this),this.embed.ratio=se(r,n)}Y.call(this)}).catch(()=>{Y.call(this)})},ready(){const e=this,i=e.config.youtube,t=e.media&&e.media.getAttribute("id");if(!o.empty(t)&&t.startsWith("youtube-"))return;let n=e.media.getAttribute("src");o.empty(n)&&(n=e.media.getAttribute(this.config.attributes.embed.id));const r=(s=n,o.empty(s)?null:s.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:s);var s;const a=C("div",{id:`${e.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":i.customControls?e.poster:void 0});if(e.media=Je(a,e.media),i.customControls){const l=c=>`https://i.ytimg.com/vi/${r}/${c}default.jpg`;Ve(l("maxres"),121).catch(()=>Ve(l("sd"),121)).catch(()=>Ve(l("hq"))).then(c=>V.setPoster.call(e,c.src)).then(c=>{c.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}e.embed=new window.YT.Player(e.media,{videoId:r,host:At(i),playerVars:J({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&i.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},i),events:{onError(l){if(!e.media.error){const c=l.data,u={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[c]||"An unknown error occurred";e.media.error={code:c,message:u},E.call(e,e.media,"error")}},onPlaybackRateChange(l){const c=l.target;e.media.playbackRate=c.getPlaybackRate(),E.call(e,e.media,"ratechange")},onReady(l){if(o.function(e.media.play))return;const c=l.target;tt.getTitle.call(e,r),e.media.play=()=>{et.call(e,!0),c.playVideo()},e.media.pause=()=>{et.call(e,!1),c.pauseVideo()},e.media.stop=()=>{c.stopVideo()},e.media.duration=c.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(c.getCurrentTime()),set(p){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,E.call(e,e.media,"seeking"),c.seekTo(p)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>c.getPlaybackRate(),set(p){c.setPlaybackRate(p)}});let{volume:u}=e.config;Object.defineProperty(e.media,"volume",{get:()=>u,set(p){u=p,c.setVolume(100*u),E.call(e,e.media,"volumechange")}});let{muted:f}=e.config;Object.defineProperty(e.media,"muted",{get:()=>f,set(p){const P=o.boolean(p)?p:f;f=P,c[P?"mute":"unMute"](),c.setVolume(100*u),E.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>c.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const v=c.getAvailablePlaybackRates();e.options.speed=v.filter(p=>e.config.speed.options.includes(p)),e.supported.ui&&i.customControls&&e.media.setAttribute("tabindex",-1),E.call(e,e.media,"timeupdate"),E.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=c.getVideoLoadedFraction(),(e.media.lastBuffered===null||e.media.lastBuffered<e.media.buffered)&&E.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,e.media.buffered===1&&(clearInterval(e.timers.buffering),E.call(e,e.media,"canplaythrough"))},200),i.customControls&&setTimeout(()=>V.build.call(e),50)},onStateChange(l){const c=l.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(l.data)&&(e.media.seeking=!1,E.call(e,e.media,"seeked")),l.data){case-1:E.call(e,e.media,"timeupdate"),e.media.buffered=c.getVideoLoadedFraction(),E.call(e,e.media,"progress");break;case 0:et.call(e,!1),e.media.loop?(c.stopVideo(),c.playVideo()):E.call(e,e.media,"ended");break;case 1:i.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(et.call(e,!0),E.call(e,e.media,"playing"),e.timers.playing=setInterval(()=>{E.call(e,e.media,"timeupdate")},50),e.media.duration!==c.getDuration()&&(e.media.duration=c.getDuration(),E.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),et.call(e,!1);break;case 3:E.call(e,e.media,"waiting")}E.call(e,e.elements.container,"statechange",!1,{code:l.data})}}})}},_t={setup(){this.media?($(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),$(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&$(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=C("div",{class:this.config.classNames.video}),Et(this.media,this.elements.wrapper),this.elements.poster=C("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?K.setup.call(this):this.isYouTube?tt.setup.call(this):this.isVimeo&&ct.setup.call(this)):this.debug.warn("No media element found!")}};class Rt{constructor(i){m(this,"load",()=>{this.enabled&&(o.object(window.google)&&o.object(window.google.ima)?this.ready():Ze(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),m(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),m(this,"setupIMA",()=>{this.elements.container=C("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),m(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(n){this.onAdError(n)}}),m(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const n=U(Math.max(this.manager.getRemainingTime(),0)),r=`${Q.get("advertisement",this.player.config)} - ${n}`;this.elements.container.setAttribute("data-badge-text",r)},100)}),m(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=t.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r=>this.onAdError(r)),Object.keys(google.ima.AdEvent.Type).forEach(r=>{this.manager.addEventListener(google.ima.AdEvent.Type[r],s=>this.onAdEvent(s))}),this.trigger("loaded")}),m(this,"addCuePoints",()=>{o.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const n=this.player.elements.progress;if(o.element(n)){const r=100/this.player.duration*t,s=C("span",{class:this.player.config.classNames.cues});s.style.left=`${r.toString()}%`,n.appendChild(s)}}})}),m(this,"onAdEvent",t=>{const{container:n}=this.player.elements,r=t.getAd(),s=t.getAdData();switch((a=>{E.call(this.player,this.player.media,`ads${a.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=n.offsetWidth,r.height=n.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),m(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),m(this,"listeners",()=>{const{container:t}=this.player.elements;let n;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{n=this.player.currentTime}),this.player.on("seeked",()=>{const r=this.player.currentTime;o.empty(this.cuePoints)||this.cuePoints.forEach((s,a)=>{n<s&&s<r&&(this.manager.discardAdBreak(),this.cuePoints.splice(a,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),m(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(n){this.onAdError(n)}}).catch(()=>{})}),m(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,g(this.player.media.play())}),m(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),m(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),m(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),m(this,"trigger",(t,...n)=>{const r=this.events[t];o.array(r)&&r.forEach(s=>{o.function(s)&&s.apply(this,n)})}),m(this,"on",(t,n)=>(o.array(this.events[t])||(this.events[t]=[]),this.events[t].push(n),this)),m(this,"startSafetyTimer",(t,n)=>{this.player.debug.log(`Safety timer invoked from: ${n}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),m(this,"clearSafetyTimer",t=>{o.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=i,this.config=i.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,n)=>{this.on("loaded",t),this.on("error",n)}),this.load()}get enabled(){const{config:i}=this;return this.player.isHTML5&&this.player.isVideo&&i.enabled&&(!o.empty(i.publisherId)||o.url(i.tagUrl))}get tagUrl(){const{config:i}=this;return o.url(i.tagUrl)?i.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${F({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:i.publisherId})}`}}function Ot(e=0,i=0,t=255){return Math.min(Math.max(e,i),t)}const qt=e=>{const i=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const n={};t.split(/\r\n|\n|\r/).forEach(r=>{if(o.number(n.startTime)){if(!o.empty(r.trim())&&o.empty(n.text)){const s=r.trim().split("#xywh=");[n.text]=s,s[1]&&([n.x,n.y,n.w,n.h]=s[1].split(","))}}else{const s=r.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(n.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,n.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),n.text&&i.push(n)}),i},It=(e,i)=>{const t={};return e>i.width/i.height?(t.width=i.width,t.height=1/e*i.width):(t.height=i.height,t.width=e*i.height),t};class xt{constructor(i){m(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),m(this,"getThumbnails",()=>new Promise(t=>{const{src:n}=this.player.config.posterThumbnails;if(o.empty(n))throw new Error("Missing posterThumbnails.src config attribute");const r=()=>{this.thumbnails.sort((s,a)=>s.height-a.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(o.function(n))n(s=>{this.thumbnails=s,r()});else{const s=(o.string(n)?[n]:n).map(a=>this.getThumbnail(a));Promise.all(s).then(r)}})),m(this,"getThumbnail",t=>new Promise(n=>{be(t).then(r=>{const s={frames:qt(r),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const a=new Image;a.onload=()=>{s.height=a.naturalHeight,s.width=a.naturalWidth,this.thumbnails.push(s),n()},a.src=s.urlPrefix+s.frames[0].text})})),m(this,"startMove",t=>{if(this.loaded&&o.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var n,r;const s=this.player.elements.progress.getBoundingClientRect(),a=100/s.width*(t.pageX-s.left);this.seekTime=this.player.media.duration*(a/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=U(this.seekTime);const l=(n=this.player.config.markers)===null||n===void 0||(r=n.points)===null||r===void 0?void 0:r.find(({time:c})=>c===Math.round(this.seekTime));l&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${l.label}<br>`)}this.showImageAtCurrentTime()}}),m(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),m(this,"startScrubbing",t=>{(o.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),m(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):dt.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),m(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),m(this,"render",()=>{this.elements.thumb.container=C("div",{class:this.player.config.classNames.posterThumbnails.thumbContainer}),this.elements.thumb.imageContainer=C("div",{class:this.player.config.classNames.posterThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=C("div",{class:this.player.config.classNames.posterThumbnails.timeContainer});this.elements.thumb.time=C("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),o.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=C("div",{class:this.player.config.classNames.posterThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),m(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),m(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),n=t>=0;let r=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach((s,a)=>{this.loadedImages.includes(s.frames[t].text)&&(r=a)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(r)))}),m(this,"loadImage",(t=0)=>{const n=this.showingThumb,r=this.thumbnails[t],{urlPrefix:s}=r,a=r.frames[n],l=r.frames[n].text,c=s+l;if(this.currentImageElement&&this.currentImageElement.dataset.filename===l)this.showImage(this.currentImageElement,a,t,n,l,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=c,u.dataset.index=n,u.dataset.filename=l,this.showingThumbFilename=l,this.player.debug.log(`Loading image: ${c}`),u.onload=()=>this.showImage(u,a,t,n,l,!0),this.loadingImage=u,this.removeOldImages(u)}}),m(this,"showImage",(t,n,r,s,a,l=!0)=>{this.player.debug.log(`Showing thumb: ${a}. num: ${s}. qual: ${r}. newimg: ${l}`),this.setImageSizeAndOffset(t,n),l&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(r,t,n,a))}),m(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(n=>{if(n.tagName.toLowerCase()!=="img")return;const r=this.usingSprites?500:1e3;if(n.dataset.index!==t.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(n),this.player.debug.log(`Removing thumb: ${n.dataset.filename}`)},r)}})}),m(this,"preloadNearby",(t,n=!0)=>new Promise(r=>{setTimeout(()=>{const s=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===s){let a;a=n?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let l=!1;a.forEach(c=>{const u=c.text;if(u!==s&&!this.loadedImages.includes(u)){l=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:f}=this.thumbnails[0],v=f+u,p=new Image;p.src=v,p.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),r()}}}),l||r()}},300)})),m(this,"getHigherQuality",(t,n,r,s)=>{if(t<this.thumbnails.length-1){let a=n.naturalHeight;this.usingSprites&&(a=r.h),a<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(t+1))},300)}}),m(this,"toggleThumbContainer",(t=!1,n=!1)=>{const r=this.player.config.classNames.posterThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(r,t),!t&&n&&(this.showingThumb=null,this.showingThumbFilename=null)}),m(this,"toggleScrubbingContainer",(t=!1)=>{const n=this.player.config.classNames.posterThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(n,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),m(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),m(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const n=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${n}px`}else if(t.clientHeight<20&&t.clientWidth>20){const n=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${n}px`}}else{const n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${n}px`}this.setThumbContainerPos()}),m(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),n=this.player.elements.container.getBoundingClientRect(),{container:r}=this.elements.thumb,s=n.left-t.left+10,a=n.right-t.left-r.clientWidth-10,l=this.mousePosX-t.left-r.clientWidth/2,c=Ot(l,s,a);r.style.left=`${c}px`,r.style.setProperty("--preview-arrow-offset",l-c+"px")}),m(this,"setScrubbingContainerSize",()=>{const{width:t,height:n}=It(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${n}px`}),m(this,"setImageSizeAndOffset",(t,n)=>{if(!this.usingSprites)return;const r=this.thumbContainerHeight/n.h;t.style.height=t.naturalHeight*r+"px",t.style.width=t.naturalWidth*r+"px",t.style.left=`-${n.x*r}px`,t.style.top=`-${n.y*r}px`}),this.player=i,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.posterThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:i}=It(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return i}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(i){this.mouseDown?this.currentScrubbingImageElement=i:this.currentThumbnailImageElement=i}}const Mt={insertElements(e,i){o.string(i)?_e(e,this.media,{src:i}):o.array(i)&&i.forEach(t=>{_e(e,this.media,t)})},change(e){ot(e,"sources.length")?(K.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],pe(this.media),this.media=null,o.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:i,type:t}=e,[{provider:n=ce.html5,src:r}]=i,s=n==="html5"?t:"div",a=n==="html5"?{}:{src:r};Object.assign(this,{provider:n,type:t,supported:X.check(t,n,this.config.playsinline),media:C(s,a)}),this.elements.container.appendChild(this.media),o.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),o.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),V.addStyleHook.call(this),this.isHTML5&&Mt.insertElements.call(this,"source",i),this.config.title=e.title,_t.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&Mt.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&V.build.call(this),this.isHTML5&&this.media.load(),o.empty(e.posterThumbnails)||(Object.assign(this.config.posterThumbnails,e.posterThumbnails),this.posterThumbnails&&this.posterThumbnails.loaded&&(this.posterThumbnails.destroy(),this.posterThumbnails=null),this.config.posterThumbnails.enabled&&(this.posterThumbnails=new xt(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class gt{constructor(i,t){if(m(this,"play",()=>o.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>g(this.media.play())),this.media.play()):null),m(this,"pause",()=>this.playing&&o.function(this.media.pause)?this.media.pause():null),m(this,"togglePlay",l=>(o.boolean(l)?l:!this.playing)?this.play():this.pause()),m(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):o.function(this.media.stop)&&this.media.stop()}),m(this,"restart",()=>{this.currentTime=0}),m(this,"rewind",l=>{this.currentTime-=o.number(l)?l:this.config.seekTime}),m(this,"forward",l=>{this.currentTime+=o.number(l)?l:this.config.seekTime}),m(this,"increaseVolume",l=>{const c=this.media.muted?0:this.volume;this.volume=c+(o.number(l)?l:0)}),m(this,"decreaseVolume",l=>{this.increaseVolume(-l)}),m(this,"airplay",()=>{X.airplay&&this.media.webkitShowPlaybackTargetPicker()}),m(this,"toggleControls",l=>{if(this.supported.ui&&!this.isAudio){const c=ht(this.elements.container,this.config.classNames.hideControls),u=l===void 0?void 0:!l,f=$(this.elements.container,this.config.classNames.hideControls,u);if(f&&o.array(this.config.controls)&&this.config.controls.includes("settings")&&!o.empty(this.config.settings)&&h.toggleMenu.call(this,!1),f!==c){const v=f?"controlshidden":"controlsshown";E.call(this,this.media,v)}return!f}return!1}),m(this,"on",(l,c)=>{R.call(this,this.elements.container,l,c)}),m(this,"once",(l,c)=>{dt.call(this,this.elements.container,l,c)}),m(this,"off",(l,c)=>{De(this.elements.container,l,c)}),m(this,"destroy",(l,c=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,c?(Object.keys(this.elements).length&&(pe(this.elements.buttons.play),pe(this.elements.captions),pe(this.elements.controls),pe(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),o.function(l)&&l()):(St.call(this),K.cancelRequests.call(this),Je(this.elements.original,this.elements.container),E.call(this,this.elements.original,"destroyed",!0),o.function(l)&&l.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(V.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&o.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))}),m(this,"supports",l=>X.mime.call(this,l)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=X.touch,this.media=i,o.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||o.nodeList(this.media)||o.array(this.media))&&(this.media=this.media[0]),this.config=J({},W,gt.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(l){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ft(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",X),o.nullOrUndefined(this.media)||!o.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!X.check().api)return void this.debug.error("Setup failed: no support");const n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;const r=this.media.tagName.toLowerCase();let s=null,a=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),o.element(s)){if(a=x(s.getAttribute("src")),this.provider=function(l){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(l)?ce.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(l)?ce.vimeo:null}(a.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",a.search.length){const l=["1","true"];l.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(o.empty(this.provider)||!Object.values(ce).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=st;break;case"video":case"audio":this.type=r,this.provider=ce.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=X.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new ze(this),this.storage=new ke(this),this.media.plyr=this,o.element(this.elements.container)||(this.elements.container=C("div"),Et(this.media,this.elements.container)),V.migrateStyles.call(this),V.addStyleHook.call(this),_t.setup.call(this),this.config.debug&&R.call(this,this.elements.container,this.config.events.join(" "),l=>{this.debug.log(`event: ${l.type}`)}),this.fullscreen=new ue(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&V.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Rt(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>g(this.play())),this.lastSeekTime=0,this.config.posterThumbnails.enabled&&(this.posterThumbnails=new xt(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===ce.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===ce.youtube}get isVimeo(){return this.provider===ce.vimeo}get isVideo(){return this.type===st}get isAudio(){return this.type===pt}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(i){if(!this.duration)return;const t=o.number(i)&&i>0;this.media.currentTime=t?Math.min(i,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:i}=this.media;return o.number(i)?i:i&&i.length&&this.duration>0?i.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const i=parseFloat(this.config.duration),t=(this.media||{}).duration,n=o.number(t)&&t!==1/0?t:0;return i||n}set volume(i){let t=i;o.string(t)&&(t=Number(t)),o.number(t)||(t=this.storage.get("volume")),o.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!o.empty(i)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(i){let t=i;o.boolean(t)||(t=this.storage.get("muted")),o.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(i){let t=null;o.number(i)&&(t=i),o.number(t)||(t=this.storage.get("speed")),o.number(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:r}=this;t=Ot(t,n,r),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(i){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let r=[!o.empty(i)&&Number(i),this.storage.get("quality"),t.selected,t.default].find(o.number),s=!0;if(!n.includes(r)){const a=b(n,r);this.debug.warn(`Unsupported quality option: ${r}, using ${a} instead`),r=a,s=!1}t.selected=r,this.media.quality=r,s&&this.storage.set({quality:r})}get quality(){return this.media.quality}set loop(i){const t=o.boolean(i)?i:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(i){Mt.change.call(this,i)}get source(){return this.media.currentSrc}get download(){const{download:i}=this.config.urls;return o.url(i)?i:this.source}set download(i){o.url(i)&&(this.config.urls.download=i,h.setDownloadUrl.call(this))}set poster(i){this.isVideo?V.setPoster.call(this,i,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const i=A(L.call(this));return o.array(i)?i.join(":"):i}set ratio(i){this.isVideo?o.string(i)&&M(i)?(this.config.ratio=A(i),Y.call(this)):this.debug.error(`Invalid aspect ratio specified (${i})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(i){this.config.autoplay=o.boolean(i)?i:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(i){S.toggle.call(this,i,!1)}set currentTrack(i){S.set.call(this,i,!1),S.setup.call(this)}get currentTrack(){const{toggled:i,currentTrack:t}=this.captions;return i?t:-1}set language(i){S.setLanguage.call(this,i,!1)}get language(){return(S.getCurrentTrack.call(this)||{}).language}set pip(i){if(!X.pip)return;const t=o.boolean(i)?i:!this.pip;o.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?me:re),o.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return X.pip?o.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===me:null}setposterThumbnails(i){this.posterThumbnails&&this.posterThumbnails.loaded&&(this.posterThumbnails.destroy(),this.posterThumbnails=null),Object.assign(this.config.posterThumbnails,i),this.config.posterThumbnails.enabled&&(this.posterThumbnails=new xt(this))}static supported(i,t){return X.check(i,t)}static loadSprite(i,t){return Oe(i,t)}static setup(i,t={}){let n=null;return o.string(i)?n=Array.from(document.querySelectorAll(i)):o.nodeList(i)?n=Array.from(i):o.array(i)&&(n=i.filter(o.element)),o.empty(n)?null:n.map(r=>new gt(r,t))}}var jt;return gt.defaults=(jt=W,JSON.parse(JSON.stringify(jt))),gt}),typeof navigator=="object"&&function(Z,m){typeof exports=="object"&&typeof module!="undefined"?module.exports=m():typeof define=="function"&&define.amd?define("Plyr",m):(Z=typeof globalThis!="undefined"?globalThis:Z||self).Plyr=m()}(void 0,function(){(function(){if(typeof window!="undefined")try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),e.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch(t){var i=function(n,r){var s,a;return(r=r||{}).bubbles=!!r.bubbles,r.cancelable=!!r.cancelable,(s=document.createEvent("CustomEvent")).initCustomEvent(n,r.bubbles,r.cancelable,r.detail),a=s.preventDefault,s.preventDefault=function(){a.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(l){this.defaultPrevented=!0}},s};i.prototype=window.Event.prototype,window.CustomEvent=i}})();var Z=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function m(e,i,t){return(i=function(n){var r=function(s,a){if(typeof s!="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var c=l.call(s,a);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}(n,"string");return typeof r=="symbol"?r:String(r)}(i))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function D(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function he(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function fe(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?he(Object(t),!0).forEach(function(n){je(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}(function(e){var i=function(){try{return!!Symbol.iterator}catch(a){return!1}}(),t=function(a){var l={next:function(){var c=a.shift();return{done:c===void 0,value:c}}};return i&&(l[Symbol.iterator]=function(){return l}),l},n=function(a){return encodeURIComponent(a).replace(/%20/g,"+")},r=function(a){return decodeURIComponent(String(a).replace(/\+/g," "))};(function(){try{var a=e.URLSearchParams;return new a("?a=1").toString()==="a=1"&&typeof a.prototype.set=="function"&&typeof a.prototype.entries=="function"}catch(l){return!1}})()||function(){var a=function(c){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var u=typeof c;if(u!=="undefined")if(u==="string")c!==""&&this._fromString(c);else if(c instanceof a){var f=this;c.forEach(function(I,O){f.append(O,I)})}else{if(c===null||u!=="object")throw new TypeError("Unsupported input's type for URLSearchParams");if(Object.prototype.toString.call(c)==="[object Array]")for(var v=0;v<c.length;v++){var p=c[v];if(Object.prototype.toString.call(p)!=="[object Array]"&&p.length===2)throw new TypeError("Expected [string, any] as entry at index "+v+" of URLSearchParams's input");this.append(p[0],p[1])}else for(var P in c)c.hasOwnProperty(P)&&this.append(P,c[P])}},l=a.prototype;l.append=function(c,u){c in this._entries?this._entries[c].push(String(u)):this._entries[c]=[String(u)]},l.delete=function(c){delete this._entries[c]},l.get=function(c){return c in this._entries?this._entries[c][0]:null},l.getAll=function(c){return c in this._entries?this._entries[c].slice(0):[]},l.has=function(c){return c in this._entries},l.set=function(c,u){this._entries[c]=[String(u)]},l.forEach=function(c,u){var f;for(var v in this._entries)if(this._entries.hasOwnProperty(v)){f=this._entries[v];for(var p=0;p<f.length;p++)c.call(u,f[p],v,this)}},l.keys=function(){var c=[];return this.forEach(function(u,f){c.push(f)}),t(c)},l.values=function(){var c=[];return this.forEach(function(u){c.push(u)}),t(c)},l.entries=function(){var c=[];return this.forEach(function(u,f){c.push([f,u])}),t(c)},i&&(l[Symbol.iterator]=l.entries),l.toString=function(){var c=[];return this.forEach(function(u,f){c.push(n(f)+"="+n(u))}),c.join("&")},e.URLSearchParams=a}();var s=e.URLSearchParams.prototype;typeof s.sort!="function"&&(s.sort=function(){var a=this,l=[];this.forEach(function(u,f){l.push([f,u]),a._entries||a.delete(f)}),l.sort(function(u,f){return u[0]<f[0]?-1:u[0]>f[0]?1:0}),a._entries&&(a._entries={});for(var c=0;c<l.length;c++)this.append(l[c][0],l[c][1])}),typeof s._fromString!="function"&&Object.defineProperty(s,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(a){if(this._entries)this._entries={};else{var l=[];this.forEach(function(v,p){l.push(p)});for(var c=0;c<l.length;c++)this.delete(l[c])}var u,f=(a=a.replace(/^\?/,"")).split("&");for(c=0;c<f.length;c++)u=f[c].split("="),this.append(r(u[0]),u.length>1?r(u[1]):"")}})})(Z!==void 0?Z:typeof window!="undefined"?window:typeof self!="undefined"?self:Z),function(e){if(function(){try{var t=new e.URL("b","http://a");return t.pathname="c d",t.href==="http://a/c%20d"&&t.searchParams}catch(n){return!1}}()||function(){var t=e.URL,n=function(s,a){typeof s!="string"&&(s=String(s)),a&&typeof a!="string"&&(a=String(a));var l,c=document;if(a&&(e.location===void 0||a!==e.location.href)){a=a.toLowerCase(),(l=(c=document.implementation.createHTMLDocument("")).createElement("base")).href=a,c.head.appendChild(l);try{if(l.href.indexOf(a)!==0)throw new Error(l.href)}catch(z){throw new Error("URL unable to set base "+a+" due to "+z)}}var u=c.createElement("a");u.href=s,l&&(c.body.appendChild(u),u.href=u.href);var f=c.createElement("input");if(f.type="url",f.value=s,u.protocol===":"||!/:/.test(u.href)||!f.checkValidity()&&!a)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:u});var v=new e.URLSearchParams(this.search),p=!0,P=!0,I=this;["append","delete","set"].forEach(function(z){var _=v[z];v[z]=function(){_.apply(v,arguments),p&&(P=!1,I.search=v.toString(),P=!0)}}),Object.defineProperty(this,"searchParams",{value:v,enumerable:!0});var O=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==O&&(O=this.search,P&&(p=!1,this.searchParams._fromString(this.search),p=!0))}})},r=n.prototype;["hash","host","hostname","port","protocol"].forEach(function(s){(function(a){Object.defineProperty(r,a,{get:function(){return this._anchorElement[a]},set:function(l){this._anchorElement[a]=l},enumerable:!0})})(s)}),Object.defineProperty(r,"search",{get:function(){return this._anchorElement.search},set:function(s){this._anchorElement.search=s,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(r,{toString:{get:function(){var s=this;return function(){return s.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(s){this._anchorElement.href=s,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(s){this._anchorElement.pathname=s},enumerable:!0},origin:{get:function(){var s={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],a=this._anchorElement.port!=s&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(a?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(s){},enumerable:!0},username:{get:function(){return""},set:function(s){},enumerable:!0}}),n.createObjectURL=function(s){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(s){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),e.location!==void 0&&!("origin"in e.location)){var i=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:i,enumerable:!0})}catch(t){setInterval(function(){e.location.origin=i()},100)}}}(Z!==void 0?Z:typeof window!="undefined"?window:typeof self!="undefined"?self:Z);var Fe={addCSS:!0,thumbWidth:15,watch:!0},Le=function(e){return e!=null?e.constructor:null},He=function(e,i){return!!(e&&i&&e instanceof i)},Ne=function(e){return e==null},$e=function(e){return Le(e)===Object},Ee=function(e){return Le(e)===String},Se=function(e){return Array.isArray(e)},ut=function(e){return He(e,NodeList)},ie={nullOrUndefined:Ne,object:$e,number:function(e){return Le(e)===Number&&!Number.isNaN(e)},string:Ee,boolean:function(e){return Le(e)===Boolean},function:function(e){return Le(e)===Function},array:Se,nodeList:ut,element:function(e){return He(e,Element)},event:function(e){return He(e,Event)},empty:function(e){return Ne(e)||(Ee(e)||Se(e)||ut(e))&&!e.length||$e(e)&&!Object.keys(e).length}};function vt(e,i){if(1>i){var t=function(n){var r="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return r?Math.max(0,(r[1]?r[1].length:0)-(r[2]?+r[2]:0)):0}(i);return parseFloat(e.toFixed(t))}return Math.round(e/i)*i}var Nt=function(){function e(i,t){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),ie.element(i)?this.element=i:ie.string(i)&&(this.element=document.querySelector(i)),ie.element(this.element)&&ie.empty(this.element.rangeTouch)&&(this.config=fe({},Fe,{},t),this.init())}return function(i,t,n){t&&D(i.prototype,t),n&&D(i,n)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(i){var t=this,n=i?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(r){t.element[n](r,function(s){return t.set(s)},!1)})}},{key:"get",value:function(i){if(!e.enabled||!ie.event(i))return null;var t,n=i.target,r=i.changedTouches[0],s=parseFloat(n.getAttribute("min"))||0,a=parseFloat(n.getAttribute("max"))||100,l=parseFloat(n.getAttribute("step"))||1,c=n.getBoundingClientRect(),u=100/c.width*(this.config.thumbWidth/2)/100;return 0>(t=100/c.width*(r.clientX-c.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*u:50<t&&(t+=2*(t-50)*u),s+vt(t/100*(a-s),l)}},{key:"set",value:function(i){e.enabled&&ie.event(i)&&!i.target.disabled&&(i.preventDefault(),i.target.value=this.get(i),function(t,n){if(t&&n){var r=new Event(n,{bubbles:!0});t.dispatchEvent(r)}}(i.target,i.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(i){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=null;if(ie.empty(i)||ie.string(i)?n=Array.from(document.querySelectorAll(ie.string(i)?i:'input[type="range"]')):ie.element(i)?n=[i]:ie.nodeList(i)?n=Array.from(i):ie.array(i)&&(n=i.filter(ie.element)),ie.empty(n))return null;var r=fe({},Fe,{},t);if(ie.string(i)&&r.watch){var s=new MutationObserver(function(a){Array.from(a).forEach(function(l){Array.from(l.addedNodes).forEach(function(c){ie.element(c)&&function(u,f){return function(){return Array.from(document.querySelectorAll(f)).includes(this)}.call(u,f)}(c,i)&&new e(c,r)})})});s.observe(document.body,{childList:!0,subtree:!0})}return n.map(function(a){return new e(a,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const Ye=e=>e!=null?e.constructor:null,we=(e,i)=>!!(e&&i&&e instanceof i),Ue=e=>e==null,wt=e=>Ye(e)===Object,at=e=>Ye(e)===String,kt=e=>typeof e=="function",Pt=e=>Array.isArray(e),Ct=e=>we(e,NodeList),Tt=e=>Ue(e)||(at(e)||Pt(e)||Ct(e))&&!e.length||wt(e)&&!Object.keys(e).length;var o={nullOrUndefined:Ue,object:wt,number:e=>Ye(e)===Number&&!Number.isNaN(e),string:at,boolean:e=>Ye(e)===Boolean,function:kt,array:Pt,weakMap:e=>we(e,WeakMap),nodeList:Ct,element:e=>e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object",textNode:e=>Ye(e)===Text,event:e=>we(e,Event),keyboardEvent:e=>we(e,KeyboardEvent),cue:e=>we(e,window.TextTrackCue)||we(e,window.VTTCue),track:e=>we(e,TextTrack)||!Ue(e)&&at(e.kind),promise:e=>we(e,Promise)&&kt(e.then),url:e=>{if(we(e,window.URL))return!0;if(!at(e))return!1;let i=e;e.startsWith("http://")&&e.startsWith("https://")||(i=`http://${e}`);try{return!Tt(new URL(i).hostname)}catch(t){return!1}},empty:Tt};const yt=(()=>{const e=document.createElement("span"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(i).find(n=>e.style[n]!==void 0);return!!o.string(t)&&i[t]})();function Qe(e,i){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(t){}},i)}var te={isIE:!!window.document.documentMode,isEdge:/Edge/g.test(navigator.userAgent),isWebKit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function ot(e,i){return i.split(".").reduce((t,n)=>t&&t[n],e)}function J(e={},...i){if(!i.length)return e;const t=i.shift();return o.object(t)?(Object.keys(t).forEach(n=>{o.object(t[n])?(Object.keys(e).includes(n)||Object.assign(e,{[n]:{}}),J(e[n],t[n])):Object.assign(e,{[n]:t[n]})}),J(e,...i)):e}function Et(e,i){const t=e.length?e:[e];Array.from(t).reverse().forEach((n,r)=>{const s=r>0?i.cloneNode(!0):i,a=n.parentNode,l=n.nextSibling;s.appendChild(n),l?a.insertBefore(s,l):a.appendChild(s)})}function it(e,i){o.element(e)&&!o.empty(i)&&Object.entries(i).filter(([,t])=>!o.nullOrUndefined(t)).forEach(([t,n])=>e.setAttribute(t,n))}function C(e,i,t){const n=document.createElement(e);return o.object(i)&&it(n,i),o.string(t)&&(n.innerText=t),n}function _e(e,i,t,n){o.element(i)&&i.appendChild(C(e,t,n))}function pe(e){o.nodeList(e)||o.array(e)?Array.from(e).forEach(pe):o.element(e)&&o.element(e.parentNode)&&e.parentNode.removeChild(e)}function Be(e){if(!o.element(e))return;let{length:i}=e.childNodes;for(;i>0;)e.removeChild(e.lastChild),i-=1}function Je(e,i){return o.element(i)&&o.element(i.parentNode)&&o.element(e)?(i.parentNode.replaceChild(e,i),e):null}function ge(e,i){if(!o.string(e)||o.empty(e))return{};const t={},n=J({},i);return e.split(",").forEach(r=>{const s=r.trim(),a=s.replace(".",""),l=s.replace(/[[\]]/g,"").split("="),[c]=l,u=l.length>1?l[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":o.string(n.class)?t.class=`${n.class} ${a}`:t.class=a;break;case"#":t.id=s.replace("#","");break;case"[":t[c]=u}}),J(n,t)}function Ae(e,i){if(!o.element(e))return;let t=i;o.boolean(t)||(t=!e.hidden),e.hidden=t}function $(e,i,t){if(o.nodeList(e))return Array.from(e).map(n=>$(n,i,t));if(o.element(e)){let n="toggle";return t!==void 0&&(n=t?"add":"remove"),e.classList[n](i),e.classList.contains(i)}return!1}function ht(e,i){return o.element(e)&&e.classList.contains(i)}function Re(e,i){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(i)).includes(this)}).call(e,i)}function Xe(e){return this.elements.container.querySelectorAll(e)}function ee(e){return this.elements.container.querySelector(e)}function bt(e=null,i=!1){o.element(e)&&e.focus({preventScroll:!0,focusVisible:i})}const Ge={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},X={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,i){const t=X[e]||i!=="html5";return{api:t,ui:t&&X.rangeInput}},pip:!(te.isIPhone||!o.function(C("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||C("video").disablePictureInPicture)),airplay:o.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(o.empty(e))return!1;const[i]=e.split("/");let t=e;if(!this.isHTML5||i!==this.type)return!1;Object.keys(Ge).includes(t)&&(t+=`; codecs="${Ge[e]}"`);try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch(n){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range",e.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:yt!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},lt=(()=>{let e=!1;try{const i=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(i){}return e})();function nt(e,i,t,n=!1,r=!0,s=!1){if(!e||!("addEventListener"in e)||o.empty(i)||!o.function(t))return;const a=i.split(" ");let l=s;lt&&(l={passive:r,capture:s}),a.forEach(c=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:e,type:c,callback:t,options:l}),e[n?"addEventListener":"removeEventListener"](c,t,l)})}function R(e,i="",t,n=!0,r=!1){nt.call(this,e,i,t,!0,n,r)}function De(e,i="",t,n=!0,r=!1){nt.call(this,e,i,t,!1,n,r)}function dt(e,i="",t,n=!0,r=!1){const s=(...a)=>{De(e,i,s,n,r),t.apply(this,a)};nt.call(this,e,i,s,!0,n,r)}function E(e,i="",t=!1,n={}){if(!o.element(e)||o.empty(i))return;const r=new CustomEvent(i,{bubbles:t,detail:Lt(Te({},n),{plyr:this})});e.dispatchEvent(r)}function St(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:i,type:t,callback:n,options:r}=e;i.removeEventListener(t,n,r)}),this.eventListeners=[])}function y(){return new Promise(e=>this.ready?setTimeout(e,0):R.call(this,this.elements.container,"ready",e)).then(()=>{})}function g(e){o.promise(e)&&e.then(null,()=>{})}function d(e){return o.array(e)?e.filter((i,t)=>e.indexOf(i)===t):e}function b(e,i){return o.array(e)&&e.length?e.reduce((t,n)=>Math.abs(n-i)<Math.abs(t-i)?n:t):null}function T(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const k=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[i,t])=>Lt(Te({},e),{[i/t]:[i,t]}),{});function M(e){return o.array(e)||o.string(e)&&e.includes(":")?(o.array(e)?e:e.split(":")).map(Number).every(o.number):!1}function A(e){if(!o.array(e)||!e.every(o.number))return null;const[i,t]=e,n=(s,a)=>a===0?s:n(a,s%a),r=n(i,t);return[i/r,t/r]}function L(e){const i=n=>M(n)?n.split(":").map(Number):null;let t=i(e);if(t===null&&(t=i(this.config.ratio)),t===null&&!o.empty(this.embed)&&o.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:n,videoHeight:r}=this.media;t=[n,r]}return A(t)}function Y(e){if(!this.isVideo)return{};const{wrapper:i}=this.elements,t=L.call(this,e);if(!o.array(t))return{};const[n,r]=A(t),s=100/n*r;if(T(`aspect-ratio: ${n}/${r}`)?i.style.aspectRatio=`${n}/${r}`:i.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),l=(a-s)/(a/50);this.fullscreen.active?i.style.paddingBottom=null:this.media.style.transform=`translateY(-${l}%)`}else this.isHTML5&&i.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:t}}function se(e,i,t=.05){const n=e/i,r=b(Object.keys(k),n);return Math.abs(r-n)<=t?k[r]:[e,i]}const K={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{const i=e.getAttribute("type");return!!o.empty(i)||X.mime.call(this,i)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:K.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,o.empty(this.config.ratio)||Y.call(e),Object.defineProperty(e.media,"quality",{get(){const i=K.getSources.call(e).find(t=>t.getAttribute("src")===e.source);return i&&Number(i.getAttribute("size"))},set(i){if(e.quality!==i){if(e.config.quality.forced&&o.function(e.config.quality.onChange))e.config.quality.onChange(i);else{const t=K.getSources.call(e).find(c=>Number(c.getAttribute("size"))===i);if(!t)return;const{currentTime:n,paused:r,preload:s,readyState:a,playbackRate:l}=e.media;e.media.src=t.getAttribute("src"),(s!=="none"||a)&&(e.once("loadedmetadata",()=>{e.speed=l,e.currentTime=n,r||g(e.play())}),e.media.load())}E.call(e,e.media,"qualitychange",!1,{quality:i})}}})},cancelRequests(){this.isHTML5&&(pe(K.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function H(e,...i){return o.empty(e)?e:e.toString().replace(/{(\d+)}/g,(t,n)=>i[n].toString())}const B=(e="",i="",t="")=>e.replace(new RegExp(i.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),de=(e="")=>e.toString().replace(/\w\S*/g,i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase());function ne(e=""){let i=e.toString();return i=function(t=""){let n=t.toString();return n=B(n,"-"," "),n=B(n,"_"," "),n=de(n),B(n," ","")}(i),i.charAt(0).toLowerCase()+i.slice(1)}function ye(e){const i=document.createElement("div");return i.appendChild(e),i.innerHTML}const xe={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Q={get(e="",i={}){if(o.empty(e)||o.empty(i))return"";let t=ot(i.i18n,e);if(o.empty(t))return Object.keys(xe).includes(e)?xe[e]:"";const n={"{seektime}":i.seekTime,"{title}":i.title};return Object.entries(n).forEach(([r,s])=>{t=B(t,r,s)}),t}};class ke{constructor(i){m(this,"get",t=>{if(!ke.supported||!this.enabled)return null;const n=window.localStorage.getItem(this.key);if(o.empty(n))return null;const r=JSON.parse(n);return o.string(t)&&t.length?r[t]:r}),m(this,"set",t=>{if(!ke.supported||!this.enabled||!o.object(t))return;let n=this.get();o.empty(n)&&(n={}),J(n,t);try{window.localStorage.setItem(this.key,JSON.stringify(n))}catch(r){}}),this.enabled=i.config.storage.enabled,this.key=i.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const i="___test";return window.localStorage.setItem(i,i),window.localStorage.removeItem(i),!0}catch(i){return!1}}}function be(e,i="text"){return new Promise((t,n)=>{try{const r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",()=>{if(i==="text")try{t(JSON.parse(r.responseText))}catch(s){t(r.responseText)}else t(r.response)}),r.addEventListener("error",()=>{throw new Error(r.status)}),r.open("GET",e,!0),r.responseType=i,r.send()}catch(r){n(r)}})}function Oe(e,i){if(!o.string(e))return;const t="cache",n=o.string(i);let r=!1;const s=()=>document.getElementById(i)!==null,a=(l,c)=>{l.innerHTML=c,n&&s()||document.body.insertAdjacentElement("afterbegin",l)};if(!n||!s()){const l=ke.supported,c=document.createElement("div");if(c.setAttribute("hidden",""),n&&c.setAttribute("id",i),l){const u=window.localStorage.getItem(`${t}-${i}`);if(r=u!==null,r){const f=JSON.parse(u);a(c,f.content)}}be(e).then(u=>{if(!o.empty(u)){if(l)try{window.localStorage.setItem(`${t}-${i}`,JSON.stringify({content:u}))}catch(f){}a(c,u)}}).catch(()=>{})}}const We=e=>Math.trunc(e/60/60%60,10),q=e=>Math.trunc(e/60%60,10),N=e=>Math.trunc(e%60,10);function U(e=0,i=!1,t=!1){if(!o.number(e))return U(void 0,i,t);const n=l=>`0${l}`.slice(-2);let r=We(e);const s=q(e),a=N(e);return r=i||r>0?`${r}:`:"",`${t&&e>0?"-":""}${r}${n(s)}:${n(a)}`}const h={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),i=window.location.host?window.location.host:window.top.location.host,t=e.host!==i||te.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=ee.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Xe.call(this,this.config.selectors.buttons.play),pause:ee.call(this,this.config.selectors.buttons.pause),restart:ee.call(this,this.config.selectors.buttons.restart),rewind:ee.call(this,this.config.selectors.buttons.rewind),fastForward:ee.call(this,this.config.selectors.buttons.fastForward),mute:ee.call(this,this.config.selectors.buttons.mute),pip:ee.call(this,this.config.selectors.buttons.pip),airplay:ee.call(this,this.config.selectors.buttons.airplay),settings:ee.call(this,this.config.selectors.buttons.settings),captions:ee.call(this,this.config.selectors.buttons.captions),fullscreen:ee.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ee.call(this,this.config.selectors.progress),this.elements.inputs={seek:ee.call(this,this.config.selectors.inputs.seek),volume:ee.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ee.call(this,this.config.selectors.display.buffer),currentTime:ee.call(this,this.config.selectors.display.currentTime),duration:ee.call(this,this.config.selectors.display.duration)},o.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,i){const t="http://www.w3.org/2000/svg",n=h.getIconUrl.call(this),r=`${n.cors?"":n.url}#${this.config.iconPrefix}`,s=document.createElementNS(t,"svg");it(s,J(i,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(t,"use"),l=`${r}-${e}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",l),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l),s.appendChild(a),s},createLabel(e,i={}){const t=Q.get(e,this.config);return C("span",Lt(Te({},i),{class:[i.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),t)},createBadge(e){if(o.empty(e))return null;const i=C("span",{class:this.config.classNames.menu.value});return i.appendChild(C("span",{class:this.config.classNames.menu.badge},e)),i},createButton(e,i){const t=J({},i);let n=ne(e);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(a=>{Object.keys(t).includes(a)&&(r[a]=t[a],delete t[a])}),r.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(a=>a===this.config.classNames.control)||J(t,{class:`${t.class} ${this.config.classNames.control}`}):t.class=this.config.classNames.control,e){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":t.class+=` ${this.config.classNames.control}--overlaid`,n="play",r.label="play",r.icon="play";break;default:o.empty(r.label)&&(r.label=n),o.empty(r.icon)&&(r.icon=e)}const s=C(r.element);return r.toggle?(s.appendChild(h.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild(h.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild(h.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild(h.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild(h.createIcon.call(this,r.icon)),s.appendChild(h.createLabel.call(this,r.label))),J(t,ge(this.config.selectors.buttons[n],t)),it(s,t),n==="play"?(o.array(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(s)):this.elements.buttons[n]=s,s},createRange(e,i){const t=C("input",J(ge(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Q.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},i));return this.elements.inputs[e]=t,h.updateRangeFill.call(this,t),Nt.setup(t),t},createProgress(e,i){const t=C("progress",J(ge(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},i));if(e!=="volume"){t.appendChild(C("span",null,"0"));const n={played:"played",buffer:"buffered"}[e],r=n?Q.get(n,this.config):"";t.innerText=`% ${r.toLowerCase()}`}return this.elements.display[e]=t,t},createTime(e,i){const t=ge(this.config.selectors.display[e],i),n=C("div",J(t,{class:`${t.class?t.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Q.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts(e,i){R.call(this,e,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const n=Re(e,'[role="menuitemradio"]');if(!n&&[" ","ArrowRight"].includes(t.key))h.showMenuPanel.call(this,i,!0);else{let r;t.key!==" "&&(t.key==="ArrowDown"||n&&t.key==="ArrowRight"?(r=e.nextElementSibling,o.element(r)||(r=e.parentNode.firstElementChild)):(r=e.previousElementSibling,o.element(r)||(r=e.parentNode.lastElementChild)),bt.call(this,r,!0))}},!1),R.call(this,e,"keyup",t=>{t.key==="Return"&&h.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:i,type:t,title:n,badge:r=null,checked:s=!1}){const a=ge(this.config.selectors.inputs[t]),l=C("button",J(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":s,value:e})),c=C("span");c.innerHTML=n,o.element(r)&&c.appendChild(r),l.appendChild(c),Object.defineProperty(l,"checked",{enumerable:!0,get:()=>l.getAttribute("aria-checked")==="true",set(u){u&&Array.from(l.parentNode.children).filter(f=>Re(f,'[role="menuitemradio"]')).forEach(f=>f.setAttribute("aria-checked","false")),l.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(l,"click keyup",u=>{if(!o.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),l.checked=!0,t){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}h.showMenuPanel.call(this,"home",o.keyboardEvent(u))}},t,!1),h.bindMenuItemShortcuts.call(this,l,t),i.appendChild(l)},formatTime(e=0,i=!1){return o.number(e)?U(e,We(this.duration)>0,i):e},updateTimeDisplay(e=null,i=0,t=!1){o.element(e)&&o.number(i)&&(e.innerText=h.formatTime(i,t))},updateVolume(){this.supported.ui&&(o.element(this.elements.inputs.volume)&&h.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),o.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(e,i=0){o.element(e)&&(e.value=i,h.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!o.event(e))return;let i=0;const t=(s,a)=>{const l=o.number(a)?a:0,c=o.element(s)?s:this.elements.display.buffer;if(o.element(c)){c.value=l;const u=c.getElementsByTagName("span")[0];o.element(u)&&(u.childNodes[0].nodeValue=l)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=this.currentTime,r=this.duration,i=n===0||r===0||Number.isNaN(n)||Number.isNaN(r)?0:(n/r*100).toFixed(2),e.type==="timeupdate"&&h.setRange.call(this,this.elements.inputs.seek,i);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}var n,r},updateRangeFill(e){const i=o.event(e)?e.target:e;if(o.element(i)&&i.getAttribute("type")==="range"){if(Re(i,this.config.selectors.inputs.seek)){i.setAttribute("aria-valuenow",this.currentTime);const t=h.formatTime(this.currentTime),n=h.formatTime(this.duration),r=Q.get("seekLabel",this.config);i.setAttribute("aria-valuetext",r.replace("{currentTime}",t).replace("{duration}",n))}else if(Re(i,this.config.selectors.inputs.volume)){const t=100*i.value;i.setAttribute("aria-valuenow",t),i.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else i.setAttribute("aria-valuenow",i.value);(te.isWebKit||te.isIPadOS)&&i.style.setProperty("--value",i.value/i.max*100+"%")}},updateSeekTooltip(e){var i,t;if(!this.config.tooltips.seek||!o.element(this.elements.inputs.seek)||!o.element(this.elements.display.seekTooltip)||this.duration===0)return;const n=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,s=f=>$(n,r,f);if(this.touch)return void s(!1);let a=0;const l=this.elements.progress.getBoundingClientRect();if(o.event(e))a=100/l.width*(e.pageX-l.left);else{if(!ht(n,r))return;a=parseFloat(n.style.left,10)}a<0?a=0:a>100&&(a=100);const c=this.duration/100*a;n.innerText=h.formatTime(c);const u=(i=this.config.markers)===null||i===void 0||(t=i.points)===null||t===void 0?void 0:t.find(({time:f})=>f===Math.round(c));u&&n.insertAdjacentHTML("afterbegin",`${u.label}<br>`),n.style.left=`${a}%`,o.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&s(e.type==="mouseenter")},timeUpdate(e){const i=!o.element(this.elements.display.duration)&&this.config.invertTime;h.updateTimeDisplay.call(this,this.elements.display.currentTime,i?this.duration-this.currentTime:this.currentTime,i),e&&e.type==="timeupdate"&&this.media.seeking||h.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=Dt(2,32))return Ae(this.elements.display.currentTime,!0),void Ae(this.elements.progress,!0);o.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=o.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&h.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&h.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&h.setMarkers.call(this),h.updateSeekTooltip.call(this)},toggleMenuButton(e,i){Ae(this.elements.settings.buttons[e],!i)},updateSetting(e,i,t){const n=this.elements.settings.panels[e];let r=null,s=i;if(e==="captions")r=this.currentTrack;else{if(r=o.empty(t)?this[e]:t,o.empty(r)&&(r=this.config[e].default),!o.empty(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${e}`);if(!this.config[e].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${e}`)}if(o.element(s)||(s=n&&n.querySelector('[role="menu"]')),!o.element(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=h.getLabel.call(this,e,r);const a=s&&s.querySelector(`[value="${r}"]`);o.element(a)&&(a.checked=!0)},getLabel(e,i){switch(e){case"speed":return i===1?Q.get("normal",this.config):`${i}&times;`;case"quality":if(o.number(i)){const t=Q.get(`qualityLabel.${i}`,this.config);return t.length?t:`${i}p`}return de(i);case"captions":return S.getLabel.call(this);default:return null}},setQualityMenu(e){if(!o.element(this.elements.settings.panels.quality))return;const i="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');o.array(e)&&(this.options.quality=d(e).filter(s=>this.config.quality.options.includes(s)));const n=!o.empty(this.options.quality)&&this.options.quality.length>1;if(h.toggleMenuButton.call(this,i,n),Be(t),h.checkMenu.call(this),!n)return;const r=s=>{const a=Q.get(`qualityBadge.${s}`,this.config);return a.length?h.createBadge.call(this,a):null};this.options.quality.sort((s,a)=>{const l=this.config.quality.options;return l.indexOf(s)>l.indexOf(a)?1:-1}).forEach(s=>{h.createMenuItem.call(this,{value:s,list:t,type:i,title:h.getLabel.call(this,"quality",s),badge:r(s)})}),h.updateSetting.call(this,i,t)},setCaptionsMenu(){if(!o.element(this.elements.settings.panels.captions))return;const e="captions",i=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=S.getTracks.call(this),n=!!t.length;if(h.toggleMenuButton.call(this,e,n),Be(i),h.checkMenu.call(this),!n)return;const r=t.map((s,a)=>({value:a,checked:this.captions.toggled&&this.currentTrack===a,title:S.getLabel.call(this,s),badge:s.language&&h.createBadge.call(this,s.language.toUpperCase()),list:i,type:"language"}));r.unshift({value:-1,checked:!this.captions.toggled,title:Q.get("disabled",this.config),list:i,type:"language"}),r.forEach(h.createMenuItem.bind(this)),h.updateSetting.call(this,e,i)},setSpeedMenu(){if(!o.element(this.elements.settings.panels.speed))return;const e="speed",i=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(n=>n>=this.minimumSpeed&&n<=this.maximumSpeed);const t=!o.empty(this.options.speed)&&this.options.speed.length>1;h.toggleMenuButton.call(this,e,t),Be(i),h.checkMenu.call(this),t&&(this.options.speed.forEach(n=>{h.createMenuItem.call(this,{value:n,list:i,type:e,title:h.getLabel.call(this,"speed",n)})}),h.updateSetting.call(this,e,i))},checkMenu(){const{buttons:e}=this.elements.settings,i=!o.empty(e)&&Object.values(e).some(t=>!t.hidden);Ae(this.elements.settings.menu,!i)},focusFirstMenuItem(e,i=!1){if(this.elements.settings.popup.hidden)return;let t=e;o.element(t)||(t=Object.values(this.elements.settings.panels).find(r=>!r.hidden));const n=t.querySelector('[role^="menuitem"]');bt.call(this,n,i)},toggleMenu(e){const{popup:i}=this.elements.settings,t=this.elements.buttons.settings;if(!o.element(i)||!o.element(t))return;const{hidden:n}=i;let r=n;if(o.boolean(e))r=e;else if(o.keyboardEvent(e)&&e.key==="Escape")r=!1;else if(o.event(e)){const s=o.function(e.composedPath)?e.composedPath()[0]:e.target,a=i.contains(s);if(a||!a&&e.target!==t&&r)return}t.setAttribute("aria-expanded",r),Ae(i,!r),$(this.elements.container,this.config.classNames.menu.open,r),r&&o.keyboardEvent(e)?h.focusFirstMenuItem.call(this,null,!0):r||n||bt.call(this,t,o.keyboardEvent(e))},getMenuSize(e){const i=e.cloneNode(!0);i.style.position="absolute",i.style.opacity=0,i.removeAttribute("hidden"),e.parentNode.appendChild(i);const t=i.scrollWidth,n=i.scrollHeight;return pe(i),{width:t,height:n}},showMenuPanel(e="",i=!1){const t=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!o.element(t))return;const n=t.parentNode,r=Array.from(n.children).find(s=>!s.hidden);if(X.transitions&&!X.reducedMotion){n.style.width=`${r.scrollWidth}px`,n.style.height=`${r.scrollHeight}px`;const s=h.getMenuSize.call(this,t),a=l=>{l.target===n&&["width","height"].includes(l.propertyName)&&(n.style.width="",n.style.height="",De.call(this,n,yt,a))};R.call(this,n,yt,a),n.style.width=`${s.width}px`,n.style.height=`${s.height}px`}Ae(r,!0),Ae(t,!1),h.focusFirstMenuItem.call(this,t,i)},setDownloadUrl(){const e=this.elements.buttons.download;o.element(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:i,createButton:t,createProgress:n,createRange:r,createTime:s,setQualityMenu:a,setSpeedMenu:l,showMenuPanel:c}=h;this.elements.controls=null,o.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const u=C("div",ge(this.config.selectors.controls.wrapper));this.elements.controls=u;const f={class:"plyr__controls__item"};return d(o.array(this.config.controls)?this.config.controls:[]).forEach(v=>{if(v==="restart"&&u.appendChild(t.call(this,"restart",f)),v==="rewind"&&u.appendChild(t.call(this,"rewind",f)),v==="play"&&u.appendChild(t.call(this,"play",f)),v==="fast-forward"&&u.appendChild(t.call(this,"fast-forward",f)),v==="progress"){const p=C("div",{class:`${f.class} plyr__progress__container`}),P=C("div",ge(this.config.selectors.progress));if(P.appendChild(r.call(this,"seek",{id:`plyr-seek-${e.id}`})),P.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){const I=C("span",{class:this.config.classNames.tooltip},"00:00");P.appendChild(I),this.elements.display.seekTooltip=I}this.elements.progress=P,p.appendChild(this.elements.progress),u.appendChild(p)}if(v==="current-time"&&u.appendChild(s.call(this,"currentTime",f)),v==="duration"&&u.appendChild(s.call(this,"duration",f)),v==="mute"||v==="volume"){let{volume:p}=this.elements;if(o.element(p)&&u.contains(p)||(p=C("div",J({},f,{class:`${f.class} plyr__volume`.trim()})),this.elements.volume=p,u.appendChild(p)),v==="mute"&&p.appendChild(t.call(this,"mute")),v==="volume"&&!te.isIos&&!te.isIPadOS){const P={max:1,step:.05,value:this.config.volume};p.appendChild(r.call(this,"volume",J(P,{id:`plyr-volume-${e.id}`})))}}if(v==="captions"&&u.appendChild(t.call(this,"captions",f)),v==="settings"&&!o.empty(this.config.settings)){const p=C("div",J({},f,{class:`${f.class} plyr__menu`.trim(),hidden:""}));p.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const P=C("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),I=C("div"),O=C("div",{id:`plyr-settings-${e.id}-home`}),z=C("div",{role:"menu"});O.appendChild(z),I.appendChild(O),this.elements.settings.panels.home=O,this.config.settings.forEach(_=>{const G=C("button",J(ge(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));i.call(this,G,_),R.call(this,G,"click",()=>{c.call(this,_,!1)});const oe=C("span",null,Q.get(_,this.config)),w=C("span",{class:this.config.classNames.menu.value});w.innerHTML=e[_],oe.appendChild(w),G.appendChild(oe),z.appendChild(G);const j=C("div",{id:`plyr-settings-${e.id}-${_}`,hidden:""}),le=C("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});le.appendChild(C("span",{"aria-hidden":!0},Q.get(_,this.config))),le.appendChild(C("span",{class:this.config.classNames.hidden},Q.get("menuBack",this.config))),R.call(this,j,"keydown",Pe=>{Pe.key==="ArrowLeft"&&(Pe.preventDefault(),Pe.stopPropagation(),c.call(this,"home",!0))},!1),R.call(this,le,"click",()=>{c.call(this,"home",!1)}),j.appendChild(le),j.appendChild(C("div",{role:"menu"})),I.appendChild(j),this.elements.settings.buttons[_]=G,this.elements.settings.panels[_]=j}),P.appendChild(I),p.appendChild(P),u.appendChild(p),this.elements.settings.popup=P,this.elements.settings.menu=p}if(v==="pip"&&X.pip&&u.appendChild(t.call(this,"pip",f)),v==="airplay"&&X.airplay&&u.appendChild(t.call(this,"airplay",f)),v==="download"){const p=J({},f,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(p.download="");const{download:P}=this.config.urls;!o.url(P)&&this.isEmbed&&J(p,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(t.call(this,"download",p))}v==="fullscreen"&&u.appendChild(t.call(this,"fullscreen",f))}),this.isHTML5&&a.call(this,K.getQualityOptions.call(this)),l.call(this),u},inject(){if(this.config.loadSprite){const r=h.getIconUrl.call(this);r.cors&&Oe(r.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const i={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;o.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),o.element(this.config.controls)||o.string(this.config.controls)?e=this.config.controls:(e=h.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:S.getLabel.call(this)}),t=!1);let n;if(t&&o.string(this.config.controls)&&(e=(r=>{let s=r;return Object.entries(i).forEach(([a,l])=>{s=B(s,`{${a}}`,l)}),s})(e)),o.string(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),o.element(n)||(n=this.elements.container),n[o.element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),o.element(this.elements.controls)||h.findElements.call(this),!o.empty(this.elements.buttons)){const r=s=>{const a=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>ht(s,a),set(l=!1){$(s,a,l),s.setAttribute("aria-pressed",l?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{o.array(s)||o.nodeList(s)?Array.from(s).filter(Boolean).forEach(r):r(s)})}if(te.isEdge&&Qe(n),this.config.tooltips.controls){const{classNames:r,selectors:s}=this.config,a=`${s.controls.wrapper} ${s.labels} .${r.hidden}`,l=Xe.call(this,a);Array.from(l).forEach(c=>{$(c,this.config.classNames.hidden,!1),$(c,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers(){var e,i;if(!this.duration||this.elements.markers)return;const t=(e=this.config.markers)===null||e===void 0||(i=e.points)===null||i===void 0?void 0:i.filter(({time:c})=>c>0&&c<this.duration);if(t==null||!t.length)return;const n=document.createDocumentFragment(),r=document.createDocumentFragment();let s=null;const a=`${this.config.classNames.tooltip}--visible`,l=c=>$(s,a,c);t.forEach(c=>{const u=C("span",{class:this.config.classNames.marker},""),f=c.time/this.duration*100+"%";s&&(u.addEventListener("mouseenter",()=>{c.label||(s.style.left=f,s.innerHTML=c.label,l(!0))}),u.addEventListener("mouseleave",()=>{l(!1)})),u.addEventListener("click",()=>{this.currentTime=c.time}),u.style.left=f,r.appendChild(u)}),n.appendChild(r),this.config.tooltips.seek||(s=C("span",{class:this.config.classNames.tooltip},""),n.appendChild(s)),this.elements.markers={points:r,tip:s},this.elements.progress.appendChild(n)}};function x(e,i=!0){let t=e;if(i){const n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch(n){return null}}function F(e){const i=new URLSearchParams;return o.object(e)&&Object.entries(e).forEach(([t,n])=>{i.set(t,n)}),i}const S={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!X.textTracks)return void(o.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&h.setCaptionsMenu.call(this));var e,i;if(o.element(this.elements.captions)||(this.elements.captions=C("div",ge(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),e=this.elements.captions,i=this.elements.wrapper,o.element(e)&&o.element(i)&&i.parentNode.insertBefore(e,i.nextSibling)),te.isIE&&window.URL){const s=this.media.querySelectorAll("track");Array.from(s).forEach(a=>{const l=a.getAttribute("src"),c=x(l);c!==null&&c.hostname!==window.location.href.hostname&&["http:","https:"].includes(c.protocol)&&be(l,"blob").then(u=>{a.setAttribute("src",window.URL.createObjectURL(u))}).catch(()=>{pe(a)})})}const t=d((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(s=>s.split("-")[0]));let n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();n==="auto"&&([n]=t);let r=this.storage.get("captions");if(o.boolean(r)||({active:r}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:r,language:n,languages:t}),this.isHTML5){const s=this.config.captions.update?"addtrack removetrack":"removetrack";R.call(this,this.media.textTracks,s,S.update.bind(this))}setTimeout(S.update.bind(this),0)},update(){const e=S.getTracks.call(this,!0),{active:i,language:t,meta:n,currentTrackNode:r}=this.captions,s=!!e.find(a=>a.language===t);this.isHTML5&&this.isVideo&&e.filter(a=>!n.get(a)).forEach(a=>{this.debug.log("Track added",a),n.set(a,{default:a.mode==="showing"}),a.mode==="showing"&&(a.mode="hidden"),R.call(this,a,"cuechange",()=>S.updateCues.call(this))}),(s&&this.language!==t||!e.includes(r))&&(S.setLanguage.call(this,t),S.toggle.call(this,i&&s)),this.elements&&$(this.elements.container,this.config.classNames.captions.enabled,!o.empty(e)),o.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&h.setCaptionsMenu.call(this)},toggle(e,i=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,n=this.config.classNames.captions.active,r=o.nullOrUndefined(e)?!t:e;if(r!==t){if(i||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!i){const s=S.getTracks.call(this),a=S.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=a.language,void S.set.call(this,s.indexOf(a))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),$(this.elements.container,n,r),this.captions.toggled=r,h.updateSetting.call(this,"captions"),E.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout(()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,i=!0){const t=S.getTracks.call(this);if(e!==-1)if(o.number(e))if(e in t){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const n=t[e],{language:r}=n||{};this.captions.currentTrackNode=n,h.updateSetting.call(this,"captions"),i||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),E.call(this,this.media,"languagechange")}S.toggle.call(this,!0,i),this.isHTML5&&this.isVideo&&S.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else S.toggle.call(this,!1,i)},setLanguage(e,i=!0){if(!o.string(e))return void this.debug.warn("Invalid language argument",e);const t=e.toLowerCase();this.captions.language=t;const n=S.getTracks.call(this),r=S.findTrack.call(this,[t]);S.set.call(this,n.indexOf(r),i)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(i=>!this.isHTML5||e||this.captions.meta.has(i)).filter(i=>["captions","subtitles"].includes(i.kind))},findTrack(e,i=!1){const t=S.getTracks.call(this),n=a=>Number((this.captions.meta.get(a)||{}).default),r=Array.from(t).sort((a,l)=>n(l)-n(a));let s;return e.every(a=>(s=r.find(l=>l.language===a),!s)),s||(i?r[0]:void 0)},getCurrentTrack(){return S.getTracks.call(this)[this.currentTrack]},getLabel(e){let i=e;return!o.track(i)&&X.textTracks&&this.captions.toggled&&(i=S.getCurrentTrack.call(this)),o.track(i)?o.empty(i.label)?o.empty(i.language)?Q.get("enabled",this.config):e.language.toUpperCase():i.label:Q.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!o.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!o.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let i=e;if(!i){const n=S.getCurrentTrack.call(this);i=Array.from((n||{}).activeCues||[]).map(r=>r.getCueAsHTML()).map(ye)}const t=i.map(n=>n.trim()).join(`
`);if(t!==this.elements.captions.innerHTML){Be(this.elements.captions);const n=C("span",ge(this.config.selectors.caption));n.innerHTML=t,this.elements.captions.appendChild(n),E.call(this,this.media,"cuechange")}}},W={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"Pop-up",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},posterThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},posterThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},me="picture-in-picture",re="inline",ce={html5:"html5",youtube:"youtube",vimeo:"vimeo"},pt="audio",st="video",mt=()=>{};class ft{constructor(i=!1){this.enabled=window.console&&i,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):mt}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):mt}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):mt}}class ue{constructor(i){m(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;o.element(t)&&(t.pressed=this.active);const n=this.target===this.player.media?this.target:this.player.elements.container;E.call(this.player,n,this.active?"enterfullscreen":"exitfullscreen",!0)}),m(this,"toggleFallback",(t=!1)=>{var n,r;if(t?this.scrollPosition={x:(n=window.scrollX)!=null?n:0,y:(r=window.scrollY)!=null?r:0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",$(this.target,this.player.config.classNames.fullscreen.fallback,t),te.isIos){let s=document.head.querySelector('meta[name="viewport"]');const a="viewport-fit=cover";s||(s=document.createElement("meta"),s.setAttribute("name","viewport"));const l=o.string(s.content)&&s.content.includes(a);t?(this.cleanupViewport=!l,l||(s.content+=`,${a}`)):this.cleanupViewport&&(s.content=s.content.split(",").filter(c=>c.trim()!==a).join(","))}this.onChange()}),m(this,"trapFocus",t=>{if(te.isIos||te.isIPadOS||!this.active||t.key!=="Tab")return;const n=document.activeElement,r=Xe.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=r,a=r[r.length-1];n!==a||t.shiftKey?n===s&&t.shiftKey&&(a.focus(),t.preventDefault()):(s.focus(),t.preventDefault())}),m(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":ue.nativeSupported?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");$(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),m(this,"enter",()=>{this.supported&&(te.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!ue.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?o.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),m(this,"exit",()=>{if(this.supported)if(te.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),g(this.player.play());else if(!ue.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!o.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),m(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=i,this.prefix=ue.prefix,this.property=ue.property,this.scrollPosition={x:0,y:0},this.forceFallback=i.config.fullscreen.fallback==="force",this.player.elements.fullscreen=i.config.fullscreen.container&&function(t,n){const{prototype:r}=Element;return(r.closest||function(){let s=this;do{if(Re.matches(s,n))return s;s=s.parentElement||s.parentNode}while(s!==null&&s.nodeType===1);return null}).call(t,n)}(this.player.elements.container,i.config.fullscreen.container),R.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),R.call(this.player,this.player.elements.container,"dblclick",t=>{o.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),R.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return ue.nativeSupported&&!this.forceFallback}static get prefix(){if(o.function(document.exitFullscreen))return"";let i="";return["webkit","moz","ms"].some(t=>!(!o.function(document[`${t}ExitFullscreen`])&&!o.function(document[`${t}CancelFullScreen`]))&&(i=t,!0)),i}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,ue.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||ue.nativeSupported||!te.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!ue.nativeSupported||this.forceFallback)return ht(this.target,this.player.config.classNames.fullscreen.fallback);const i=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return i&&i.shadowRoot?i===this.target.getRootNode().host:i===this.target}get target(){var i;return te.isIos&&this.player.config.fullscreen.iosNative?this.player.media:(i=this.player.elements.fullscreen)!=null?i:this.player.elements.container}}function Ve(e,i=1){return new Promise((t,n)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=i?t:n)(r)};Object.assign(r,{onload:s,onerror:s,src:e})})}const V={addStyleHook(){$(this.elements.container,this.config.selectors.container.replace(".",""),!0),$(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void V.toggleNativeControls.call(this,!0);o.element(this.elements.controls)||(h.inject.call(this),this.listeners.controls()),V.toggleNativeControls.call(this),this.isHTML5&&S.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,h.updateVolume.call(this),h.timeUpdate.call(this),h.durationUpdate.call(this),V.checkPlaying.call(this),$(this.elements.container,this.config.classNames.pip.supported,X.pip&&this.isHTML5&&this.isVideo),$(this.elements.container,this.config.classNames.airplay.supported,X.airplay&&this.isHTML5),$(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{E.call(this,this.media,"ready")},0),V.setTitle.call(this),this.poster&&V.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&h.durationUpdate.call(this),this.config.mediaMetadata&&h.setMediaMetadata.call(this)},setTitle(){let e=Q.get("play",this.config);if(o.string(this.config.title)&&!o.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(i=>{i.setAttribute("aria-label",e)}),this.isEmbed){const i=ee.call(this,"iframe");if(!o.element(i))return;const t=o.empty(this.config.title)?"video":this.config.title,n=Q.get("frameTitle",this.config);i.setAttribute("title",n.replace("{title}",t))}},togglePoster(e){$(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,i=!0){return i&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),y.call(this).then(()=>Ve(e)).catch(t=>{throw e===this.poster&&V.togglePoster.call(this,!1),t}).then(()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),V.togglePoster.call(this,!0),e)))},checkPlaying(e){$(this.elements.container,this.config.classNames.playing,this.playing),$(this.elements.container,this.config.classNames.paused,this.paused),$(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(i=>{Object.assign(i,{pressed:this.playing}),i.setAttribute("aria-label",Q.get(this.playing?"pause":"play",this.config))}),o.event(e)&&e.type==="timeupdate"||V.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{$(this.elements.container,this.config.classNames.loading,this.loading),V.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:i}=this.elements;if(i&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(e||this.loading||this.paused||i.pressed||i.hover||t))}},migrateStyles(){Object.values(Te({},this.media.style)).filter(e=>!o.empty(e)&&o.string(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),o.empty(this.media.style)&&this.media.removeAttribute("style")}};class ze{constructor(i){m(this,"firstTouch",()=>{const{player:t}=this,{elements:n}=t;t.touch=!0,$(n.container,t.config.classNames.isTouch,!0)}),m(this,"global",(t=!0)=>{const{player:n}=this;n.config.keyboard.global&&nt.call(n,window,"keydown keyup",this.handleKey,t,!1),nt.call(n,document.body,"click",this.toggleMenu,t),dt.call(n,document.body,"touchstart",this.firstTouch)}),m(this,"container",()=>{const{player:t}=this,{config:n,elements:r,timers:s}=t;!n.keyboard.global&&n.keyboard.focused&&R.call(t,r.container,"keydown keyup",this.handleKey,!1),R.call(t,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",c=>{const{controls:u}=r;u&&c.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let f=0;["touchstart","touchmove","mousemove"].includes(c.type)&&(V.toggleControls.call(t,!0),f=t.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>V.toggleControls.call(t,!1),f)});const a=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const c=r.wrapper,{active:u}=t.fullscreen,[f,v]=L.call(t),p=T(`aspect-ratio: ${f} / ${v}`);if(!u)return void(p?(c.style.width=null,c.style.height=null):(c.style.maxWidth=null,c.style.margin=null));const[P,I]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],O=P/I>f/v;p?(c.style.width=O?"auto":"100%",c.style.height=O?"100%":"auto"):(c.style.maxWidth=O?I/v*f+"px":null,c.style.margin=O?"0 auto":null)},l=()=>{clearTimeout(s.resized),s.resized=setTimeout(a,50)};R.call(t,r.container,"enterfullscreen exitfullscreen",c=>{const{target:u}=t.fullscreen;u===r.container&&(!t.isEmbed&&o.empty(t.config.ratio)||(a(),(c.type==="enterfullscreen"?R:De).call(t,window,"resize",l)))})}),m(this,"media",()=>{const{player:t}=this,{elements:n}=t;if(R.call(t,t.media,"timeupdate seeking seeked",s=>h.timeUpdate.call(t,s)),R.call(t,t.media,"durationchange loadeddata loadedmetadata",s=>h.durationUpdate.call(t,s)),R.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),R.call(t,t.media,"progress playing seeking seeked",s=>h.updateProgress.call(t,s)),R.call(t,t.media,"volumechange",s=>h.updateVolume.call(t,s)),R.call(t,t.media,"playing play pause ended emptied timeupdate",s=>V.checkPlaying.call(t,s)),R.call(t,t.media,"waiting canplay seeked playing",s=>V.checkLoading.call(t,s)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const s=ee.call(t,`.${t.config.classNames.video}`);if(!o.element(s))return;R.call(t,n.container,"click",a=>{([n.container,s].includes(a.target)||s.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(a,t.restart,"restart"),this.proxy(a,()=>{g(t.play())},"play")):this.proxy(a,()=>{g(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&R.call(t,n.wrapper,"contextmenu",s=>{s.preventDefault()},!1),R.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),R.call(t,t.media,"ratechange",()=>{h.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),R.call(t,t.media,"qualitychange",s=>{h.updateSetting.call(t,"quality",null,s.detail.quality)}),R.call(t,t.media,"ready qualitychange",()=>{h.setDownloadUrl.call(t)});const r=t.config.events.concat(["keyup","keydown"]).join(" ");R.call(t,t.media,r,s=>{let{detail:a={}}=s;s.type==="error"&&(a=t.media.error),E.call(t,n.container,s.type,!0,a)})}),m(this,"proxy",(t,n,r)=>{const{player:s}=this,a=s.config.listeners[r];let l=!0;o.function(a)&&(l=a.call(s,t)),l!==!1&&o.function(n)&&n.call(s,t)}),m(this,"bind",(t,n,r,s,a=!0)=>{const{player:l}=this,c=l.config.listeners[s],u=o.function(c);R.call(l,t,n,f=>this.proxy(f,r,s),a&&!u)}),m(this,"controls",()=>{const{player:t}=this,{elements:n}=t,r=te.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach(s=>{this.bind(s,"click",()=>{g(t.togglePlay())},"play")}),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(n.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(n.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(n.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(n.buttons.download,"click",()=>{E.call(t,t.media,"download")},"download"),this.bind(n.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(n.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),h.toggleMenu.call(t,s)},null,!1),this.bind(n.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),h.toggleMenu.call(t,s)):h.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(n.settings.menu,"keydown",s=>{s.key==="Escape"&&h.toggleMenu.call(t,s)}),this.bind(n.inputs.seek,"mousedown mousemove",s=>{const a=n.progress.getBoundingClientRect(),l=100/a.width*(s.pageX-a.left);s.currentTarget.setAttribute("seek-value",l)}),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const a=s.currentTarget,l="play-on-seeked";if(o.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;t.lastSeekTime=Date.now();const c=a.hasAttribute(l),u=["mouseup","touchend","keyup"].includes(s.type);c&&u?(a.removeAttribute(l),g(t.play())):!u&&t.playing&&(a.setAttribute(l,""),t.pause())}),te.isIos){const s=Xe.call(t,'input[type="range"]');Array.from(s).forEach(a=>this.bind(a,r,l=>Qe(l.target)))}this.bind(n.inputs.seek,r,s=>{const a=s.currentTarget;let l=a.getAttribute("seek-value");o.empty(l)&&(l=a.value),a.removeAttribute("seek-value"),t.currentTime=l/a.max*t.duration},"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",s=>h.updateSeekTooltip.call(t,s)),this.bind(n.progress,"mousemove touchmove",s=>{const{posterThumbnails:a}=t;a&&a.loaded&&a.startMove(s)}),this.bind(n.progress,"mouseleave touchend click",()=>{const{posterThumbnails:s}=t;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(n.progress,"mousedown touchstart",s=>{const{posterThumbnails:a}=t;a&&a.loaded&&a.startScrubbing(s)}),this.bind(n.progress,"mouseup touchend",s=>{const{posterThumbnails:a}=t;a&&a.loaded&&a.endScrubbing(s)}),te.isWebKit&&Array.from(Xe.call(t,'input[type="range"]')).forEach(s=>{this.bind(s,"input",a=>h.updateRangeFill.call(t,a.target))}),t.config.toggleInvert&&!o.element(n.display.duration)&&this.bind(n.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,h.timeUpdate.call(t))}),this.bind(n.inputs.volume,r,s=>{t.volume=s.target.value},"volume"),this.bind(n.controls,"mouseenter mouseleave",s=>{n.controls.hover=!t.touch&&s.type==="mouseenter"}),n.fullscreen&&Array.from(n.fullscreen.children).filter(s=>!s.contains(n.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",a=>{n.controls&&(n.controls.hover=!t.touch&&a.type==="mouseenter")})}),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{n.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(n.controls,"focusin",()=>{const{config:s,timers:a}=t;$(n.controls,s.classNames.noTransition,!0),V.toggleControls.call(t,!0),setTimeout(()=>{$(n.controls,s.classNames.noTransition,!1)},0);const l=this.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout(()=>V.toggleControls.call(t,!1),l)}),this.bind(n.inputs.volume,"wheel",s=>{const a=s.webkitDirectionInvertedFromDevice,[l,c]=[s.deltaX,-s.deltaY].map(v=>a?-v:v),u=Math.sign(Math.abs(l)>Math.abs(c)?l:c);t.increaseVolume(u/50);const{volume:f}=t.media;(u===1&&f<1||u===-1&&f>0)&&s.preventDefault()},"volume",!1)}),this.player=i,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(i){const{player:t}=this,{elements:n}=t,{key:r,type:s,altKey:a,ctrlKey:l,metaKey:c,shiftKey:u}=i,f=s==="keydown",v=f&&r===this.lastKey;if(!(a||l||c||u)&&r){if(f){const P=document.activeElement;if(o.element(P)){const{editable:I}=t.config.selectors,{seek:O}=n.inputs;if(P!==O&&Re(P,I)||i.key===" "&&Re(P,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(r)&&(i.preventDefault(),i.stopPropagation()),r){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":v||(p=parseInt(r,10),t.currentTime=t.duration/10*p);break;case" ":case"k":v||g(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":v||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":v||t.toggleCaptions();break;case"l":t.loop=!t.loop}r==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=r}else this.lastKey=null;var p}}toggleMenu(i){h.toggleMenu.call(this.player,i)}}var rt=function(e,i){return e(i={exports:{}},i.exports),i.exports}(function(e,i){e.exports=function(){var t=function(){},n={},r={},s={};function a(p,P){p=p.push?p:[p];var I,O,z,_=[],G=p.length,oe=G;for(I=function(w,j){j.length&&_.push(w),--oe||P(_)};G--;)O=p[G],(z=r[O])?I(O,z):(s[O]=s[O]||[]).push(I)}function l(p,P){if(p){var I=s[p];if(r[p]=P,I)for(;I.length;)I[0](p,P),I.splice(0,1)}}function c(p,P){p.call&&(p={success:p}),P.length?(p.error||t)(P):(p.success||t)(p)}function u(p,P,I,O){var z,_,G=document,oe=I.async,w=(I.numRetries||0)+1,j=I.before||t,le=p.replace(/[\?|#].*$/,""),Pe=p.replace(/^(css|img)!/,"");O=O||0,/(^css!|\.css$)/.test(le)?((_=G.createElement("link")).rel="stylesheet",_.href=Pe,(z="hideFocus"in _)&&_.relList&&(z=0,_.rel="preload",_.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(le)?(_=G.createElement("img")).src=Pe:((_=G.createElement("script")).src=p,_.async=oe===void 0||oe),_.onload=_.onerror=_.onbeforeload=function(Ke){var ve=Ke.type[0];if(z)try{_.sheet.cssText.length||(ve="e")}catch(Ft){Ft.code!=18&&(ve="e")}if(ve=="e"){if((O+=1)<w)return u(p,P,I,O)}else if(_.rel=="preload"&&_.as=="style")return _.rel="stylesheet";P(p,ve,Ke.defaultPrevented)},j(p,_)!==!1&&G.head.appendChild(_)}function f(p,P,I){var O,z,_=(p=p.push?p:[p]).length,G=_,oe=[];for(O=function(w,j,le){if(j=="e"&&oe.push(w),j=="b"){if(!le)return;oe.push(w)}--_||P(oe)},z=0;z<G;z++)u(p[z],O,I)}function v(p,P,I){var O,z;if(P&&P.trim&&(O=P),z=(O?I:P)||{},O){if(O in n)throw"LoadJS";n[O]=!0}function _(G,oe){f(p,function(w){c(z,w),G&&c({success:G,error:oe},w),l(O,w)},z)}if(z.returnPromise)return new Promise(_);_()}return v.ready=function(p,P){return a(p,function(I){c(P,I)}),v},v.done=function(p){l(p,[])},v.reset=function(){n={},r={},s={}},v.isDefined=function(p){return p in n},v}()});function Ze(e){return new Promise((i,t)=>{rt(e,{success:i,error:t})})}function ae(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,E.call(this,this.media,e?"play":"pause"))}const ct={setup(){const e=this;$(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Y.call(e),o.object(window.Vimeo)?ct.ready.call(e):Ze(e.config.urls.vimeo.sdk).then(()=>{ct.ready.call(e)}).catch(i=>{e.debug.warn("Vimeo SDK (player.js) failed to load",i)})},ready(){const e=this,i=e.config.vimeo,oe=i,{premium:t,referrerPolicy:n}=oe,r=Vt(oe,["premium","referrerPolicy"]);let s=e.media.getAttribute("src"),a="";o.empty(s)?(s=e.media.getAttribute(e.config.attributes.embed.id),a=e.media.getAttribute(e.config.attributes.embed.hash)):a=function(w){const j=w.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return j&&j.length===5?j[4]:null}(s);const l=a?{h:a}:{};t&&Object.assign(r,{controls:!1,sidedock:!1});const c=F(Te(Te({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline},l),r)),u=(f=s,o.empty(f)?null:o.number(Number(f))?f:f.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:f);var f;const v=C("iframe"),p=H(e.config.urls.vimeo.iframe,u,c);if(v.setAttribute("src",p),v.setAttribute("allowfullscreen",""),v.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),o.empty(n)||v.setAttribute("referrerPolicy",n),t||!i.customControls)v.setAttribute("data-poster",e.poster),e.media=Je(v,e.media);else{const w=C("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});w.appendChild(v),e.media=Je(w,e.media)}i.customControls||be(H(e.config.urls.vimeo.api,p)).then(w=>{!o.empty(w)&&w.thumbnail_url&&V.setPoster.call(e,w.thumbnail_url).catch(()=>{})}),e.embed=new window.Vimeo.Player(v,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(ae.call(e,!0),e.embed.play()),e.media.pause=()=>(ae.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:P}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>P,set(w){const{embed:j,media:le,paused:Pe,volume:Ke}=e,ve=Pe&&!j.hasPlayed;le.seeking=!0,E.call(e,le,"seeking"),Promise.resolve(ve&&j.setVolume(0)).then(()=>j.setCurrentTime(w)).then(()=>ve&&j.pause()).then(()=>ve&&j.setVolume(Ke)).catch(()=>{})}});let I=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>I,set(w){e.embed.setPlaybackRate(w).then(()=>{I=w,E.call(e,e.media,"ratechange")}).catch(()=>{e.options.speed=[1]})}});let{volume:O}=e.config;Object.defineProperty(e.media,"volume",{get:()=>O,set(w){e.embed.setVolume(w).then(()=>{O=w,E.call(e,e.media,"volumechange")})}});let{muted:z}=e.config;Object.defineProperty(e.media,"muted",{get:()=>z,set(w){const j=!!o.boolean(w)&&w;e.embed.setMuted(!!j||e.config.muted).then(()=>{z=j,E.call(e,e.media,"volumechange")})}});let _,{loop:G}=e.config;Object.defineProperty(e.media,"loop",{get:()=>G,set(w){const j=o.boolean(w)?w:e.config.loop.active;e.embed.setLoop(j).then(()=>{G=j})}}),e.embed.getVideoUrl().then(w=>{_=w,h.setDownloadUrl.call(e)}).catch(w=>{this.debug.warn(w)}),Object.defineProperty(e.media,"currentSrc",{get:()=>_}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(w=>{const[j,le]=w;e.embed.ratio=se(j,le),Y.call(this)}),e.embed.setAutopause(e.config.autopause).then(w=>{e.config.autopause=w}),e.embed.getVideoTitle().then(w=>{e.config.title=w,V.setTitle.call(this)}),e.embed.getCurrentTime().then(w=>{P=w,E.call(e,e.media,"timeupdate")}),e.embed.getDuration().then(w=>{e.media.duration=w,E.call(e,e.media,"durationchange")}),e.embed.getTextTracks().then(w=>{e.media.textTracks=w,S.setup.call(e)}),e.embed.on("cuechange",({cues:w=[]})=>{const j=w.map(le=>function(Pe){const Ke=document.createDocumentFragment(),ve=document.createElement("div");return Ke.appendChild(ve),ve.innerHTML=Pe,Ke.firstChild.innerText}(le.text));S.updateCues.call(e,j)}),e.embed.on("loaded",()=>{e.embed.getPaused().then(w=>{ae.call(e,!w),w||E.call(e,e.media,"playing")}),o.element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)}),e.embed.on("bufferstart",()=>{E.call(e,e.media,"waiting")}),e.embed.on("bufferend",()=>{E.call(e,e.media,"playing")}),e.embed.on("play",()=>{ae.call(e,!0),E.call(e,e.media,"playing")}),e.embed.on("pause",()=>{ae.call(e,!1)}),e.embed.on("timeupdate",w=>{e.media.seeking=!1,P=w.seconds,E.call(e,e.media,"timeupdate")}),e.embed.on("progress",w=>{e.media.buffered=w.percent,E.call(e,e.media,"progress"),parseInt(w.percent,10)===1&&E.call(e,e.media,"canplaythrough"),e.embed.getDuration().then(j=>{j!==e.media.duration&&(e.media.duration=j,E.call(e,e.media,"durationchange"))})}),e.embed.on("seeked",()=>{e.media.seeking=!1,E.call(e,e.media,"seeked")}),e.embed.on("ended",()=>{e.media.paused=!0,E.call(e,e.media,"ended")}),e.embed.on("error",w=>{e.media.error=w,E.call(e,e.media,"error")}),i.customControls&&setTimeout(()=>V.build.call(e),0)}};function et(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,E.call(this,this.media,e?"play":"pause"))}function At(e){return e.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const tt={setup(){if($(this.elements.wrapper,this.config.classNames.embed,!0),o.object(window.YT)&&o.function(window.YT.Player))tt.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{o.function(e)&&e(),tt.ready.call(this)},Ze(this.config.urls.youtube.sdk).catch(i=>{this.debug.warn("YouTube API failed to load",i)})}},getTitle(e){be(H(this.config.urls.youtube.api,e)).then(i=>{if(o.object(i)){const{title:t,height:n,width:r}=i;this.config.title=t,V.setTitle.call(this),this.embed.ratio=se(r,n)}Y.call(this)}).catch(()=>{Y.call(this)})},ready(){const e=this,i=e.config.youtube,t=e.media&&e.media.getAttribute("id");if(!o.empty(t)&&t.startsWith("youtube-"))return;let n=e.media.getAttribute("src");o.empty(n)&&(n=e.media.getAttribute(this.config.attributes.embed.id));const r=(s=n,o.empty(s)?null:s.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:s);var s;const a=C("div",{id:`${e.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":i.customControls?e.poster:void 0});if(e.media=Je(a,e.media),i.customControls){const l=c=>`https://i.ytimg.com/vi/${r}/${c}default.jpg`;Ve(l("maxres"),121).catch(()=>Ve(l("sd"),121)).catch(()=>Ve(l("hq"))).then(c=>V.setPoster.call(e,c.src)).then(c=>{c.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}e.embed=new window.YT.Player(e.media,{videoId:r,host:At(i),playerVars:J({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&i.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},i),events:{onError(l){if(!e.media.error){const c=l.data,u={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[c]||"An unknown error occurred";e.media.error={code:c,message:u},E.call(e,e.media,"error")}},onPlaybackRateChange(l){const c=l.target;e.media.playbackRate=c.getPlaybackRate(),E.call(e,e.media,"ratechange")},onReady(l){if(o.function(e.media.play))return;const c=l.target;tt.getTitle.call(e,r),e.media.play=()=>{et.call(e,!0),c.playVideo()},e.media.pause=()=>{et.call(e,!1),c.pauseVideo()},e.media.stop=()=>{c.stopVideo()},e.media.duration=c.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(c.getCurrentTime()),set(p){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,E.call(e,e.media,"seeking"),c.seekTo(p)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>c.getPlaybackRate(),set(p){c.setPlaybackRate(p)}});let{volume:u}=e.config;Object.defineProperty(e.media,"volume",{get:()=>u,set(p){u=p,c.setVolume(100*u),E.call(e,e.media,"volumechange")}});let{muted:f}=e.config;Object.defineProperty(e.media,"muted",{get:()=>f,set(p){const P=o.boolean(p)?p:f;f=P,c[P?"mute":"unMute"](),c.setVolume(100*u),E.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>c.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const v=c.getAvailablePlaybackRates();e.options.speed=v.filter(p=>e.config.speed.options.includes(p)),e.supported.ui&&i.customControls&&e.media.setAttribute("tabindex",-1),E.call(e,e.media,"timeupdate"),E.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=c.getVideoLoadedFraction(),(e.media.lastBuffered===null||e.media.lastBuffered<e.media.buffered)&&E.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,e.media.buffered===1&&(clearInterval(e.timers.buffering),E.call(e,e.media,"canplaythrough"))},200),i.customControls&&setTimeout(()=>V.build.call(e),50)},onStateChange(l){const c=l.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(l.data)&&(e.media.seeking=!1,E.call(e,e.media,"seeked")),l.data){case-1:E.call(e,e.media,"timeupdate"),e.media.buffered=c.getVideoLoadedFraction(),E.call(e,e.media,"progress");break;case 0:et.call(e,!1),e.media.loop?(c.stopVideo(),c.playVideo()):E.call(e,e.media,"ended");break;case 1:i.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(et.call(e,!0),E.call(e,e.media,"playing"),e.timers.playing=setInterval(()=>{E.call(e,e.media,"timeupdate")},50),e.media.duration!==c.getDuration()&&(e.media.duration=c.getDuration(),E.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),et.call(e,!1);break;case 3:E.call(e,e.media,"waiting")}E.call(e,e.elements.container,"statechange",!1,{code:l.data})}}})}},_t={setup(){this.media?($(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),$(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&$(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=C("div",{class:this.config.classNames.video}),Et(this.media,this.elements.wrapper),this.elements.poster=C("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?K.setup.call(this):this.isYouTube?tt.setup.call(this):this.isVimeo&&ct.setup.call(this)):this.debug.warn("No media element found!")}};class Rt{constructor(i){m(this,"load",()=>{this.enabled&&(o.object(window.google)&&o.object(window.google.ima)?this.ready():Ze(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),m(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),m(this,"setupIMA",()=>{this.elements.container=C("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),m(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(n){this.onAdError(n)}}),m(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const n=U(Math.max(this.manager.getRemainingTime(),0)),r=`${Q.get("advertisement",this.player.config)} - ${n}`;this.elements.container.setAttribute("data-badge-text",r)},100)}),m(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=t.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r=>this.onAdError(r)),Object.keys(google.ima.AdEvent.Type).forEach(r=>{this.manager.addEventListener(google.ima.AdEvent.Type[r],s=>this.onAdEvent(s))}),this.trigger("loaded")}),m(this,"addCuePoints",()=>{o.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const n=this.player.elements.progress;if(o.element(n)){const r=100/this.player.duration*t,s=C("span",{class:this.player.config.classNames.cues});s.style.left=`${r.toString()}%`,n.appendChild(s)}}})}),m(this,"onAdEvent",t=>{const{container:n}=this.player.elements,r=t.getAd(),s=t.getAdData();switch((a=>{E.call(this.player,this.player.media,`ads${a.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=n.offsetWidth,r.height=n.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),m(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),m(this,"listeners",()=>{const{container:t}=this.player.elements;let n;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{n=this.player.currentTime}),this.player.on("seeked",()=>{const r=this.player.currentTime;o.empty(this.cuePoints)||this.cuePoints.forEach((s,a)=>{n<s&&s<r&&(this.manager.discardAdBreak(),this.cuePoints.splice(a,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),m(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(n){this.onAdError(n)}}).catch(()=>{})}),m(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,g(this.player.media.play())}),m(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),m(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),m(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),m(this,"trigger",(t,...n)=>{const r=this.events[t];o.array(r)&&r.forEach(s=>{o.function(s)&&s.apply(this,n)})}),m(this,"on",(t,n)=>(o.array(this.events[t])||(this.events[t]=[]),this.events[t].push(n),this)),m(this,"startSafetyTimer",(t,n)=>{this.player.debug.log(`Safety timer invoked from: ${n}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),m(this,"clearSafetyTimer",t=>{o.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=i,this.config=i.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,n)=>{this.on("loaded",t),this.on("error",n)}),this.load()}get enabled(){const{config:i}=this;return this.player.isHTML5&&this.player.isVideo&&i.enabled&&(!o.empty(i.publisherId)||o.url(i.tagUrl))}get tagUrl(){const{config:i}=this;return o.url(i.tagUrl)?i.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${F({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:i.publisherId})}`}}function Ot(e=0,i=0,t=255){return Math.min(Math.max(e,i),t)}const qt=e=>{const i=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const n={};t.split(/\r\n|\n|\r/).forEach(r=>{if(o.number(n.startTime)){if(!o.empty(r.trim())&&o.empty(n.text)){const s=r.trim().split("#xywh=");[n.text]=s,s[1]&&([n.x,n.y,n.w,n.h]=s[1].split(","))}}else{const s=r.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(n.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,n.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),n.text&&i.push(n)}),i},It=(e,i)=>{const t={};return e>i.width/i.height?(t.width=i.width,t.height=1/e*i.width):(t.height=i.height,t.width=e*i.height),t};class xt{constructor(i){m(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),m(this,"getThumbnails",()=>new Promise(t=>{const{src:n}=this.player.config.posterThumbnails;if(o.empty(n))throw new Error("Missing posterThumbnails.src config attribute");const r=()=>{this.thumbnails.sort((s,a)=>s.height-a.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(o.function(n))n(s=>{this.thumbnails=s,r()});else{const s=(o.string(n)?[n]:n).map(a=>this.getThumbnail(a));Promise.all(s).then(r)}})),m(this,"getThumbnail",t=>new Promise(n=>{be(t).then(r=>{const s={frames:qt(r),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const a=new Image;a.onload=()=>{s.height=a.naturalHeight,s.width=a.naturalWidth,this.thumbnails.push(s),n()},a.src=s.urlPrefix+s.frames[0].text})})),m(this,"startMove",t=>{if(this.loaded&&o.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var n,r;const s=this.player.elements.progress.getBoundingClientRect(),a=100/s.width*(t.pageX-s.left);this.seekTime=this.player.media.duration*(a/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=U(this.seekTime);const l=(n=this.player.config.markers)===null||n===void 0||(r=n.points)===null||r===void 0?void 0:r.find(({time:c})=>c===Math.round(this.seekTime));l&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${l.label}<br>`)}this.showImageAtCurrentTime()}}),m(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),m(this,"startScrubbing",t=>{(o.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),m(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):dt.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),m(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),m(this,"render",()=>{this.elements.thumb.container=C("div",{class:this.player.config.classNames.posterThumbnails.thumbContainer}),this.elements.thumb.imageContainer=C("div",{class:this.player.config.classNames.posterThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=C("div",{class:this.player.config.classNames.posterThumbnails.timeContainer});this.elements.thumb.time=C("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),o.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=C("div",{class:this.player.config.classNames.posterThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),m(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),m(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),n=t>=0;let r=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach((s,a)=>{this.loadedImages.includes(s.frames[t].text)&&(r=a)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(r)))}),m(this,"loadImage",(t=0)=>{const n=this.showingThumb,r=this.thumbnails[t],{urlPrefix:s}=r,a=r.frames[n],l=r.frames[n].text,c=s+l;if(this.currentImageElement&&this.currentImageElement.dataset.filename===l)this.showImage(this.currentImageElement,a,t,n,l,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=c,u.dataset.index=n,u.dataset.filename=l,this.showingThumbFilename=l,this.player.debug.log(`Loading image: ${c}`),u.onload=()=>this.showImage(u,a,t,n,l,!0),this.loadingImage=u,this.removeOldImages(u)}}),m(this,"showImage",(t,n,r,s,a,l=!0)=>{this.player.debug.log(`Showing thumb: ${a}. num: ${s}. qual: ${r}. newimg: ${l}`),this.setImageSizeAndOffset(t,n),l&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(r,t,n,a))}),m(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(n=>{if(n.tagName.toLowerCase()!=="img")return;const r=this.usingSprites?500:1e3;if(n.dataset.index!==t.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(n),this.player.debug.log(`Removing thumb: ${n.dataset.filename}`)},r)}})}),m(this,"preloadNearby",(t,n=!0)=>new Promise(r=>{setTimeout(()=>{const s=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===s){let a;a=n?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let l=!1;a.forEach(c=>{const u=c.text;if(u!==s&&!this.loadedImages.includes(u)){l=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:f}=this.thumbnails[0],v=f+u,p=new Image;p.src=v,p.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),r()}}}),l||r()}},300)})),m(this,"getHigherQuality",(t,n,r,s)=>{if(t<this.thumbnails.length-1){let a=n.naturalHeight;this.usingSprites&&(a=r.h),a<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(t+1))},300)}}),m(this,"toggleThumbContainer",(t=!1,n=!1)=>{const r=this.player.config.classNames.posterThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(r,t),!t&&n&&(this.showingThumb=null,this.showingThumbFilename=null)}),m(this,"toggleScrubbingContainer",(t=!1)=>{const n=this.player.config.classNames.posterThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(n,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),m(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),m(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const n=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${n}px`}else if(t.clientHeight<20&&t.clientWidth>20){const n=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${n}px`}}else{const n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${n}px`}this.setThumbContainerPos()}),m(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),n=this.player.elements.container.getBoundingClientRect(),{container:r}=this.elements.thumb,s=n.left-t.left+10,a=n.right-t.left-r.clientWidth-10,l=this.mousePosX-t.left-r.clientWidth/2,c=Ot(l,s,a);r.style.left=`${c}px`,r.style.setProperty("--preview-arrow-offset",l-c+"px")}),m(this,"setScrubbingContainerSize",()=>{const{width:t,height:n}=It(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${n}px`}),m(this,"setImageSizeAndOffset",(t,n)=>{if(!this.usingSprites)return;const r=this.thumbContainerHeight/n.h;t.style.height=t.naturalHeight*r+"px",t.style.width=t.naturalWidth*r+"px",t.style.left=`-${n.x*r}px`,t.style.top=`-${n.y*r}px`}),this.player=i,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.posterThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:i}=It(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return i}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(i){this.mouseDown?this.currentScrubbingImageElement=i:this.currentThumbnailImageElement=i}}const Mt={insertElements(e,i){o.string(i)?_e(e,this.media,{src:i}):o.array(i)&&i.forEach(t=>{_e(e,this.media,t)})},change(e){ot(e,"sources.length")?(K.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],pe(this.media),this.media=null,o.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:i,type:t}=e,[{provider:n=ce.html5,src:r}]=i,s=n==="html5"?t:"div",a=n==="html5"?{}:{src:r};Object.assign(this,{provider:n,type:t,supported:X.check(t,n,this.config.playsinline),media:C(s,a)}),this.elements.container.appendChild(this.media),o.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),o.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),V.addStyleHook.call(this),this.isHTML5&&Mt.insertElements.call(this,"source",i),this.config.title=e.title,_t.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&Mt.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&V.build.call(this),this.isHTML5&&this.media.load(),o.empty(e.posterThumbnails)||(Object.assign(this.config.posterThumbnails,e.posterThumbnails),this.posterThumbnails&&this.posterThumbnails.loaded&&(this.posterThumbnails.destroy(),this.posterThumbnails=null),this.config.posterThumbnails.enabled&&(this.posterThumbnails=new xt(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class gt{constructor(i,t){if(m(this,"play",()=>o.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>g(this.media.play())),this.media.play()):null),m(this,"pause",()=>this.playing&&o.function(this.media.pause)?this.media.pause():null),m(this,"togglePlay",l=>(o.boolean(l)?l:!this.playing)?this.play():this.pause()),m(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):o.function(this.media.stop)&&this.media.stop()}),m(this,"restart",()=>{this.currentTime=0}),m(this,"rewind",l=>{this.currentTime-=o.number(l)?l:this.config.seekTime}),m(this,"forward",l=>{this.currentTime+=o.number(l)?l:this.config.seekTime}),m(this,"increaseVolume",l=>{const c=this.media.muted?0:this.volume;this.volume=c+(o.number(l)?l:0)}),m(this,"decreaseVolume",l=>{this.increaseVolume(-l)}),m(this,"airplay",()=>{X.airplay&&this.media.webkitShowPlaybackTargetPicker()}),m(this,"toggleControls",l=>{if(this.supported.ui&&!this.isAudio){const c=ht(this.elements.container,this.config.classNames.hideControls),u=l===void 0?void 0:!l,f=$(this.elements.container,this.config.classNames.hideControls,u);if(f&&o.array(this.config.controls)&&this.config.controls.includes("settings")&&!o.empty(this.config.settings)&&h.toggleMenu.call(this,!1),f!==c){const v=f?"controlshidden":"controlsshown";E.call(this,this.media,v)}return!f}return!1}),m(this,"on",(l,c)=>{R.call(this,this.elements.container,l,c)}),m(this,"once",(l,c)=>{dt.call(this,this.elements.container,l,c)}),m(this,"off",(l,c)=>{De(this.elements.container,l,c)}),m(this,"destroy",(l,c=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,c?(Object.keys(this.elements).length&&(pe(this.elements.buttons.play),pe(this.elements.captions),pe(this.elements.controls),pe(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),o.function(l)&&l()):(St.call(this),K.cancelRequests.call(this),Je(this.elements.original,this.elements.container),E.call(this,this.elements.original,"destroyed",!0),o.function(l)&&l.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(V.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&o.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))}),m(this,"supports",l=>X.mime.call(this,l)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=X.touch,this.media=i,o.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||o.nodeList(this.media)||o.array(this.media))&&(this.media=this.media[0]),this.config=J({},W,gt.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(l){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ft(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",X),o.nullOrUndefined(this.media)||!o.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!X.check().api)return void this.debug.error("Setup failed: no support");const n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;const r=this.media.tagName.toLowerCase();let s=null,a=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),o.element(s)){if(a=x(s.getAttribute("src")),this.provider=function(l){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(l)?ce.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(l)?ce.vimeo:null}(a.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",a.search.length){const l=["1","true"];l.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(o.empty(this.provider)||!Object.values(ce).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=st;break;case"video":case"audio":this.type=r,this.provider=ce.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=X.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new ze(this),this.storage=new ke(this),this.media.plyr=this,o.element(this.elements.container)||(this.elements.container=C("div"),Et(this.media,this.elements.container)),V.migrateStyles.call(this),V.addStyleHook.call(this),_t.setup.call(this),this.config.debug&&R.call(this,this.elements.container,this.config.events.join(" "),l=>{this.debug.log(`event: ${l.type}`)}),this.fullscreen=new ue(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&V.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Rt(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>g(this.play())),this.lastSeekTime=0,this.config.posterThumbnails.enabled&&(this.posterThumbnails=new xt(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===ce.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===ce.youtube}get isVimeo(){return this.provider===ce.vimeo}get isVideo(){return this.type===st}get isAudio(){return this.type===pt}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(i){if(!this.duration)return;const t=o.number(i)&&i>0;this.media.currentTime=t?Math.min(i,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:i}=this.media;return o.number(i)?i:i&&i.length&&this.duration>0?i.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const i=parseFloat(this.config.duration),t=(this.media||{}).duration,n=o.number(t)&&t!==1/0?t:0;return i||n}set volume(i){let t=i;o.string(t)&&(t=Number(t)),o.number(t)||(t=this.storage.get("volume")),o.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!o.empty(i)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(i){let t=i;o.boolean(t)||(t=this.storage.get("muted")),o.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(i){let t=null;o.number(i)&&(t=i),o.number(t)||(t=this.storage.get("speed")),o.number(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:r}=this;t=Ot(t,n,r),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(i){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let r=[!o.empty(i)&&Number(i),this.storage.get("quality"),t.selected,t.default].find(o.number),s=!0;if(!n.includes(r)){const a=b(n,r);this.debug.warn(`Unsupported quality option: ${r}, using ${a} instead`),r=a,s=!1}t.selected=r,this.media.quality=r,s&&this.storage.set({quality:r})}get quality(){return this.media.quality}set loop(i){const t=o.boolean(i)?i:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(i){Mt.change.call(this,i)}get source(){return this.media.currentSrc}get download(){const{download:i}=this.config.urls;return o.url(i)?i:this.source}set download(i){o.url(i)&&(this.config.urls.download=i,h.setDownloadUrl.call(this))}set poster(i){this.isVideo?V.setPoster.call(this,i,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const i=A(L.call(this));return o.array(i)?i.join(":"):i}set ratio(i){this.isVideo?o.string(i)&&M(i)?(this.config.ratio=A(i),Y.call(this)):this.debug.error(`Invalid aspect ratio specified (${i})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(i){this.config.autoplay=o.boolean(i)?i:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(i){S.toggle.call(this,i,!1)}set currentTrack(i){S.set.call(this,i,!1),S.setup.call(this)}get currentTrack(){const{toggled:i,currentTrack:t}=this.captions;return i?t:-1}set language(i){S.setLanguage.call(this,i,!1)}get language(){return(S.getCurrentTrack.call(this)||{}).language}set pip(i){if(!X.pip)return;const t=o.boolean(i)?i:!this.pip;o.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?me:re),o.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return X.pip?o.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===me:null}setposterThumbnails(i){this.posterThumbnails&&this.posterThumbnails.loaded&&(this.posterThumbnails.destroy(),this.posterThumbnails=null),Object.assign(this.config.posterThumbnails,i),this.config.posterThumbnails.enabled&&(this.posterThumbnails=new xt(this))}static supported(i,t){return X.check(i,t)}static loadSprite(i,t){return Oe(i,t)}static setup(i,t={}){let n=null;return o.string(i)?n=Array.from(document.querySelectorAll(i)):o.nodeList(i)?n=Array.from(i):o.array(i)&&(n=i.filter(o.element)),o.empty(n)?null:n.map(r=>new gt(r,t))}}var jt;return gt.defaults=(jt=W,JSON.parse(JSON.stringify(jt))),gt}),document.addEventListener("DOMContentLoaded",function(){const Z=document.createElement("div");Z.className="overlay-mask",document.querySelectorAll(".ep-embed-content-wraper").forEach(he=>{Ce(he)}),new MutationObserver(he=>{he.forEach(fe=>{Array.from(fe.addedNodes).forEach(Le=>{je(Le)})})}).observe(document.body,{childList:!0,subtree:!0});function je(he){he.nodeType===Node.ELEMENT_NODE&&he.classList.contains("ep-embed-content-wraper")&&Ce(he),he.hasChildNodes()&&he.childNodes.forEach(fe=>{je(fe)})}});function Ce(Z){var Le,He;const m=Z.getAttribute("data-playerid");let D=(Le=document.querySelector(`[data-playerid='${m}']`))==null?void 0:Le.getAttribute("data-options");if(!D)return!1;if(typeof D=="string")try{D=JSON.parse(D)}catch(Ne){console.error("Invalid JSON format:",Ne);return}else{console.error("Options is not a string");return}const je=document.createElement("div");je.className="pip-play",je.innerHTML='<svg width="20" height="20" viewBox="-0.15 -0.112 0.9 0.9" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin" class="jam jam-play"><path fill="#fff" d="M.518.357A.037.037 0 0 0 .506.306L.134.08a.039.039 0 0 0-.02-.006.038.038 0 0 0-.038.037v.453c0 .007.002.014.006.02a.039.039 0 0 0 .052.012L.506.37A.034.034 0 0 0 .518.358zm.028.075L.174.658A.115.115 0 0 1 .017.622.109.109 0 0 1 0 .564V.111C0 .05.051 0 .114 0c.021 0 .042.006.06.017l.372.226a.11.11 0 0 1 0 .189z"/></svg>',je.style.display="none";const he=document.createElement("div");he.className="pip-pause",he.innerHTML='<svg fill="#fff" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 2.5 2.5" xml:space="preserve"><path d="M1.013.499 1.006.5V.499H.748a.054.054 0 0 0-.054.054v1.394c0 .03.024.054.054.054h.266a.054.054 0 0 0 .054-.054V.553a.054.054 0 0 0-.054-.054zm.793 1.448V.553a.054.054 0 0 0-.054-.054L1.745.5V.499h-.258a.054.054 0 0 0-.054.054v1.394c0 .03.024.054.054.054h.265a.054.054 0 0 0 .054-.054z"/></svg>';const fe=document.createElement("div");if(fe.className="pip-close",fe.innerHTML='<svg width="20" height="20" viewBox="0 0 0.9 0.9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M.198.198a.037.037 0 0 1 .053 0L.45.397.648.199a.037.037 0 1 1 .053.053L.503.45l.198.198a.037.037 0 0 1-.053.053L.45.503.252.701A.037.037 0 0 1 .199.648L.397.45.198.252a.037.037 0 0 1 0-.053z" fill="#fff"/></svg>',m&&!Z.classList.contains("plyr-initialized")){let Ne=`[data-playerid='${m}'] .ose-embedpress-responsive`;D.self_hosted&&D.hosted_format==="video"?Ne=`[data-playerid='${m}'] .ose-embedpress-responsive video`:D.self_hosted&&D.hosted_format==="audio"&&(Ne=`[data-playerid='${m}'] .ose-embedpress-responsive audio`,Z.style.opacity="1"),document.querySelector(`[data-playerid='${m}']`).style.setProperty("--plyr-color-main",D.player_color),(He=document.querySelector(`[data-playerid='${m}'].custom-player-preset-1, [data-playerid='${m}'].custom-player-preset-3, [data-playerid='${m}'].custom-player-preset-4`))==null||He.style.setProperty("--plyr-range-fill-background","#ffffff"),document.querySelector(`[data-playerid='${m}'] iframe`)&&document.querySelector(`[data-playerid='${m}'] iframe`).setAttribute("data-poster",D.poster_thumbnail),document.querySelector(`[data-playerid='${m}'] video`)&&document.querySelector(`[data-playerid='${m}'] video`).setAttribute("data-poster",D.poster_thumbnail);const $e=["play-large",D.restart?"restart":"",D.rewind?"rewind":"","play",D.fast_forward?"fast-forward":"","progress","current-time","duration","mute","volume","captions","settings",D.pip?"pip":"","airplay",D.download?"download":"",D.fullscreen?"fullscreen":""].filter(Se=>Se!=="");new Plyr(Ne,{controls:$e,seekTime:10,poster:D.poster_thumbnail,storage:{enabled:!0,key:"plyr_volume"},displayDuration:!0,tooltips:{controls:D.player_tooltip,seek:D.player_tooltip},hideControls:D.hide_controls,youtube:Te(Te(Te(Te(Te({},D.autoplay&&{autoplay:D.autoplay}),D.start&&{start:D.start}),D.end&&{end:D.end}),D.rel&&{rel:D.rel}),D.fullscreen&&{fs:D.fullscreen}),vimeo:Te(Te(Te(Te({byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,controls:!1},D.t&&{t:D.t}),D.vautoplay&&{autoplay:D.vautoplay}),D.autopause&&{autopause:D.autopause}),D.dnt&&{dnt:D.dnt})}),Z.classList.add("plyr-initialized");const Ee=Z.querySelector(".plyr__poster");if(Ee){const Se=setInterval(()=>{Ee&&Ee.style.backgroundImage&&(Z.style.opacity="1",clearInterval(Se))},200)}}const Fe=setInterval(()=>{let Ne=document.querySelector(`[data-playerid="${m}"] [data-plyr="pip"]`);if(Ne){clearInterval(Fe);let $e=document.querySelector(`[data-playerid="${m}"]`).getAttribute("data-options");if($e=JSON.parse($e),!$e.self_hosted){const Ee=document.querySelector(`[data-playerid="${m}"] .plyr__video-wrapper`);if(Ne.addEventListener("click",()=>{Ee.classList.toggle("pip-mode");let Se=Ee.parentElement;for(;Se;)Se.style.zIndex="9999",Se=Se.parentElement}),$e.pip){Ee.appendChild(je),Ee.appendChild(he),Ee.appendChild(fe);const Se=document.querySelector(`[data-playerid="${m}"] .plyr__video-wrapper .pip-play`),ut=document.querySelector(`[data-playerid="${m}"] .plyr__video-wrapper .pip-pause`);document.querySelector(`[data-playerid="${m}"] .plyr__video-wrapper .pip-close`).addEventListener("click",()=>{Ee.classList.remove("pip-mode"),console.log(Ee.classList)}),Ee.addEventListener("click",()=>{const vt=document.querySelector(`[data-playerid="${m}"] .plyr__controls [data-plyr="play"]`).getAttribute("aria-pressed");console.log(vt),vt==="true"?(ut.style.display="none",Se.style.display="flex"):(Se.style.display="none",ut.style.display="flex")})}}}},200)}/*! @vimeo/player v2.20.1 | (c) 2023 Vimeo | MIT License | https://github.com/vimeo/player.js */(function(Z,m){typeof exports=="object"&&typeof module!="undefined"?module.exports=m():typeof define=="function"&&define.amd?define(m):((Z=typeof globalThis!="undefined"?globalThis:Z||self).Vimeo=Z.Vimeo||{},Z.Vimeo.Player=m())})(void 0,function(){function Z(y,g){var d,b=Object.keys(y);return Object.getOwnPropertySymbols&&(d=Object.getOwnPropertySymbols(y),g&&(d=d.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),b.push.apply(b,d)),b}function m(y){for(var g=1;g<arguments.length;g++){var d=arguments[g]!=null?arguments[g]:{};g%2?Z(Object(d),!0).forEach(function(b){He(y,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(d)):Z(Object(d)).forEach(function(b){Object.defineProperty(y,b,Object.getOwnPropertyDescriptor(d,b))})}return y}function D(){D=function(){return y};var y={},g=Object.prototype,d=g.hasOwnProperty,b=Object.defineProperty||function(h,x,F){h[x]=F.value},T=typeof Symbol=="function"?Symbol:{},k=T.iterator||"@@iterator",M=T.asyncIterator||"@@asyncIterator",A=T.toStringTag||"@@toStringTag";function L(h,x,F){return Object.defineProperty(h,x,{value:F,enumerable:!0,configurable:!0,writable:!0}),h[x]}try{L({},"")}catch(h){L=function(x,F,S){return x[F]=S}}function Y(h,x,F,S){var W,me,re,ce,pt=x&&x.prototype instanceof H?x:H,st=Object.create(pt.prototype),mt=new q(S||[]);return b(st,"_invoke",{value:(W=h,me=F,re=mt,ce="suspendedStart",function(ft,ue){if(ce==="executing")throw new Error("Generator is already running");if(ce==="completed"){if(ft==="throw")throw ue;return U()}for(re.method=ft,re.arg=ue;;){var Ve=re.delegate;if(Ve){var V=function rt(Ze,ae){var ct=ae.method,et=Ze.iterator[ct];if(et===void 0)return ae.delegate=null,ct==="throw"&&Ze.iterator.return&&(ae.method="return",ae.arg=void 0,rt(Ze,ae),ae.method==="throw")||ct!=="return"&&(ae.method="throw",ae.arg=new TypeError("The iterator does not provide a '"+ct+"' method")),K;var At=se(et,Ze.iterator,ae.arg);if(At.type==="throw")return ae.method="throw",ae.arg=At.arg,ae.delegate=null,K;var tt=At.arg;return tt?tt.done?(ae[Ze.resultName]=tt.value,ae.next=Ze.nextLoc,ae.method!=="return"&&(ae.method="next",ae.arg=void 0),ae.delegate=null,K):tt:(ae.method="throw",ae.arg=new TypeError("iterator result is not an object"),ae.delegate=null,K)}(Ve,re);if(V){if(V===K)continue;return V}}if(re.method==="next")re.sent=re._sent=re.arg;else if(re.method==="throw"){if(ce==="suspendedStart")throw ce="completed",re.arg;re.dispatchException(re.arg)}else re.method==="return"&&re.abrupt("return",re.arg);ce="executing";var ze=se(W,me,re);if(ze.type==="normal"){if(ce=re.done?"completed":"suspendedYield",ze.arg===K)continue;return{value:ze.arg,done:re.done}}ze.type==="throw"&&(ce="completed",re.method="throw",re.arg=ze.arg)}})}),st}function se(h,x,F){try{return{type:"normal",arg:h.call(x,F)}}catch(S){return{type:"throw",arg:S}}}y.wrap=Y;var K={};function H(){}function B(){}function de(){}var ne={};L(ne,k,function(){return this});var ye=Object.getPrototypeOf,xe=ye&&ye(ye(N([])));xe&&xe!==g&&d.call(xe,k)&&(ne=xe);var Q=de.prototype=H.prototype=Object.create(ne);function ke(h){["next","throw","return"].forEach(function(x){L(h,x,function(F){return this._invoke(x,F)})})}function be(h,x){var F;b(this,"_invoke",{value:function(S,W){function me(){return new x(function(re,ce){(function pt(st,mt,ft,ue){var Ve=se(h[st],h,mt);if(Ve.type!=="throw"){var V=Ve.arg,ze=V.value;return ze&&typeof ze=="object"&&d.call(ze,"__await")?x.resolve(ze.__await).then(function(rt){pt("next",rt,ft,ue)},function(rt){pt("throw",rt,ft,ue)}):x.resolve(ze).then(function(rt){V.value=rt,ft(V)},function(rt){return pt("throw",rt,ft,ue)})}ue(Ve.arg)})(S,W,re,ce)})}return F=F?F.then(me,me):me()}})}function Oe(h){var x={tryLoc:h[0]};1 in h&&(x.catchLoc=h[1]),2 in h&&(x.finallyLoc=h[2],x.afterLoc=h[3]),this.tryEntries.push(x)}function We(h){var x=h.completion||{};x.type="normal",delete x.arg,h.completion=x}function q(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(Oe,this),this.reset(!0)}function N(h){if(h){var x=h[k];if(x)return x.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var F=-1,S=function W(){for(;++F<h.length;)if(d.call(h,F))return W.value=h[F],W.done=!1,W;return W.value=void 0,W.done=!0,W};return S.next=S}}return{next:U}}function U(){return{value:void 0,done:!0}}return b(Q,"constructor",{value:B.prototype=de,configurable:!0}),b(de,"constructor",{value:B,configurable:!0}),B.displayName=L(de,A,"GeneratorFunction"),y.isGeneratorFunction=function(h){var x=typeof h=="function"&&h.constructor;return!!x&&(x===B||(x.displayName||x.name)==="GeneratorFunction")},y.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,de):(h.__proto__=de,L(h,A,"GeneratorFunction")),h.prototype=Object.create(Q),h},y.awrap=function(h){return{__await:h}},ke(be.prototype),L(be.prototype,M,function(){return this}),y.AsyncIterator=be,y.async=function(h,x,F,S,W){W===void 0&&(W=Promise);var me=new be(Y(h,x,F,S),W);return y.isGeneratorFunction(x)?me:me.next().then(function(re){return re.done?re.value:me.next()})},ke(Q),L(Q,A,"Generator"),L(Q,k,function(){return this}),L(Q,"toString",function(){return"[object Generator]"}),y.keys=function(h){var x=Object(h),F=[];for(var S in x)F.push(S);return F.reverse(),function W(){for(;F.length;){var me=F.pop();if(me in x)return W.value=me,W.done=!1,W}return W.done=!0,W}},y.values=N,q.prototype={constructor:q,reset:function(h){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(We),!h)for(var x in this)x.charAt(0)==="t"&&d.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(h){if(this.done)throw h;var x=this;function F(pt,st){return me.type="throw",me.arg=h,x.next=pt,st&&(x.method="next",x.arg=void 0),!!st}for(var S=this.tryEntries.length-1;0<=S;--S){var W=this.tryEntries[S],me=W.completion;if(W.tryLoc==="root")return F("end");if(W.tryLoc<=this.prev){var re=d.call(W,"catchLoc"),ce=d.call(W,"finallyLoc");if(re&&ce){if(this.prev<W.catchLoc)return F(W.catchLoc,!0);if(this.prev<W.finallyLoc)return F(W.finallyLoc)}else if(re){if(this.prev<W.catchLoc)return F(W.catchLoc,!0)}else{if(!ce)throw new Error("try statement without catch or finally");if(this.prev<W.finallyLoc)return F(W.finallyLoc)}}}},abrupt:function(h,x){for(var F=this.tryEntries.length-1;0<=F;--F){var S=this.tryEntries[F];if(S.tryLoc<=this.prev&&d.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var W=S;break}}W&&(h==="break"||h==="continue")&&W.tryLoc<=x&&x<=W.finallyLoc&&(W=null);var me=W?W.completion:{};return me.type=h,me.arg=x,W?(this.method="next",this.next=W.finallyLoc,K):this.complete(me)},complete:function(h,x){if(h.type==="throw")throw h.arg;return h.type==="break"||h.type==="continue"?this.next=h.arg:h.type==="return"?(this.rval=this.arg=h.arg,this.method="return",this.next="end"):h.type==="normal"&&x&&(this.next=x),K},finish:function(h){for(var x=this.tryEntries.length-1;0<=x;--x){var F=this.tryEntries[x];if(F.finallyLoc===h)return this.complete(F.completion,F.afterLoc),We(F),K}},catch:function(h){for(var x=this.tryEntries.length-1;0<=x;--x){var F=this.tryEntries[x];if(F.tryLoc===h){var S,W=F.completion;return W.type==="throw"&&(S=W.arg,We(F)),S}}throw new Error("illegal catch attempt")},delegateYield:function(h,x,F){return this.delegate={iterator:N(h),resultName:x,nextLoc:F},this.method==="next"&&(this.arg=void 0),K}},y}function je(y,g,d,b,T,k,M){try{var A=y[k](M),L=A.value}catch(Y){return void d(Y)}A.done?g(L):Promise.resolve(L).then(b,T)}function he(y){return function(){var g=this,d=arguments;return new Promise(function(b,T){var k=y.apply(g,d);function M(L){je(k,b,T,M,A,"next",L)}function A(L){je(k,b,T,M,A,"throw",L)}M(void 0)})}}function fe(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function Fe(y,g){for(var d=0;d<g.length;d++){var b=g[d];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,Nt(b.key),b)}}function Le(y,g,d){return g&&Fe(y.prototype,g),Object.defineProperty(y,"prototype",{writable:!1}),y}function He(y,g,d){return(g=Nt(g))in y?Object.defineProperty(y,g,{value:d,enumerable:!0,configurable:!0,writable:!0}):y[g]=d,y}function Ne(y){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)})(y)}function $e(y,g){return($e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,b){return d.__proto__=b,d})(y,g)}function Ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}function Se(y,g,d){return(Se=Ee()?Reflect.construct.bind():function(b,T,k){var M=[null];M.push.apply(M,T);var A=new(Function.bind.apply(b,M));return k&&$e(A,k.prototype),A}).apply(null,arguments)}function ut(y){var g=typeof Map=="function"?new Map:void 0;return(ut=function(d){if(d===null||(b=d,Function.toString.call(b).indexOf("[native code]")===-1))return d;var b;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(g!==void 0){if(g.has(d))return g.get(d);g.set(d,T)}function T(){return Se(d,arguments,Ne(this).constructor)}return T.prototype=Object.create(d.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),$e(T,d)})(y)}function ie(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function vt(y){var g=Ee();return function(){var d,b=Ne(y);return function(T,k){if(k&&(typeof k=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ie(T)}(this,g?(d=Ne(this).constructor,Reflect.construct(b,arguments,d)):b.apply(this,arguments))}}function Nt(y){var g=function(d,b){if(typeof d!="object"||d===null)return d;var T=d[Symbol.toPrimitive];if(T===void 0)return(b==="string"?String:Number)(d);var k=T.call(d,b);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string");return typeof g=="symbol"?g:String(g)}var Ye=typeof global!="undefined"&&{}.toString.call(global)==="[object global]";function we(y,g){return y.indexOf(g.toLowerCase())===0?y:"".concat(g.toLowerCase()).concat(y.substr(0,1).toUpperCase()).concat(y.substr(1))}function Ue(y){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(y)}function wt(y){return/^https:\/\/player\.vimeo\.com\/video\/\d+/.test(y)}function at(y){var g,d=0<arguments.length&&y!==void 0?y:{},b=d.id,T=d.url,k=b||T;if(!k)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(g=k,!isNaN(parseFloat(g))&&isFinite(g)&&Math.floor(g)==g)return"https://vimeo.com/".concat(k);if(Ue(k))return k.replace("http:","https:");throw b?new TypeError("".concat(b," is not a valid video id.")):new TypeError("".concat(k," is not a vimeo.com url."))}function kt(y,g,d,b,T){var k=3<arguments.length&&b!==void 0?b:"addEventListener",M=4<arguments.length&&T!==void 0?T:"removeEventListener",A=typeof g=="string"?[g]:g;return A.forEach(function(L){y[k](L,d)}),{cancel:function(){return A.forEach(function(L){return y[M](L,d)})}}}var Pt=Array.prototype.indexOf!==void 0,Ct=typeof window!="undefined"&&window.postMessage!==void 0;if(!(Ye||Pt&&Ct))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var Tt,o,yt,Qe,te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ot(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(Qe(this,"_id","_WeakMap_"+Et()+"."+Et()),0<arguments.length)throw new TypeError("WeakMap iterable is not supported")}function J(y,g){if(!it(y)||!o.call(y,"_id"))throw new TypeError(g+" method called on incompatible receiver "+typeof y)}function Et(){return Math.random().toString().substring(2)}function it(y){return Object(y)===y}(Tt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:te).WeakMap||(o=Object.prototype.hasOwnProperty,yt=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch(y){}}(),Qe=function(y,g,d){yt?Object.defineProperty(y,g,{configurable:!0,writable:!0,value:d}):y[g]=d},Tt.WeakMap=(Qe(ot.prototype,"delete",function(y){if(J(this,"delete"),!it(y))return!1;var g=y[this._id];return!(!g||g[0]!==y)&&(delete y[this._id],!0)}),Qe(ot.prototype,"get",function(y){if(J(this,"get"),it(y)){var g=y[this._id];return g&&g[0]===y?g[1]:void 0}}),Qe(ot.prototype,"has",function(y){if(J(this,"has"),!it(y))return!1;var g=y[this._id];return!(!g||g[0]!==y)}),Qe(ot.prototype,"set",function(y,g){if(J(this,"set"),!it(y))throw new TypeError("Invalid value used as weak map key");var d=y[this._id];return d&&d[0]===y?d[1]=g:Qe(y,this._id,[y,g]),this}),Qe(ot,"_polyfill",!0),ot));var C,_e=(function(y){var g,d,b;b=function(){var T,k,M,A,L,Y,se=Object.prototype.toString,K=typeof setImmediate!="undefined"?function(q){return setImmediate(q)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(q,N,U,h){return Object.defineProperty(q,N,{value:U,writable:!0,configurable:h!==!1})}}catch(q){T=function(N,U,h){return N[U]=h,N}}function H(q,N){this.fn=q,this.self=N,this.next=void 0}function B(q,N){M.add(q,N),k=k||K(M.drain)}function de(q){var N,U=typeof q;return q==null||U!="object"&&U!="function"||(N=q.then),typeof N=="function"&&N}function ne(){for(var q=0;q<this.chain.length;q++)(function(N,U,h){var x,F;try{U===!1?h.reject(N.msg):(x=U===!0?N.msg:U.call(void 0,N.msg))===h.promise?h.reject(TypeError("Promise-chain cycle")):(F=de(x))?F.call(x,h.resolve,h.reject):h.resolve(x)}catch(S){h.reject(S)}})(this,this.state===1?this.chain[q].success:this.chain[q].failure,this.chain[q]);this.chain.length=0}function ye(q){var N,U=this;if(!U.triggered){U.triggered=!0,U.def&&(U=U.def);try{(N=de(q))?B(function(){var h=new ke(U);try{N.call(q,function(){ye.apply(h,arguments)},function(){xe.apply(h,arguments)})}catch(x){xe.call(h,x)}}):(U.msg=q,U.state=1,0<U.chain.length&&B(ne,U))}catch(h){xe.call(new ke(U),h)}}}function xe(q){var N=this;N.triggered||(N.triggered=!0,N.def&&(N=N.def),N.msg=q,N.state=2,0<N.chain.length&&B(ne,N))}function Q(q,N,U,h){for(var x=0;x<N.length;x++)(function(F){q.resolve(N[F]).then(function(S){U(F,S)},h)})(x)}function ke(q){this.def=q,this.triggered=!1}function be(q){this.promise=q,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Oe(q){if(typeof q!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var N=new be(this);this.then=function(U,h){var x={success:typeof U!="function"||U,failure:typeof h=="function"&&h};return x.promise=new this.constructor(function(F,S){if(typeof F!="function"||typeof S!="function")throw TypeError("Not a function");x.resolve=F,x.reject=S}),N.chain.push(x),N.state!==0&&B(ne,N),x.promise},this.catch=function(U){return this.then(void 0,U)};try{q.call(void 0,function(U){ye.call(N,U)},function(U){xe.call(N,U)})}catch(U){xe.call(N,U)}}var We=T({},"constructor",Oe,!(M={add:function(q,N){Y=new H(q,N),L?L.next=Y:A=Y,L=Y,Y=void 0},drain:function(){var q=A;for(A=L=k=void 0;q;)q.fn.call(q.self),q=q.next}}));return T(Oe.prototype=We,"__NPO__",0,!1),T(Oe,"resolve",function(q){return q&&typeof q=="object"&&q.__NPO__===1?q:new this(function(N,U){if(typeof N!="function"||typeof U!="function")throw TypeError("Not a function");N(q)})}),T(Oe,"reject",function(q){return new this(function(N,U){if(typeof N!="function"||typeof U!="function")throw TypeError("Not a function");U(q)})}),T(Oe,"all",function(q){var N=this;return se.call(q)!="[object Array]"?N.reject(TypeError("Not an array")):q.length===0?N.resolve([]):new N(function(U,h){if(typeof U!="function"||typeof h!="function")throw TypeError("Not a function");var x=q.length,F=Array(x),S=0;Q(N,q,function(W,me){F[W]=me,++S===x&&U(F)},h)})}),T(Oe,"race",function(q){var N=this;return se.call(q)!="[object Array]"?N.reject(TypeError("Not an array")):new N(function(U,h){if(typeof U!="function"||typeof h!="function")throw TypeError("Not a function");Q(N,q,function(x,F){U(F)},h)})}),Oe},(d=te)[g="Promise"]=d[g]||b(),y.exports&&(y.exports=d[g])}(C={exports:{}}),C.exports),pe=new WeakMap;function Be(y,g,d){var b=pe.get(y.element)||{};g in b||(b[g]=[]),b[g].push(d),pe.set(y.element,b)}function Je(y,g){return(pe.get(y.element)||{})[g]||[]}function ge(y,g,d){var b=pe.get(y.element)||{};if(!b[g])return!0;if(!d)return b[g]=[],pe.set(y.element,b),!0;var T=b[g].indexOf(d);return T!==-1&&b[g].splice(T,1),pe.set(y.element,b),b[g]&&b[g].length===0}function Ae(y){if(typeof y=="string")try{y=JSON.parse(y)}catch(g){return console.warn(g),{}}return y}function $(y,g,d){var b,T;y.element.contentWindow&&y.element.contentWindow.postMessage&&(b={method:g},d!==void 0&&(b.value=d),8<=(T=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1")))&&T<10&&(b=JSON.stringify(b)),y.element.contentWindow.postMessage(b,y.origin))}function ht(y,g){var d,b,T=[];(g=Ae(g)).event?(g.event==="error"&&Je(y,g.data.method).forEach(function(k){var M=new Error(g.data.message);M.name=g.data.name,k.reject(M),ge(y,g.data.method,k)}),T=Je(y,"event:".concat(g.event)),d=g.data):!g.method||(b=function(k,M){var A=Je(k,M);if(A.length<1)return!1;var L=A.shift();return ge(k,M,L),L}(y,g.method))&&(T.push(b),d=g.value),T.forEach(function(k){try{if(typeof k=="function")return void k.call(y,d);k.resolve(d)}catch(M){}})}var Re=["autopause","autoplay","background","byline","color","colors","controls","dnt","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function Xe(y,g){var d=1<arguments.length&&g!==void 0?g:{};return Re.reduce(function(b,T){var k=y.getAttribute("data-vimeo-".concat(T));return!k&&k!==""||(b[T]=k===""?1:k),b},d)}function ee(y,g){var d=y.html;if(!g)throw new TypeError("An element must be provided");if(g.getAttribute("data-vimeo-initialized")!==null)return g.querySelector("iframe");var b=document.createElement("div");return b.innerHTML=d,g.appendChild(b.firstChild),g.setAttribute("data-vimeo-initialized","true"),g.querySelector("iframe")}function bt(y,g,d){var b=1<arguments.length&&g!==void 0?g:{},T=2<arguments.length?d:void 0;return new Promise(function(k,M){if(!Ue(y))throw new TypeError("".concat(y," is not a vimeo.com url."));var A="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(y));for(var L in b)b.hasOwnProperty(L)&&(A+="&".concat(L,"=").concat(encodeURIComponent(b[L])));var Y=new("XDomainRequest"in window?XDomainRequest:XMLHttpRequest);Y.open("GET",A,!0),Y.onload=function(){if(Y.status!==404)if(Y.status!==403)try{var se=JSON.parse(Y.responseText);if(se.domain_status_code===403)return ee(se,T),void M(new Error("".concat(y," is not embeddable.")));k(se)}catch(K){M(K)}else M(new Error("".concat(y," is not embeddable.")));else M(new Error("".concat(y," was not found.")))},Y.onerror=function(){var se=Y.status?" (".concat(Y.status,")"):"";M(new Error("There was an error fetching the embed code from Vimeo".concat(se,".")))},Y.send()})}var Ge,X,lt,nt={role:"viewer",autoPlayMuted:!0,allowedDrift:.3,maxAllowedDrift:1,minCheckInterval:.1,maxRateAdjustment:.2,maxTimeToCatchUp:1},R=function(){(function(k,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(M&&M.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),M&&$e(k,M)})(T,ut(EventTarget));var y,g,d,b=vt(T);function T(k,M){var A,L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},Y=3<arguments.length?arguments[3]:void 0;return fe(this,T),He(ie(A=b.call(this)),"logger",void 0),He(ie(A),"speedAdjustment",0),He(ie(A),"adjustSpeed",function(){var se=he(D().mark(function K(H,B){var de;return D().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(A.speedAdjustment===B)return ne.abrupt("return");ne.next=2;break;case 2:return ne.next=4,H.getPlaybackRate();case 4:return ne.t0=ne.sent,ne.t1=A.speedAdjustment,ne.t2=ne.t0-ne.t1,ne.t3=B,de=ne.t2+ne.t3,A.log("New playbackRate:  ".concat(de)),ne.next=12,H.setPlaybackRate(de);case 12:A.speedAdjustment=B;case 13:case"end":return ne.stop()}},K)}));return function(K,H){return se.apply(this,arguments)}}()),A.logger=Y,A.init(M,k,m(m({},nt),L)),A}return Le(T,[{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnect"))}},{key:"init",value:(d=he(D().mark(function k(M,A,L){var Y,se,K,H=this;return D().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.waitForTOReadyState(M,"open");case 2:if(L.role==="viewer")return B.next=5,this.updatePlayer(M,A,L);B.next=10;break;case 5:Y=kt(M,"change",function(){return H.updatePlayer(M,A,L)}),se=this.maintainPlaybackPosition(M,A,L),this.addEventListener("disconnect",function(){se.cancel(),Y.cancel()}),B.next=14;break;case 10:return B.next=12,this.updateTimingObject(M,A);case 12:K=kt(A,["seeked","play","pause","ratechange"],function(){return H.updateTimingObject(M,A)},"on","off"),this.addEventListener("disconnect",function(){return K.cancel()});case 14:case"end":return B.stop()}},k,this)})),function(k,M,A){return d.apply(this,arguments)})},{key:"updateTimingObject",value:(g=he(D().mark(function k(M,A){return D().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.t0=M,L.next=3,A.getCurrentTime();case 3:return L.t1=L.sent,L.next=6,A.getPaused();case 6:if(!L.sent){L.next=10;break}L.t2=0,L.next=13;break;case 10:return L.next=12,A.getPlaybackRate();case 12:L.t2=L.sent;case 13:L.t3=L.t2,L.t4={position:L.t1,velocity:L.t3},L.t0.update.call(L.t0,L.t4);case 16:case"end":return L.stop()}},k)})),function(k,M){return g.apply(this,arguments)})},{key:"updatePlayer",value:(y=he(D().mark(function k(M,A,L){var Y,se,K;return D().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Y=M.query(),se=Y.position,K=Y.velocity,typeof se=="number"&&A.setCurrentTime(se),typeof K!="number"){H.next=25;break}if(K===0)return H.next=6,A.getPaused();H.next=11;break;case 6:if(H.t0=H.sent,H.t0!==!1){H.next=9;break}A.pause();case 9:H.next=25;break;case 11:if(0<K)return H.next=14,A.getPaused();H.next=25;break;case 14:if(H.t1=H.sent,H.t1===!0)return H.next=18,A.play().catch(function(){var B=he(D().mark(function de(ne){return D().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(ne.name==="NotAllowedError"&&L.autoPlayMuted)return ye.next=3,A.setMuted(!0);ye.next=5;break;case 3:return ye.next=5,A.play().catch(function(xe){return console.error("Couldn't play the video from TimingSrcConnector. Error:",xe)});case 5:case"end":return ye.stop()}},de)}));return function(de){return B.apply(this,arguments)}}());H.next=19;break;case 18:this.updatePlayer(M,A,L);case 19:return H.next=21,A.getPlaybackRate();case 21:if(H.t2=H.sent,H.t3=K,H.t2===H.t3){H.next=25;break}A.setPlaybackRate(K);case 25:case"end":return H.stop()}},k,this)})),function(k,M,A){return y.apply(this,arguments)})},{key:"maintainPlaybackPosition",value:function(k,M,A){var L=this,Y=A.allowedDrift,se=A.maxAllowedDrift,K=A.minCheckInterval,H=A.maxRateAdjustment,B=A.maxTimeToCatchUp,de=1e3*Math.min(B,Math.max(K,se)),ne=function(){var xe=he(D().mark(function Q(){var ke,be,Oe,We,q;return D().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(N.t0=k.query().velocity===0,N.t0){N.next=6;break}return N.next=4,M.getPaused();case 4:N.t1=N.sent,N.t0=N.t1===!0;case 6:if(N.t0)return N.abrupt("return");N.next=8;break;case 8:return N.t2=k.query().position,N.next=11,M.getCurrentTime();case 11:if(N.t3=N.sent,ke=N.t2-N.t3,be=Math.abs(ke),L.log("Drift: ".concat(ke)),se<be)return N.next=18,L.adjustSpeed(M,0);N.next=22;break;case 18:M.setCurrentTime(k.query().position),L.log("Resync by currentTime"),N.next=29;break;case 22:if(Y<be)return q=(Oe=be/B)<(We=H)?(We-Oe)/2:We,N.next=28,L.adjustSpeed(M,q*Math.sign(ke));N.next=29;break;case 28:L.log("Resync by playbackRate");case 29:case"end":return N.stop()}},Q)}));return function(){return xe.apply(this,arguments)}}(),ye=setInterval(function(){return ne()},de);return{cancel:function(){return clearInterval(ye)}}}},{key:"log",value:function(k){var M;(M=this.logger)!==null&&M!==void 0&&M.call(this,"TimingSrcConnector: ".concat(k))}},{key:"waitForTOReadyState",value:function(k,M){return new Promise(function(A){(function L(){k.readyState===M?A():k.addEventListener("readystatechange",L,{once:!0})})()})}}]),T}(),De=new WeakMap,dt=new WeakMap,E={},St=function(){function y(d){var b,T,k=this,M=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(fe(this,y),window.jQuery&&d instanceof jQuery&&(1<d.length&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),d=d[0]),typeof document!="undefined"&&typeof d=="string"&&(d=document.getElementById(d)),b=d,!(b&&b.nodeType===1&&"nodeName"in b&&b.ownerDocument&&b.ownerDocument.defaultView))throw new TypeError("You must pass either a valid element or a valid id.");if(d.nodeName==="IFRAME"||(T=d.querySelector("iframe"))&&(d=T),d.nodeName==="IFRAME"&&!Ue(d.getAttribute("src")||""))throw new Error("The player element passed isnt a Vimeo embed.");if(De.has(d))return De.get(d);this._window=d.ownerDocument.defaultView,this.element=d,this.origin="*";var A,L=new _e(function(Y,se){var K;k._onMessage=function(H){if(Ue(H.origin)&&k.element.contentWindow===H.source){k.origin==="*"&&(k.origin=H.origin);var B=Ae(H.data);if(B&&B.event==="error"&&B.data&&B.data.method==="ready"){var de=new Error(B.data.message);return de.name=B.data.name,void se(de)}var ne=B&&B.event==="ready",ye=B&&B.method==="ping";if(ne||ye)return k.element.setAttribute("data-ready","true"),void Y();ht(k,B)}},k._window.addEventListener("message",k._onMessage),k.element.nodeName!=="IFRAME"&&bt(at(K=Xe(d,M)),K,d).then(function(H){var B,de,ne,ye=ee(H,d);return k.element=ye,k._originalElement=d,B=d,de=ye,ne=pe.get(B),pe.set(de,ne),pe.delete(B),De.set(k.element,k),H}).catch(se)});return dt.set(this,L),De.set(this.element,this),this.element.nodeName==="IFRAME"&&$(this,"ping"),E.isEnabled&&(A=function(){return E.exit()},this.fullscreenchangeHandler=function(){(E.isFullscreen?Be:ge)(k,"event:exitFullscreen",A),k.ready().then(function(){$(k,"fullscreenchange",E.isFullscreen)})},E.on("fullscreenchange",this.fullscreenchangeHandler)),this}var g;return Le(y,[{key:"callMethod",value:function(d,b){var T=this,k=1<arguments.length&&b!==void 0?b:{};return new _e(function(M,A){return T.ready().then(function(){Be(T,d,{resolve:M,reject:A}),$(T,d,k)}).catch(A)})}},{key:"get",value:function(d){var b=this;return new _e(function(T,k){return d=we(d,"get"),b.ready().then(function(){Be(b,d,{resolve:T,reject:k}),$(b,d)}).catch(k)})}},{key:"set",value:function(d,b){var T=this;return new _e(function(k,M){if(d=we(d,"set"),b==null)throw new TypeError("There must be a value to set.");return T.ready().then(function(){Be(T,d,{resolve:k,reject:M}),$(T,d,b)}).catch(M)})}},{key:"on",value:function(d,b){if(!d)throw new TypeError("You must pass an event name.");if(!b)throw new TypeError("You must pass a callback function.");if(typeof b!="function")throw new TypeError("The callback must be a function.");Je(this,"event:".concat(d)).length===0&&this.callMethod("addEventListener",d).catch(function(){}),Be(this,"event:".concat(d),b)}},{key:"off",value:function(d,b){if(!d)throw new TypeError("You must pass an event name.");if(b&&typeof b!="function")throw new TypeError("The callback must be a function.");ge(this,"event:".concat(d),b)&&this.callMethod("removeEventListener",d).catch(function(T){})}},{key:"loadVideo",value:function(d){return this.callMethod("loadVideo",d)}},{key:"ready",value:function(){var d=dt.get(this)||new _e(function(b,T){T(new Error("Unknown player. Probably unloaded."))});return _e.resolve(d)}},{key:"addCuePoint",value:function(d,b){var T=1<arguments.length&&b!==void 0?b:{};return this.callMethod("addCuePoint",{time:d,data:T})}},{key:"removeCuePoint",value:function(d){return this.callMethod("removeCuePoint",d)}},{key:"enableTextTrack",value:function(d,b){if(!d)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:d,kind:b})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return E.isEnabled?E.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return E.isEnabled?E.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return E.isEnabled?_e.resolve(E.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"remotePlaybackPrompt",value:function(){return this.callMethod("remotePlaybackPrompt")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var d=this;return new _e(function(b){var T;dt.delete(d),De.delete(d.element),d._originalElement&&(De.delete(d._originalElement),d._originalElement.removeAttribute("data-vimeo-initialized")),d.element&&d.element.nodeName==="IFRAME"&&d.element.parentNode&&(d.element.parentNode.parentNode&&d._originalElement&&d._originalElement!==d.element.parentNode?d.element.parentNode.parentNode.removeChild(d.element.parentNode):d.element.parentNode.removeChild(d.element)),d.element&&d.element.nodeName==="DIV"&&d.element.parentNode&&(d.element.removeAttribute("data-vimeo-initialized"),(T=d.element.querySelector("iframe"))&&T.parentNode&&(T.parentNode.parentNode&&d._originalElement&&d._originalElement!==T.parentNode?T.parentNode.parentNode.removeChild(T.parentNode):T.parentNode.removeChild(T))),d._window.removeEventListener("message",d._onMessage),E.isEnabled&&E.off("fullscreenchange",d.fullscreenchangeHandler),b()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(d){return this.set("autopause",d)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(d){return this.set("cameraProps",d)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"getColors",value:function(){return _e.all([this.get("colorOne"),this.get("colorTwo"),this.get("colorThree"),this.get("colorFour")])}},{key:"setColor",value:function(d){return this.set("color",d)}},{key:"setColors",value:function(d){if(!Array.isArray(d))return new _e(function(k,M){return M(new TypeError("Argument must be an array."))});var b=new _e(function(k){return k(null)}),T=[d[0]?this.set("colorOne",d[0]):b,d[1]?this.set("colorTwo",d[1]):b,d[2]?this.set("colorThree",d[2]):b,d[3]?this.set("colorFour",d[3]):b];return _e.all(T)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(d){return this.set("currentTime",d)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(d){return this.set("loop",d)}},{key:"setMuted",value:function(d){return this.set("muted",d)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(d){return this.set("playbackRate",d)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(d){return this.set("quality",d)}},{key:"getRemotePlaybackAvailability",value:function(){return this.get("remotePlaybackAvailability")}},{key:"getRemotePlaybackState",value:function(){return this.get("remotePlaybackState")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(d){return this.set("volume",d)}},{key:"setTimingSrc",value:(g=he(D().mark(function d(b,T){var k,M=this;return D().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(b){A.next=2;break}throw new TypeError("A Timing Object must be provided.");case 2:return A.next=4,this.ready();case 4:return k=new R(this,b,T),$(this,"notifyTimingObjectConnect"),k.addEventListener("disconnect",function(){return $(M,"notifyTimingObjectDisconnect")}),A.abrupt("return",k);case 8:case"end":return A.stop()}},d,this)})),function(d,b){return g.apply(this,arguments)})}]),y}();return Ye||(Ge=function(){for(var y,g=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],d=0,b=g.length,T={};d<b;d++)if((y=g[d])&&y[1]in document){for(d=0;d<y.length;d++)T[g[0][d]]=y[d];return T}return!1}(),X={fullscreenchange:Ge.fullscreenchange,fullscreenerror:Ge.fullscreenerror},lt={request:function(y){return new Promise(function(g,d){function b(){lt.off("fullscreenchange",b),g()}lt.on("fullscreenchange",b);var T=(y=y||document.documentElement)[Ge.requestFullscreen]();T instanceof Promise&&T.then(b).catch(d)})},exit:function(){return new Promise(function(y,g){var d,b;lt.isFullscreen?(d=function T(){lt.off("fullscreenchange",T),y()},lt.on("fullscreenchange",d),(b=document[Ge.exitFullscreen]())instanceof Promise&&b.then(d).catch(g)):y()})},on:function(y,g){var d=X[y];d&&document.addEventListener(d,g)},off:function(y,g){var d=X[y];d&&document.removeEventListener(d,g)}},Object.defineProperties(lt,{isFullscreen:{get:function(){return!!document[Ge.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[Ge.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[Ge.fullscreenEnabled]}}}),E=lt,function(y){function g(b){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(b))}var d=document;[].slice.call(d.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")).forEach(function(b){try{if(b.getAttribute("data-vimeo-defer")!==null)return;var T=Xe(b);bt(at(T),T,b).then(function(k){return ee(k,b)}).catch(g)}catch(k){g(k)}})}(),function(y){var g=document;window.VimeoPlayerResizeEmbeds_||(window.VimeoPlayerResizeEmbeds_=!0,window.addEventListener("message",function(d){if(Ue(d.origin)&&d.data&&d.data.event==="spacechange"){for(var b=g.querySelectorAll("iframe"),T=0;T<b.length;T++)if(b[T].contentWindow===d.source){b[T].parentElement.style.paddingBottom="".concat(d.data.data[0].bottom,"px");break}}}))}(),function(y){var g=document;window.VimeoSeoMetadataAppended||(window.VimeoSeoMetadataAppended=!0,window.addEventListener("message",function(d){if(Ue(d.origin)){var b=Ae(d.data);if(b&&b.event==="ready")for(var T=g.querySelectorAll("iframe"),k=0;k<T.length;k++){var M=T[k],A=M.contentWindow===d.source;wt(M.src)&&A&&new St(M).callMethod("appendVideoMetadata",window.location.href)}}}))}(),function(y){var g,d=document;window.VimeoCheckedUrlTimeParam||(window.VimeoCheckedUrlTimeParam=!0,g=function(b){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(b))},window.addEventListener("message",function(b){if(Ue(b.origin)){var T=Ae(b.data);if(T&&T.event==="ready")for(var k=d.querySelectorAll("iframe"),M=0;M<k.length;M++)(function(){var A,L=k[M],Y=L.contentWindow===b.source;wt(L.src)&&Y&&(A=new St(L)).getVideoId().then(function(se){var K,H=new RegExp("[?&]vimeo_t_".concat(se,"=([^&#]*)")).exec(window.location.href);H&&H[1]&&(K=decodeURI(H[1]),A.setCurrentTime(K))}).catch(g)})()}}))}()),St});var Me="https://www.youtube.com/s/player/9d15588c/www-widgetapi.vflset/www-widgetapi.js";try{var qe=window.trustedTypes.createPolicy("youtube-widget-api",{createScriptURL:function(Z){return Z}});Me=qe.createScriptURL(Me)}catch(Z){}var Ie;window.YT||(Ie={loading:0,loaded:0});var Ht;window.YTConfig||(Ht={host:"https://www.youtube.com"}),Ie.loading||(Ie.loading=1,function(){var Z=[];Ie.ready=function(fe){Ie.loaded?fe():Z.push(fe)},window.onYTReady=function(){Ie.loaded=1;for(var fe=0;fe<Z.length;fe++)try{Z[fe]()}catch(Fe){}},Ie.setConfig=function(fe){var Fe;for(Fe in fe)fe.hasOwnProperty(Fe)&&(Ht[Fe]=fe[Fe])};var m=document.createElement("script");m.type="text/javascript",m.id="www-widgetapi-script",m.src=Me,m.async=!0;var D=document.currentScript;if(D){var je=D.nonce||D.getAttribute("nonce");je&&m.setAttribute("nonce",je)}var he=document.getElementsByTagName("script")[0];he.parentNode.insertBefore(m,he)}())})();
