/*! For license information please see preview.js.LICENSE.txt */
!function(e,t,n,r){"use strict";e(window.document).ready(function(){t.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},t.prototype.isValidUrl=function(){return/^(https?|embedpresss?):\/\//i.test(this.toString())},t.prototype.hasShortcode=function(e){var t=new RegExp("\\["+e+"(?:\\]|.+?\\])","ig");return!!this.toString().match(t)},t.prototype.stripShortcode=function(e){var t=new RegExp("(\\["+e+"(?:\\]|.+?\\])|\\[\\/"+e+"\\])","ig");return this.toString().replace(t,"")},t.prototype.setShortcodeAttribute=function(e,t,n,r){r=void 0!==r&&r;var a=this.toString();if(a.hasShortcode(n)){var i=a.getShortcodeAttributes(n);if(i.hasOwnProperty(e)?r?i[e]=t:i[e]+=" "+t:i[e]=t,Object.keys(i).length){var o=[];for(var s in i)o.push(s+'="'+i[s]+'"');a="["+n+" "+o.join(" ")+"]"+a.stripShortcode(n)+"[/"+n+"]"}else a="["+n+"]"+a.stripShortcode(n)+"[/"+n+"]";return a}return a},t.prototype.getShortcodeAttributes=function(e){var t=this.toString();if(t.hasShortcode(e)){var n={},a=new RegExp(/\[embed\s*(.*?)\]/gi).exec(t)[1];if(a.length>0){for(var i,o=new RegExp(/(\!?\w+-?\w*)(?:="(.+?)")?/gi);i=o.exec(a);){var s,d=i[1];i[2]===r?"class"!==d.toLowerCase()&&(0===d.indexOf("!")?(d=d.replace("!",""),s="false"):s="true",n[d]=s):((s=i[2]).isBoolean()&&(s=s.isFalse()?"false":"true"),n[d]=s)}i=o=null}return a=null,n}return{}},t.prototype.isBoolean=function(){var e=this.toString().trim().toLowerCase();return e.isTrue(!1)||e.isFalse()},t.prototype.isTrue=function(e){var t=this.toString().trim().toLowerCase();switch(e=typeof e===r||e,t){case"":return!(e+="").isFalse();case"1":case"true":case"on":case"yes":case"y":return!0;default:return!1}},t.prototype.isFalse=function(){switch(this.toString().trim().toLowerCase()){case"0":case"false":case"off":case"no":case"n":case"nil":case"null":return!0;default:return!1}};var a=new RegExp("\\[/?"+n.shortcode+"\\]","gi");window.EmbedPress||(window.EmbedPress=new function(){var t=this,r=n.assetsUrl+"css",i=r;t.params={baseUrl:"",versionUID:"0"},t.iOS=/iPad|iPod|iPhone/.test(window.navigator.userAgent),t.activeWrapper=null,t.activeWrapperForModal=null,t.activeControllerPanel=null,t.loadedEditors=[],t.init=function(n){e.extend(t.params,n),t.iOS&&e(window.document.body).css("cursor","pointer"),e(t.onReady)},t.addEvent=function(e,t,n){void 0!==t.on?t.on(e,n):t["on"+e.capitalizeFirstLetter()]&&t["on"+e.capitalizeFirstLetter()].add(n)},t.isEmpty=function(e){return 0===e.length},t.isDefined=function(e){return null!=e},t.makeId=function(){for(var e="",t=0;t<5;t++)e+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return e},t.loadAsyncDynamicJsCodeFromElement=function(n,r,a){if((n=e(n)).prop("tagName")&&"script"===n.prop("tagName").toLowerCase()){var i=n.attr("src")||null;i?t.addScript(i,null,r,a):t.addScriptDeclaration(r,n.html(),a)}else{var o=e("script",n);o.length>0&&e.each(o,function(e,n){t.loadAsyncDynamicJsCodeFromElement(n,r,a)})}},t.onReady=function(){var n=function(){var e=window.setInterval(function(){var n=t.getEditors();if(n.length){t.loadedEditors=n;for(var r=0;r<t.loadedEditors.length;r++)t.onFindEditor(t.loadedEditors[r]);return window.clearInterval(e),t.loadedEditors}},250)};t.tinymceIsAvailable()&&n(),"undefined"!=typeof FLLightbox&&e.each(FLLightbox._instances,function(e){FLLightbox._instances[e].on("open",function(){setTimeout(function(){n()},500)}),FLLightbox._instances[e].on("didHideLightbox",function(){setTimeout(function(){n()},500)})})},t.tinymceIsAvailable=function(){return"object"==typeof window.tinymce||"object"==typeof window.tinyMCE},t.controllerPanelIsActive=function(){return void 0!==t.activeControllerPanel&&null!==t.activeControllerPanel},t.getEditors=function(){return window.tinymce&&window.tinymce.editors&&0!==window.tinymce.editors.length&&window.tinymce.editors||[]},t.getParsedContent=function(n,r){e.ajax({type:"POST",url:t.params.baseUrl+"wp-admin/admin-ajax.php",data:{action:"embedpress_do_ajax_request",subject:n},success:r,dataType:"json",async:!0})},t.addStylesheet=function(t,n){var r=n.getDoc().getElementsByTagName("head")[0];e('<link rel="stylesheet" type="text/css" href="'+t+'">').appendTo(r)},t.convertURLSchemeToPattern=function(e){return"(.*)((?:http|embedpress)s?:\\/\\/(?:www\\.)?"+(e=(e=(e=e.replace(/\*/g,"[a-zA-Z0-9=&_\\-\\?\\.\\/!\\+%:@,#]+")).replace(/\./g,"\\.")).replace(/\//g,"\\/"))+"[\\/]?)(.*)"},t.getProvidersURLPatterns=function(){var e=[];return t.each(n.urlSchemes,function(n){e.push(t.convertURLSchemeToPattern(n))}),e},t.addScript=function(t,n,r,a){var i=a.getDoc();void 0!==r&&r||(r=e(i.getElementsByTagName("head")[0]));var o=e(i.createElement("script"));o.attr("async",1),"function"==typeof n&&o.ready(n),o.attr("src",t),r.append(o)},t.addScriptDeclaration=function(t,n,r){var a=r.getDoc(),i=e(a.createElement("script"));e(t).append(i),i.text(n)},t.addURLsPlaceholder=function(r,a,i){var o=t.makeId(),s=["embedpress_wrapper","embedpress_placeholder","wpview","wpview-wrap"],d=r.value.getShortcodeAttributes(n.shortcode),l=d;if(Object.keys(d).length){var c=["class","href","data-href"],p="data-",u=[];for(var m in d)-1===c.indexOf(m)?0!==m.indexOf(p)?u[p+m]=d[m]:u[m]=d[m]:"class"===(m=m.replace(p,""))&&s.push(d[m]);d=u,u=p=null}("data-width"in d||"data-height"in d)&&"data-responsive"in d&&(d["data-responsive"]="false");var h=new t.Node("div",1),v={class:Array.from(new Set(s)).join(" "),"data-url":a,"data-uid":o,id:"embedpress_wrapper_"+o,"data-loading-text":"Loading your embed..."};-1===(v=e.extend({},v,d)).class.indexOf("is-loading")&&(v.class+=" is-loading"),h.attr(v);var f=new t.Node("div",1);function g(e,n){e=e||"span",n=n||"&nbsp;";var r=new t.Node(e,1);r.attr({class:"hidden"});var a=new t.Node("#text",3);return a.value=n,r.append(a),r}f.attr({id:"embedpress_controller_panel_"+o,class:"embedpress_controller_panel embedpress_ignore_mouseout hidden"}),h.append(f);var w=new t.Node("div",1);w.attr({id:"embedpress_button_edit_"+o,class:"embedpress_ignore_mouseout embedpress_controller_button"});var b=new t.Node("div",1);b.attr({class:"embedpress-icon-pencil embedpress_ignore_mouseout"}),b.append(g()),w.append(b),f.append(w);var y=new t.Node("div",1);y.attr({id:"embedpress_button_remove_"+o,class:"embedpress_ignore_mouseout embedpress_controller_button"});var C=new t.Node("div",1);return C.attr({class:"embedpress-icon-x embedpress_ignore_mouseout"}),C.append(g()),y.append(C),f.append(y),r.value=r.value.trim(),r.replace(h),window.setTimeout(function(){t.parseContentAsync(o,a,l,i)},200),h},t.parseContentAsync=function(r,a,i,o){i=void 0===i?{}:i;var s=(a=t.decodeEmbedURLSpecialChars(a,!0,i)).stripShortcode(n.shortcode);e(t).triggerHandler("EmbedPress.beforeEmbed",{url:s,meta:{attributes:i||{}}}),t.getParsedContent(a,function(a){var d=("object"==typeof a.data?a.data.embed:a.data).stripShortcode(n.shortcode),l=e(t.getElementInContentById("embedpress_wrapper_"+r,o)),c=e(l.parent());if(c.prop("tagName")&&"P"===c.prop("tagName").toUpperCase()){c.replaceWith(l);var p=e(l).next();!p.length||p.prop("tagName").toUpperCase(),p=null}if(c=null,s!==d){var u;l.removeClass("is-loading");try{u=e(d)}catch(t){(u=e("<div>")).html(d)}if(e("iframe",u).length||"Infogram"===a.data.provider_name)l.removeClass("embedpress_placeholder"),t.appendElementsIntoWrapper(u,l,o);else{var m=e(u).clone();m.html(""),l.removeClass("embedpress_placeholder"),l.append(m),setTimeout(function(){o.undoManager.transact(function(){var t=o.getDoc().createElement("iframe");t.src=tinymce.Env.ie?'javascript:""':"",t.frameBorder="0",t.allowTransparency="true",t.scrolling="no",t.class="wpview-sandbox",t.style.width="100%",m.append(t);var n=t.contentWindow;if(n){var r=n.document;e(t).load(function(){var n=0,a=setInterval(function(){8===n?(clearInterval(a),setTimeout(function(){l.css("width",t.width),l.css("height",t.height)},100)):(i.height?(t.height=i.height,t.style.height=i.height+"px"):t.height=e("body",r).height(),i.width?(t.width=i.width,t.style.width=i.width+"px"):t.width=e("body",r).width(),n++)},250)}),r.open(),r.write('<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style>html {background: transparent;padding: 0;margin: 0;}body#wpview-iframe-sandbox {background: transparent;padding: 1px 0 !important;margin: -1px 0 0 !important;}body#wpview-iframe-sandbox:before,body#wpview-iframe-sandbox:after {display: none;content: "";}</style></head><body id="wpview-iframe-sandbox" class="'+o.getBody().className+'" style="display: inline-block; width: 100%;" >'+u.html()+"</body></html>"),r.close()}})},50)}l.append(e('<span class="wpview-end"></span>')),a&&a.data&&"object"==typeof a.data&&(a.data.width=e(l).width(),a.data.height=e(l).height()),e(t).triggerHandler("EmbedPress.afterEmbed",{meta:a.data,url:s,wrapper:l})}else l.replaceWith(e("<p>"+s+"</p>"))})},t.appendElementsIntoWrapper=function(n,r,a){return n.length>0&&e.each(n,function(n,i){i.tagName&&"script"!==i.tagName.toLowerCase()&&(r.append(e(i)),"iframe"===i.tagName.toLowerCase()?e(i).ready(function(){window.setTimeout(function(){e.each(a.dom.select("div.embedpress_wrapper iframe"),function(e,n){t.fixIframeSize(n)})},300)}):"div"===i.tagName.toLowerCase()&&((e("img",e(i)).length||e("blockquote",r).length)&&e(e(i).parents(".embedpress_wrapper").get(0)).addClass("dynamic-width"),e(i).css("max-width",e(e(i).parents("body").get(0)).width()))),t.loadAsyncDynamicJsCodeFromElement(i,r,a)}),r},t.encodeEmbedURLSpecialChars=function(e){if(e.match(a)){var t=e.replace(a,"");if(!t.isValidUrl())return e;e=t,t=null}return(e=e.replace(/http(s?)\:\/\//i,"embedpress$1://")).replace("@","::__at__::").trim()},t.decodeEmbedURLSpecialChars=function(e,t,r){t=void 0===t||t,r=void 0===r?{}:r;var a=e.match(/embedpress(s?):\/\//);if(e=(e=e.replace(/embedpress(s?):\/\//,"http$1://")).replace("::__at__::","@").trim(),"class"in r){for(var i=r.class.split(/\s/g),o=!1,s=0;s<i.length;s++)if("dynamic-width"===i[s]){o=s;break}!1!==o&&(i.splice(o,1),0===i.length&&delete r.class,r.class=i.join(" ")),o=i=s=null}if(a&&t){var d="["+n.shortcode;if(Object.keys(r).length){var l;for(var c in r)l=r[c],("class"!==c.toLowerCase()||l.length)&&(l.isBoolean()?(d+=" ",l.isFalse()&&(d+="!"),d+=c):d+=" "+c+'="'+l+'"');l=c=null}e=d+"]"+e+"[/"+n.shortcode+"]"}return e},t.onFindEditor=function(o){t.each=tinymce.each,t.extend=tinymce.extend,t.JSON=tinymce.util.JSON,t.Node=tinymce.html.Node;var s=0,d=setInterval(function(){100===s?(clearInterval(d),alert("For some reason TinyMCE was not fully loaded yet. Please, refresh the page and try again.")):o.getDoc()?(clearInterval(d),function(){e(window.document.getElementsByTagName("head")[0]).append(e('<link rel="stylesheet" type="text/css" href="'+r+"/vendor/bootstrap/bootstrap.min.css?v="+t.params.versionUID+'">')),t.addStylesheet(r+"/font.css?v="+t.params.versionUID,o,o),t.addStylesheet(r+"/preview.css?v="+t.params.versionUID,o,o),t.addStylesheet(i+"/embedpress.css?v="+t.params.versionUID,o,o),t.addEvent("nodechange",o,t.onNodeChange),t.addEvent("keydown",o,function(e){t.onKeyDown(e,o)});var s=function(e){t.onUndo(e,o)};t.addEvent("undo",o,s),t.addEvent("undo",o.undoManager,s);var d=o.getDoc();e(d).on("mouseenter",".embedpress_wrapper",function(e){t.onMouseEnter(e,o)}),e(d).on("mouseout",".embedpress_wrapper",t.onMouseOut),e(d).on("mousedown",".embedpress_wrapper > .embedpress_controller_panel",function(e){t.cancelEvent(e,o)}),d=null,o.parser.addNodeFilter("#text",function(r,i){t.each(r,function(r){if(null!==r.parent||null!==r.prev){var i=r.value.trim();if((i.isValidUrl()||i.match(a))&&((i=t.decodeEmbedURLSpecialChars(i)).isValidUrl()||i.match(a))){i=r.value.stripShortcode(n.shortcode).trim();var s=t.getProvidersURLPatterns();!function n(a){if(a<s.length){var d=s[a],l=new RegExp(d),c=t.decodeEmbedURLSpecialChars(i).trim(),p=c.match(l);if(p&&null!==p&&p.length){c=t.encodeEmbedURLSpecialChars(p[2]);var u=t.addURLsPlaceholder(r,c,o);setTimeout(function(){var t=o.getDoc();if(null!==t){var n=e(t.querySelector("#"+u.attributes.map.id)),r=e(n.parent());r&&r.prop("tagName")&&"P"===r.prop("tagName").toUpperCase()&&r.replaceWith(n);var a=n.prev();a&&a.prop("tagName")&&"P"===a.prop("tagName").toUpperCase()&&!a.html().replace(/\&nbsp\;/i,"").length?a.remove():void 0!==a.html()&&a.html().match(/<[\/]?br>/)&&(a.prev().length||a.remove());var i=n.next();i&&i.length&&"P"===i.prop("tagName").toUpperCase()?i.next().length||i.html().replace(/\&nbsp\;/i,"").length||(i.remove(),e("<p>&nbsp;</p>").insertAfter(n)):e("<p>&nbsp;</p>").insertAfter(n),setTimeout(function(){o.selection.select(o.getBody(),!0),o.selection.collapse(!1)},50)}},50)}else n(a+1)}}(0)}}})}),o.serializer.addNodeFilter("div",function(e,n){t.each(e,function(e){if(null!==e.parent||null!==e.prev){var n=(e.attributes.map.class||"").split(" "),r=["embedpress_wrapper","embedpress_placeholder","wpview","wpview-wrap"];if(n.filter(function(e){return-1!=r.indexOf(e)}).length>0){var a=["id","style","data-loading-text","data-uid","data-url"],i={};for(var o in e.attributes.map)if("class"!==o.toLowerCase())a.indexOf(o)<0&&(i[o.replace("data-","")]=e.attributes.map[o]);else{var s=[];for(var d in n){var l=n[d];-1===r.indexOf(l)&&s.push(l)}s.length&&(i.class=s.join(" "))}var c=new t.Node("p",1),p=new t.Node("#text",3);p.value=e.attributes.map&&void 0!==e.attributes.map["data-url"]?t.decodeEmbedURLSpecialChars(e.attributes.map["data-url"].trim(),!0,i):"",c.append(p.clone()),e.replace(p),p.replace(c)}}})}),o.serializer.addNodeFilter("p",function(e,n){t.each(e,function(e){e.firstChild==e.lastChild&&(!e.firstChild||!("value"in e.firstChild)||"&nbsp;"!==e.firstChild.value&&e.firstChild.value.trim().length||e.remove())})}),tinymce.each(tinymce.editors,function(e){t.addEvent("loadContent",e,function(n){t.configureWrappers(e)})}),window.setTimeout(function(){o.load()},500)}()):s++},250)},t.fixIframeSize=function(t){var n=480;if(e(t).width()>n&&!e(t).data("size-fixed")){var r=e(t).height()/e(t).width();e(t).width(n),e(t).height(n*r),e(t).css("max-width",n),e(t).attr("max-width",n),e(t).data("size-fixed",!0)}},t.onMouseEnter=function(n,r){t.displayPreviewControllerPanel(e(n.currentTarget),r)},t.onMouseOut=function(n){return(!t.isDefined(n.toElement)||n.toElement.parentElement!=n.fromElement&&!e(n.toElement).hasClass("embedpress_ignore_mouseout"))&&(!t.isDefined(n.relatedTarget)||!e(n.relatedTarget).hasClass("embedpress_ignore_mouseout"))&&void t.hidePreviewControllerPanel()},t.onPaste=function(e,n){var r=new RegExp(/(https?):\/\/([w]{3}\.)?.+?(?:\s|$)/i),a=t.getProvidersURLPatterns(),i=n.content.split(/\n/g)||[];(i=i.map(function(e,t){if(e.match(r)){let t=e.trim().split(/\s+/);t=t.map(function(e,t){var n=e.match(r);if(n)for(var i=0;i<a.length;i++)if(new RegExp(a[i]).test(e))return"</p><p>"+n[0]+"</p><p>";return e}),t[t.length-1]=t[t.length-1]+"<br>",e=t.join(" ")}return e})).join("").replace(/<br>$/,"")!==n.content&&(n.content="<p>"+n.content+"</p>")},t.onNodeChange=function(t){"BR"===t.element.tagName?t.parents.length>0&&e.each(t.parents,function(t,n){e(n).hasClass("embedpress_wrapper")&&e(n).replaceWith(e("<br>"))}):"IFRAME"===t.element.tagName&&t.parents.length>0&&e.each(t.parents,function(t,n){if((n=e(n)).hasClass("embedpress_wrapper")){var r=e(".embedpress-wrapper",n);r.length>1&&r.get(0).remove()}})},t.onKeyDown=function(n,r){var a=r.selection.getNode();if(8==n.keyCode||46==n.keyCode){if("p"===a.nodeName.toLowerCase()){var i=e(a).children();i.length>0&&e.each(i,function(){(e(this).hasClass("embedpress_wrapper")||e(this).hasClass("embedpress_ignore_mouseout"))&&(e(this).remove(),r.focus())})}}else if(-1==[37,38,39,40].indexOf(n.keyCode)&&(e(a).hasClass("embedpress_wrapper")||e(a).hasClass("embedpress_ignore_mouseout"))){if(13==n.keyCode){if(wrapper=e(t.getWrapperFromChild(a)),wrapper.length>0){var o="__embedpress__tmp_"+t.makeId();wrapper.after(e('<span id="'+o+'"></span>'));var s=r.dom.select("span#"+o)[0];r.selection.select(s),e(s).remove()}return!0}return t.cancelEvent(n,r)}return!0},t.getWrapperFromChild=function(n){if(e(n).hasClass("embedpress_wrapper"))return n;var r=e(n).parent();return r.length>0&&t.getWrapperFromChild(r[0])},t.onUndo=function(e,t){t.load()},t.cancelEvent=function(e,t){return e.preventDefault(),e.stopPropagation(),t.dom.events.cancel(),!1},t.onClickEditButton=function(r,a){t.cancelEvent(r,a),t.activeWrapperForModal=t.activeWrapper;var i=t.activeWrapperForModal,o=i.prop("id").replace("embedpress_wrapper_",""),s={},d=e(".embedpress-wrapper",i),l=e("iframe",i);l.length||(l=null),d.length>1&&e.each(d[0].attributes,function(){this.specified&&"class"!==this.name&&(s[this.name.replace("data-","").toLowerCase()]=this.value)});var c=l&&l.width()||d.data("width")||d.width()||"",p=l&&l.height()||d.data("height")||d.height()||"";return l=d=null,e('<div class="loader-indicator"><i class="embedpress-icon-reload"></i></div>').appendTo(i),setTimeout(function(){e.ajax({type:"GET",url:t.params.baseUrl+"wp-admin/admin-ajax.php",data:{action:"embedpress_get_embed_url_info",url:t.decodeEmbedURLSpecialChars(i.data("url"),!1)},beforeSend:function(t,n){e(".loader-indicator",i).addClass("is-loading")},success:function(r){if(r){if(r.canBeResponsive){var d=!0;("width"in s||"height"in s||"responsive"in s&&s.responsive.isFalse())&&(d=!1)}bootbox.dialog({className:"embedpress-modal",title:"Editing Embed properties",message:'<form id="form-'+o+'" embedpress><div class="row"><div class="col-md-12"><div class="form-group"><label for="input-url-'+o+'">Url</label><input class="form-control" type="url" id="input-url-'+o+'" value="'+t.decodeEmbedURLSpecialChars(i.data("url"),!1)+'"></div></div></div><div class="row">'+(r.canBeResponsive?'<div class="col-md-12"><label>Responsive</label><div class="form-group"><label class="radio-inline"><input type="radio" name="input-responsive-'+o+'" id="input-responsive-1-'+o+'" value="1"'+(d?' checked="checked"':"")+'> Yes</label><label class="radio-inline"><input type="radio" name="input-responsive-'+o+'" id="input-responsive-0-'+o+'" value="0"'+(d?"":' checked="checked"')+"> No</label></div></div>":"")+'<div class="col-md-6"><div class="form-group"><label for="input-width-'+o+'">Width</label><input class="form-control" type="integer" id="input-width-'+o+'" value="'+c+'"'+(d?" disabled":"")+'></div></div><div class="col-md-6"><div class="form-group"><label for="input-height-'+o+'">Height</label><input class="form-control" type="integer" id="input-height-'+o+'" value="'+p+'"'+(d?" disabled":"")+"></div></div></div></form>",buttons:{danger:{label:"Cancel",className:"btn-default",callback:function(){t.activeWrapperForModal=null}},success:{label:"Save",className:"btn-primary",callback:function(){var i=t.activeWrapperForModal;if(a.focus(),a.selection.select(i[0]),i.children().remove(),i.remove(),r.canBeResponsive)if(e("#form-"+o+' input[name="input-responsive-'+o+'"]:checked').val().isFalse()){var d=e("#input-width-"+o).val();parseInt(d)>0&&(s.width=d);var l=e("#input-height-"+o).val();parseInt(l)>0&&(s.height=l),s.responsive="false"}else delete s.width,delete s.height,s.responsive="true";else d=e("#input-width-"+o).val(),parseInt(d)>0&&(s.width=d),l=e("#input-height-"+o).val(),parseInt(l)>0&&(s.height=l);var c=[];if(Object.keys(s).length)for(var p in s)c.push(p+'="'+s[p]+'"');var u="["+n.shortcode+(c.length>0?" "+c.join(" "):"")+"]"+e("#input-url-"+o).val()+"[/"+n.shortcode+"]";a.execCommand("mceInsertContent",!1,u),t.configureWrappers(a)}}}}),e("form[embedpress]").on("change",'input[type="radio"]',function(t){var n=e(this),r=n.parents("form[embedpress]");e('input[type="integer"]',r).prop("disabled",n.val().isTrue())})}else bootbox.alert("Unable to get a valid response from the server.")},complete:function(t,n){e(".loader-indicator",i).removeClass("is-loading"),setTimeout(function(){e(".loader-indicator",i).remove()},350)},dataType:"json",async:!0})},200),!1},t.onClickRemoveButton=function(e,n){t.cancelEvent(e,n);var r=t.activeWrapper;return r.children().remove(),r.remove(),!1},t.recursivelyAddClass=function(n,r){e(n).children().each(function(n,a){e(a).addClass(r),e(a).children().length>0&&t.recursivelyAddClass(a,r)})},t.setInterval=function(e,n,r){var a=0,i=0,o=window.setInterval(function(){i++,(a+=n)<=r?e(i,a):t.stopInterval(o)},n);return o},t.stopInterval=function(e){window.clearInterval(e),e=null},t.configureWrappers=function(n){window.setTimeout(function(){var r=n.getDoc(),a=null,i=r.getElementsByClassName("embedpress_wrapper");if(i.length>0)for(var o=0;o<i.length;o++)if(1!=(a=e(i[o])).data("configured")){window.setTimeout(function(){t.recursivelyAddClass(a,"embedpress_ignore_mouseout")},500);var s=t.setInterval(function(n){var r=a.find("iframe");r.length>0&&e.each(r,function(n,r){"fb_xdm_frame_https"!==e(r).attr("id")&&"fb_xdm_frame_http"!==e(r).attr("id")&&(a.css("width",e(r).width()+"px"),t.stopInterval(s))})},500,8e3);a.data("configured",!0)}},200)},t.hidePreviewControllerPanel=function(){t.controllerPanelIsActive()&&(e(t.activeControllerPanel).addClass("hidden"),t.activeControllerPanel=null,t.activeWrapper=null)},t.getElementInContentById=function(t,n){var r=n.getDoc();if(null!==r)return e(r.getElementById(t))},t.displayPreviewControllerPanel=function(n,r){if(t.controllerPanelIsActive()&&n!==t.activeWrapper&&t.hidePreviewControllerPanel(),!t.controllerPanelIsActive()&&!n.hasClass("is-loading")){var a=n.data("uid"),i=t.getElementInContentById("embedpress_controller_panel_"+a,r);if(!i.data("event-set")){var o=t.getElementInContentById("embedpress_button_edit_"+a,r),s=t.getElementInContentById("embedpress_button_remove_"+a,r);t.addEvent("mousedown",o,function(e){t.onClickEditButton(e,r)}),t.addEvent("mousedown",s,function(e){t.onClickRemoveButton(e,r)}),i.data("event-set",!0)}var d=i.next()[0];void 0!==d&&"iframe"===d.nodeName.toLowerCase()&&i.css("left",e(d).width()/2),i.removeClass("hidden"),t.activeControllerPanel=i,t.activeWrapper=n}}}),window.EmbedPress.init(n.previewSettings)})}(jQuery,String,embedpressPreviewData);