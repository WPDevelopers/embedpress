(function(){"use strict";/**
 *  PDFObject v2.2.6
 *  https://github.com/pipwerks/PDFObject
 *  @license
 *  Copyright (c) 2008-2021 Philip Hutchison
 *  MIT-style license: http://pipwerks.mit-license.org/
 *  UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js
 */(function(n,y){typeof define=="function"&&define.amd?define([],y):typeof module=="object"&&module.exports?module.exports=y():n.PDFObject=y()})(void 0,function(){if(typeof window=="undefined"||window.navigator===void 0||window.navigator.userAgent===void 0||window.navigator.mimeTypes===void 0)return!1;let n="2.2.6",y=window.navigator,P=window.navigator.userAgent,j="ActiveXObject"in window,N=window.Promise!==void 0,W=y.mimeTypes["application/pdf"]!==void 0,b=y.platform!==void 0&&y.platform==="MacIntel"&&y.maxTouchPoints!==void 0&&y.maxTouchPoints>1||/Mobi|Tablet|Android|iPad|iPhone/.test(P),T=!b&&y.vendor!==void 0&&/Apple/.test(y.vendor)&&/Safari/.test(P),t=!b&&/irefox/.test(P)&&P.split("rv:").length>1?parseInt(P.split("rv:")[1].split(".")[0],10)>18:!1,r=function(o){var d;try{d=new ActiveXObject(o)}catch(p){d=null}return d},a=!b&&(N||t||W||j&&function(){return!!(r("AcroPDF.PDF")||r("PDF.PdfCtrl"))}()),s=function(o){let d="",p;if(o){for(p in o)o.hasOwnProperty(p)&&(d+=encodeURIComponent(p)+"="+encodeURIComponent(o[p])+"&");d&&(d="#"+d,d=d.slice(0,d.length-1))}return d},l=function(o,d){return!1},c=function(o){for(;o.firstChild;)o.removeChild(o.firstChild)},h=function(o){let d=document.body;return typeof o=="string"?d=document.querySelector(o):window.jQuery!==void 0&&o instanceof jQuery&&o.length?d=o.get(0):o.nodeType!==void 0&&o.nodeType===1&&(d=o),d},f=function(o,d,p,E,u,C){c(o);let S=E+"?file="+encodeURIComponent(d)+p,w=document.createElement("div"),g=document.createElement("iframe");return g.src=S,g.className="pdfobject",g.type="application/pdf",g.frameborder="0",g.allow="fullscreen",u&&(g.id=u),C||(w.style.cssText="position: absolute; top: 0; right: 0; bottom: 0; left: 0;",g.style.cssText="border: none; width: 100%; height: 100%;",o.style.position="relative",o.style.overflow="auto"),w.appendChild(g),o.appendChild(w),o.classList.add("pdfobject-container"),o.getElementsByTagName("iframe")[0]},m=function(o,d,p,E,u,C,S,w,g,L){c(d);let _=document.createElement(o);if(o==="object"?_.data=E+u:_.src=E+u,_.className="pdfobject",_.type="application/pdf",_.title=g,w&&(_.id=w),o==="iframe"&&(_.allow="fullscreen"),!L){let x=o==="embed"?"overflow: auto;":"border: none;";p&&p!==document.body?x+="width: "+C+"; height: "+S+";":x+="position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",_.style.cssText=x}return d.classList.add("pdfobject-container"),d.appendChild(_),d.getElementsByTagName(o)[0]},v=function(o,d,p){let E=d||!1,u=p||{},C=typeof u.id=="string"?u.id:"",S=u.page||!1,w=u.pdfOpenParams||{},g=u.fallbackLink||!0,L=u.width||"100%",_=u.height||"100%",x=u.title||"Embedded PDF",U=typeof u.assumptionMode=="boolean"?u.assumptionMode:!0,F=typeof u.forcePDFJS=="boolean"?u.forcePDFJS:!1,k=typeof u.supportRedirect=="boolean"?u.supportRedirect:!1,I=typeof u.omitInlineStyles=="boolean"?u.omitInlineStyles:!1;typeof u.suppressConsole=="boolean"&&u.suppressConsole;let A=typeof u.forceIframe=="boolean"?u.forceIframe:!1,B=typeof u.forceObject=="boolean"?u.forceObject:!1,D=u.PDFJS_URL||!1,R=h(E),M="",O="",z="<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>";return typeof o!="string"||!R?l():(S&&(w.page=S),O=s(w),F&&D?f(R,o,O,D,C,I):a||U&&!b?m(A||k||T?"iframe":B?"object":"embed",R,d,o,O,L,_,C,x,I):D?f(R,o,O,D,C,I):(M=typeof g=="string"?g:z,R.innerHTML=M.replace(/\[url\]/g,o),l()))};return{embed:function(o,d,p){return v(o,d,p)},pdfobjectversion:function(){return n}(),supportsPDFs:function(){return a}()}});/**
 * @package     EmbedPress
 * @author      EmbedPress <help@embedpress.com>
 * @copyright   Copyright (C) 2018 EmbedPress. All rights reserved.
 * @license     GPLv2 or later
 * @since       1.0
 */(function(n,y,P,j){n(window.document).ready(function(){y.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},y.prototype.isValidUrl=function(){var e=/^(https?|embedpresss?):\/\//i;return e.test(this.toString())},y.prototype.hasShortcode=function(e){var b=new RegExp("\\["+e+"(?:\\]|.+?\\])","ig");return!!this.toString().match(b)},y.prototype.stripShortcode=function(e){var b=new RegExp("(\\["+e+"(?:\\]|.+?\\])|\\[\\/"+e+"\\])","ig");return this.toString().replace(b,"")},y.prototype.setShortcodeAttribute=function(e,b,T,t){t=typeof t=="undefined"?!1:t;var r=this.toString();if(r.hasShortcode(T)){var i=r.getShortcodeAttributes(T);if(i.hasOwnProperty(e)?t?i[e]=b:i[e]+=" "+b:i[e]=b,Object.keys(i).length){var a=[];for(var s in i)a.push(s+'="'+i[s]+'"');r="["+T+" "+a.join(" ")+"]"+r.stripShortcode(T)+"[/"+T+"]"}else r="["+T+"]"+r.stripShortcode(T)+"[/"+T+"]";return r}else return r},y.prototype.getShortcodeAttributes=function(e){var b=this.toString();if(b.hasShortcode(e)){var T={},t=new RegExp(/\[embed\s*(.*?)\]/ig).exec(b)[1];if(t.length>0){for(var r=new RegExp(/(\!?\w+-?\w*)(?:="(.+?)")?/ig),i;i=r.exec(t);){var a=i[1],s;i[2]===j?a.toLowerCase()!=="class"&&(a.indexOf("!")===0?(a=a.replace("!",""),s="false"):s="true",T[a]=s):(s=i[2],s.isBoolean()&&(s=s.isFalse()?"false":"true"),T[a]=s)}i=r=null}return t=null,T}else return{}},y.prototype.isBoolean=function(){var e=this.toString().trim().toLowerCase();return e.isTrue(!1)||e.isFalse()},y.prototype.isTrue=function(e){var b=this.toString().trim().toLowerCase();switch(e=typeof e===j?!0:e,b){case"":return e+="",!e.isFalse();case"1":case"true":case"on":case"yes":case"y":return!0;default:return!1}},y.prototype.isFalse=function(){var e=this.toString().trim().toLowerCase();switch(e){case"0":case"false":case"off":case"no":case"n":case"nil":case"null":return!0;default:return!1}};var N=new RegExp("\\[/?"+P.shortcode+"\\]","gi"),W=function(){var e=this,b=P.assetsUrl+"css",T=b;e.params={baseUrl:"",versionUID:"0"},e.iOS=/iPad|iPod|iPhone/.test(window.navigator.userAgent),e.activeWrapper=null,e.activeWrapperForModal=null,e.activeControllerPanel=null,e.loadedEditors=[],e.init=function(t){n.extend(e.params,t),e.iOS&&n(window.document.body).css("cursor","pointer"),n(e.onReady)},e.addEvent=function(t,r,i){typeof r.on!="undefined"?r.on(t,i):r["on"+t.capitalizeFirstLetter()]&&r["on"+t.capitalizeFirstLetter()].add(i)},e.isEmpty=function(t){return t.length===0},e.isDefined=function(t){return typeof t!="undefined"&&t!==null},e.makeId=function(){for(var t="",r="abcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},e.loadAsyncDynamicJsCodeFromElement=function(t,r,i){if(t=n(t),t.prop("tagName")&&t.prop("tagName").toLowerCase()==="script"){var a=t.attr("src")||null;a?e.addScript(a,null,r,i):e.addScriptDeclaration(r,t.html(),i)}else{var s=n("script",t);s.length>0&&n.each(s,function(l,c){e.loadAsyncDynamicJsCodeFromElement(c,r,i)})}},e.onReady=function(){var t=function(){var r=window.setInterval(function(){var i=e.getEditors();if(i.length){e.loadedEditors=i;for(var a=0;a<e.loadedEditors.length;a++)e.onFindEditor(e.loadedEditors[a]);return window.clearInterval(r),e.loadedEditors}},250)};e.tinymceIsAvailable()&&t(),typeof FLLightbox!="undefined"&&n.each(FLLightbox._instances,function(r){FLLightbox._instances[r].on("open",function(){setTimeout(function(){t()},500)}),FLLightbox._instances[r].on("didHideLightbox",function(){setTimeout(function(){t()},500)})})},e.tinymceIsAvailable=function(){return typeof window.tinymce=="object"||typeof window.tinyMCE=="object"},e.controllerPanelIsActive=function(){return typeof e.activeControllerPanel!="undefined"&&e.activeControllerPanel!==null},e.getEditors=function(){return!window.tinymce||!window.tinymce.editors||window.tinymce.editors.length===0?[]:window.tinymce.editors||[]},e.getParsedContent=function(t,r){n.ajax({type:"POST",url:e.params.baseUrl+"wp-admin/admin-ajax.php",data:{action:"embedpress_do_ajax_request",subject:t},success:r,dataType:"json",async:!0})},e.addStylesheet=function(t,r){var i=r.getDoc().getElementsByTagName("head")[0],a=n('<link rel="stylesheet" type="text/css" href="'+t+'">');a.appendTo(i)},e.convertURLSchemeToPattern=function(t){var r="(.*)((?:http|embedpress)s?:\\/\\/(?:www\\.)?",i="[\\/]?)(.*)";return t=t.replace(/\*/g,"[a-zA-Z0-9=&_\\-\\?\\.\\/!\\+%:@,#]+"),t=t.replace(/\./g,"\\."),t=t.replace(/\//g,"\\/"),r+t+i},e.getProvidersURLPatterns=function(){var t=[];return e.each(P.urlSchemes,function(i){t.push(e.convertURLSchemeToPattern(i))}),t},e.addScript=function(t,r,i,a){var s=a.getDoc();(typeof i=="undefined"||!i)&&(i=n(s.getElementsByTagName("head")[0]));var l=n(s.createElement("script"));l.attr("async",1),typeof r=="function"&&l.ready(r),l.attr("src",t),i.append(l)},e.addScriptDeclaration=function(t,r,i){var a=i.getDoc(),s=n(a.createElement("script"));n(t).append(s),s.text(r)},e.addURLsPlaceholder=function(t,r,i){var a=e.makeId(),s=["embedpress_wrapper","embedpress_placeholder","wpview","wpview-wrap"],l=t.value.getShortcodeAttributes(P.shortcode),c=l;if(Object.keys(l).length){var h=["class","href","data-href"],f="data-",m=[];for(var v in l)h.indexOf(v)===-1?v.indexOf(f)!==0?m[f+v]=l[v]:m[v]=l[v]:(v=v.replace(f,""),v==="class"&&s.push(l[v]));l=m,m=f=null}("data-width"in l||"data-height"in l)&&"data-responsive"in l&&(l["data-responsive"]="false");var o=new e.Node("div",1),d={class:Array.from(new Set(s)).join(" "),"data-url":r,"data-uid":a,id:"embedpress_wrapper_"+a,"data-loading-text":"Loading your embed..."};d=n.extend({},d,l),d.class.indexOf("is-loading")===-1&&(d.class+=" is-loading"),o.attr(d);var p=new e.Node("div",1);p.attr({id:"embedpress_controller_panel_"+a,class:"embedpress_controller_panel embedpress_ignore_mouseout hidden"}),o.append(p);function E(g,L){g=g||"span",L=L||"&nbsp;";var _=new e.Node(g,1);_.attr({class:"hidden"});var x=new e.Node("#text",3);return x.value=L,_.append(x),_}var u=new e.Node("div",1);u.attr({id:"embedpress_button_edit_"+a,class:"embedpress_ignore_mouseout embedpress_controller_button"});var C=new e.Node("div",1);C.attr({class:"embedpress-icon-pencil embedpress_ignore_mouseout"}),C.append(E()),u.append(C),p.append(u);var S=new e.Node("div",1);S.attr({id:"embedpress_button_remove_"+a,class:"embedpress_ignore_mouseout embedpress_controller_button"});var w=new e.Node("div",1);return w.attr({class:"embedpress-icon-x embedpress_ignore_mouseout"}),w.append(E()),S.append(w),p.append(S),t.value=t.value.trim(),t.replace(o),window.setTimeout(function(){e.parseContentAsync(a,r,c,i)},200),o},e.parseContentAsync=function(t,r,i,a){i=typeof i=="undefined"?{}:i,r=e.decodeEmbedURLSpecialChars(r,!0,i);var s=r.stripShortcode(P.shortcode);n(e).triggerHandler("EmbedPress.beforeEmbed",{url:s,meta:{attributes:i||{}}}),e.getParsedContent(r,function(c){var h=(typeof c.data=="object"?c.data.embed:c.data).stripShortcode(P.shortcode),f=n(e.getElementInContentById("embedpress_wrapper_"+t,a)),m=n(f.parent());if(m.prop("tagName")&&m.prop("tagName").toUpperCase()==="P"){m.replaceWith(f);var v=n(f).next();!v.length||v.prop("tagName").toUpperCase(),v=null}if(m=null,s===h){f.replaceWith(n("<p>"+s+"</p>"));return}f.removeClass("is-loading");var o;try{o=n(h)}catch(p){o=n("<div>"),o.html(h)}if(!n("iframe",o).length&&c.data.provider_name!=="Infogram"){var d=n(o).clone();d.html(""),f.removeClass("embedpress_placeholder"),f.append(d),setTimeout(function(){a.undoManager.transact(function(){var p=a.getDoc().createElement("iframe");p.src=tinymce.Env.ie?'javascript:""':"",p.frameBorder="0",p.allowTransparency="true",p.scrolling="no",p.class="wpview-sandbox",p.style.width="100%",d.append(p);var E=p.contentWindow;if(E){var u=E.document;n(p).load(function(){var C=8,S=0,w=setInterval(function(){S===C?(clearInterval(w),setTimeout(function(){f.css("width",p.width),f.css("height",p.height)},100)):(i.height?(p.height=i.height,p.style.height=i.height+"px"):p.height=n("body",u).height(),i.width?(p.width=i.width,p.style.width=i.width+"px"):p.width=n("body",u).width(),S++)},250)}),u.open(),u.write('<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style>html {background: transparent;padding: 0;margin: 0;}body#wpview-iframe-sandbox {background: transparent;padding: 1px 0 !important;margin: -1px 0 0 !important;}body#wpview-iframe-sandbox:before,body#wpview-iframe-sandbox:after {display: none;content: "";}</style></head><body id="wpview-iframe-sandbox" class="'+a.getBody().className+'" style="display: inline-block; width: 100%;" >'+o.html()+"</body></html>"),u.close()}})},50)}else f.removeClass("embedpress_placeholder"),e.appendElementsIntoWrapper(o,f,a);f.append(n('<span class="wpview-end"></span>')),c&&c.data&&typeof c.data=="object"&&(c.data.width=n(f).width(),c.data.height=n(f).height()),n(e).triggerHandler("EmbedPress.afterEmbed",{meta:c.data,url:s,wrapper:f})})},e.appendElementsIntoWrapper=function(t,r,i){return t.length>0&&n.each(t,function(s,l){l.tagName&&l.tagName.toLowerCase()!=="script"&&(r.append(n(l)),l.tagName.toLowerCase()==="iframe"?n(l).ready(function(){window.setTimeout(function(){n.each(i.dom.select("div.embedpress_wrapper iframe"),function(c,h){e.fixIframeSize(h)})},300)}):l.tagName.toLowerCase()==="div"&&((n("img",n(l)).length||n("blockquote",r).length)&&n(n(l).parents(".embedpress_wrapper").get(0)).addClass("dynamic-width"),n(l).css("max-width",n(n(l).parents("body").get(0)).width()))),e.loadAsyncDynamicJsCodeFromElement(l,r,i)}),r},e.encodeEmbedURLSpecialChars=function(t){if(t.match(N)){var r=t.replace(N,"");if(!r.isValidUrl())return t;t=r,r=null}return t=t.replace(/http(s?)\:\/\//i,"embedpress$1://"),t=t.replace("@","::__at__::").trim(),t},e.decodeEmbedURLSpecialChars=function(t,r,i){var a=/embedpress(s?):\/\//;r=typeof r=="undefined"?!0:r,i=typeof i=="undefined"?{}:i;var s=t.match(a);if(t=t.replace(/embedpress(s?):\/\//,"http$1://"),t=t.replace("::__at__::","@").trim(),"class"in i){for(var l=i.class.split(/\s/g),c=!1,h=0;h<l.length;h++)if(l[h]==="dynamic-width"){c=h;break}c!==!1&&(l.splice(c,1),l.length===0&&delete i.class,i.class=l.join(" ")),c=l=h=null}if(s&&r){var f="["+P.shortcode;if(Object.keys(i).length){var m;for(var v in i)m=i[v],v.toLowerCase()==="class"&&!m.length||(m.isBoolean()?(f+=" ",m.isFalse()&&(f+="!"),f+=v):f+=" "+v+'="'+m+'"');m=v=null}t=f+"]"+t+"[/"+P.shortcode+"]"}return t},e.onFindEditor=function(t){e.each=tinymce.each,e.extend=tinymce.extend,e.JSON=tinymce.util.JSON,e.Node=tinymce.html.Node;function r(){n(window.document.getElementsByTagName("head")[0]).append(n('<link rel="stylesheet" type="text/css" href="'+(b+"/vendor/bootstrap/bootstrap.min.css?v="+e.params.versionUID)+'">')),e.addStylesheet(b+"/font.css?v="+e.params.versionUID,t,t),e.addStylesheet(b+"/preview.css?v="+e.params.versionUID,t,t),e.addStylesheet(T+"/embedpress.css?v="+e.params.versionUID,t,t),e.addEvent("nodechange",t,e.onNodeChange),e.addEvent("keydown",t,function(h){e.onKeyDown(h,t)});var l=function(h){e.onUndo(h,t)};e.addEvent("undo",t,l),e.addEvent("undo",t.undoManager,l);var c=t.getDoc();n(c).on("mouseenter",".embedpress_wrapper",function(h){e.onMouseEnter(h,t)}),n(c).on("mouseout",".embedpress_wrapper",e.onMouseOut),n(c).on("mousedown",".embedpress_wrapper > .embedpress_controller_panel",function(h){e.cancelEvent(h,t)}),c=null,t.parser.addNodeFilter("#text",function(f,m){e.each(f,function(o){if(!(o.parent===null&&o.prev===null)){var d=o.value.trim();if(!(!d.isValidUrl()&&!d.match(N))&&(d=e.decodeEmbedURLSpecialChars(d),!(!d.isValidUrl()&&!d.match(N)))){d=o.value.stripShortcode(P.shortcode).trim();var p=e.getProvidersURLPatterns();(function E(u){if(u<p.length){var C=p[u],S=new RegExp(C),w=e.decodeEmbedURLSpecialChars(d).trim(),g=w.match(S);if(g&&g!==null&&g.length){w=e.encodeEmbedURLSpecialChars(g[2]);var L=e.addURLsPlaceholder(o,w,t);setTimeout(function(){var _=t.getDoc();if(_!==null){var x=n(_.querySelector("#"+L.attributes.map.id)),U=n(x.parent());U&&U.prop("tagName")&&U.prop("tagName").toUpperCase()==="P"&&U.replaceWith(x);var F=x.prev();F&&F.prop("tagName")&&F.prop("tagName").toUpperCase()==="P"&&!F.html().replace(/\&nbsp\;/i,"").length?F.remove():typeof F.html()!="undefined"&&F.html().match(/<[\/]?br>/)&&(F.prev().length||F.remove());var k=x.next();k&&k.length&&k.prop("tagName").toUpperCase()==="P"?!k.next().length&&!k.html().replace(/\&nbsp\;/i,"").length&&(k.remove(),n("<p>&nbsp;</p>").insertAfter(x)):n("<p>&nbsp;</p>").insertAfter(x),setTimeout(function(){t.selection.select(t.getBody(),!0),t.selection.collapse(!1)},50)}},50)}else E(u+1)}})(0)}}})}),t.serializer.addNodeFilter("div",function(f,m){e.each(f,function(o){if(!(o.parent===null&&o.prev===null)){var d=(o.attributes.map.class||"").split(" "),p=["embedpress_wrapper","embedpress_placeholder","wpview","wpview-wrap"],E=d.filter(function(F){return p.indexOf(F)!=-1}).length>0;if(E){var u=["id","style","data-loading-text","data-uid","data-url"],C={},S="data-";for(var w in o.attributes.map)if(w.toLowerCase()!=="class")u.indexOf(w)<0&&(C[w.replace(S,"")]=o.attributes.map[w]);else{var g=[];for(var L in d){var _=d[L];p.indexOf(_)===-1&&g.push(_)}g.length&&(C.class=g.join(" "))}var x=new e.Node("p",1),U=new e.Node("#text",3);U.value=o.attributes.map&&typeof o.attributes.map["data-url"]!="undefined"?e.decodeEmbedURLSpecialChars(o.attributes.map["data-url"].trim(),!0,C):"",x.append(U.clone()),o.replace(U),U.replace(x)}}})}),t.serializer.addNodeFilter("p",function(f,m){e.each(f,function(o){o.firstChild==o.lastChild&&o.firstChild&&"value"in o.firstChild&&(o.firstChild.value==="&nbsp;"||!o.firstChild.value.trim().length)&&o.remove()})}),tinymce.each(tinymce.editors,function(f){e.addEvent("loadContent",f,function(v){e.configureWrappers(f)})}),window.setTimeout(function(){t.load()},500)}var i=100,a=0,s=setInterval(function(){if(a===i)clearInterval(s),alert("For some reason TinyMCE was not fully loaded yet. Please, refresh the page and try again.");else{var l=t.getDoc();l?(clearInterval(s),r()):a++}},250)},e.fixIframeSize=function(t){var r=480;if(n(t).width()>r&&!n(t).data("size-fixed")){var i=n(t).height()/n(t).width();n(t).width(r),n(t).height(r*i),n(t).css("max-width",r),n(t).attr("max-width",r),n(t).data("size-fixed",!0)}},e.onMouseEnter=function(t,r){e.displayPreviewControllerPanel(n(t.currentTarget),r)},e.onMouseOut=function(t){if(e.isDefined(t.toElement)&&(t.toElement.parentElement==t.fromElement||n(t.toElement).hasClass("embedpress_ignore_mouseout"))||e.isDefined(t.relatedTarget)&&n(t.relatedTarget).hasClass("embedpress_ignore_mouseout"))return!1;e.hidePreviewControllerPanel()},e.onPaste=function(t,r){var i=new RegExp(/(https?):\/\/([w]{3}\.)?.+?(?:\s|$)/i),a=e.getProvidersURLPatterns(),s=r.content.split(/\n/g)||[];s=s.map(function(c,h){if(c.match(i)){let f=c.trim().split(/\s+/);f=f.map(function(m,v){var o=m.match(i);if(o)for(var d=0;d<a.length;d++){var p=new RegExp(a[d]);if(p.test(m))return"</p><p>"+o[0]+"</p><p>"}return m}),f[f.length-1]=f[f.length-1]+"<br>",c=f.join(" ")}return c});var l=s.join("");l.replace(/<br>$/,"")!==r.content&&(r.content="<p>"+r.content+"</p>")},e.onNodeChange=function(t){t.element.tagName==="BR"?t.parents.length>0&&n.each(t.parents,function(r,i){n(i).hasClass("embedpress_wrapper")&&n(i).replaceWith(n("<br>"))}):t.element.tagName==="IFRAME"&&t.parents.length>0&&n.each(t.parents,function(r,i){if(i=n(i),i.hasClass("embedpress_wrapper")){var a=n(".embedpress-wrapper",i);a.length>1&&a.get(0).remove()}})},e.onKeyDown=function(t,r){var i=r.selection.getNode();if(t.keyCode==8||t.keyCode==46){if(i.nodeName.toLowerCase()==="p"){var a=n(i).children();a.length>0&&n.each(a,function(){(n(this).hasClass("embedpress_wrapper")||n(this).hasClass("embedpress_ignore_mouseout"))&&(n(this).remove(),r.focus())})}}else{var s=[37,38,39,40];if(s.indexOf(t.keyCode)==-1&&(n(i).hasClass("embedpress_wrapper")||n(i).hasClass("embedpress_ignore_mouseout")))if(t.keyCode==13){if(wrapper=n(e.getWrapperFromChild(i)),wrapper.length>0){var l="__embedpress__tmp_"+e.makeId();wrapper.after(n('<span id="'+l+'"></span>'));var c=r.dom.select("span#"+l)[0];r.selection.select(c),n(c).remove()}return!0}else return e.cancelEvent(t,r)}return!0},e.getWrapperFromChild=function(t){if(n(t).hasClass("embedpress_wrapper"))return t;var r=n(t).parent();return r.length>0?e.getWrapperFromChild(r[0]):!1},e.onUndo=function(t,r){r.load()},e.cancelEvent=function(t,r){return t.preventDefault(),t.stopPropagation(),r.dom.events.cancel(),!1},e.onClickEditButton=function(t,r){e.cancelEvent(t,r),e.activeWrapperForModal=e.activeWrapper;var i=e.activeWrapperForModal,a=i.prop("id").replace("embedpress_wrapper_",""),s={},l=n(".embedpress-wrapper",i),c=n("iframe",i);c.length||(c=null),l.length>1&&n.each(l[0].attributes,function(){this.specified&&this.name!=="class"&&(s[this.name.replace("data-","").toLowerCase()]=this.value)});var h=c&&c.width()||l.data("width")||l.width()||"",f=c&&c.height()||l.data("height")||l.height()||"";return c=l=null,n('<div class="loader-indicator"><i class="embedpress-icon-reload"></i></div>').appendTo(i),setTimeout(function(){n.ajax({type:"GET",url:e.params.baseUrl+"wp-admin/admin-ajax.php",data:{action:"embedpress_get_embed_url_info",url:e.decodeEmbedURLSpecialChars(i.data("url"),!1)},beforeSend:function(m,v){n(".loader-indicator",i).addClass("is-loading")},success:function(m){if(!m){bootbox.alert("Unable to get a valid response from the server.");return}if(m.canBeResponsive){var v=!0;("width"in s||"height"in s||"responsive"in s&&s.responsive.isFalse())&&(v=!1)}bootbox.dialog({className:"embedpress-modal",title:"Editing Embed properties",message:'<form id="form-'+a+'" embedpress><div class="row"><div class="col-md-12"><div class="form-group"><label for="input-url-'+a+'">Url</label><input class="form-control" type="url" id="input-url-'+a+'" value="'+e.decodeEmbedURLSpecialChars(i.data("url"),!1)+'"></div></div></div><div class="row">'+(m.canBeResponsive?'<div class="col-md-12"><label>Responsive</label><div class="form-group"><label class="radio-inline"><input type="radio" name="input-responsive-'+a+'" id="input-responsive-1-'+a+'" value="1"'+(v?' checked="checked"':"")+'> Yes</label><label class="radio-inline"><input type="radio" name="input-responsive-'+a+'" id="input-responsive-0-'+a+'" value="0"'+(v?"":' checked="checked"')+"> No</label></div></div>":"")+'<div class="col-md-6"><div class="form-group"><label for="input-width-'+a+'">Width</label><input class="form-control" type="integer" id="input-width-'+a+'" value="'+h+'"'+(v?" disabled":"")+'></div></div><div class="col-md-6"><div class="form-group"><label for="input-height-'+a+'">Height</label><input class="form-control" type="integer" id="input-height-'+a+'" value="'+f+'"'+(v?" disabled":"")+"></div></div></div></form>",buttons:{danger:{label:"Cancel",className:"btn-default",callback:function(){e.activeWrapperForModal=null}},success:{label:"Save",className:"btn-primary",callback:function(){var o=e.activeWrapperForModal;if(r.focus(),r.selection.select(o[0]),o.children().remove(),o.remove(),m.canBeResponsive)if(n("#form-"+a+' input[name="input-responsive-'+a+'"]:checked').val().isFalse()){var d=n("#input-width-"+a).val();parseInt(d)>0&&(s.width=d);var p=n("#input-height-"+a).val();parseInt(p)>0&&(s.height=p),s.responsive="false"}else delete s.width,delete s.height,s.responsive="true";else{var d=n("#input-width-"+a).val();parseInt(d)>0&&(s.width=d);var p=n("#input-height-"+a).val();parseInt(p)>0&&(s.height=p)}var E=[];if(Object.keys(s).length)for(var u in s)E.push(u+'="'+s[u]+'"');var C="["+P.shortcode+(E.length>0?" "+E.join(" "):"")+"]"+n("#input-url-"+a).val()+"[/"+P.shortcode+"]";r.execCommand("mceInsertContent",!1,C),e.configureWrappers(r)}}}}),n("form[embedpress]").on("change",'input[type="radio"]',function(o){var d=n(this),p=d.parents("form[embedpress]");n('input[type="integer"]',p).prop("disabled",d.val().isTrue())})},complete:function(m,v){n(".loader-indicator",i).removeClass("is-loading"),setTimeout(function(){n(".loader-indicator",i).remove()},350)},dataType:"json",async:!0})},200),!1},e.onClickRemoveButton=function(t,r){e.cancelEvent(t,r);var i=e.activeWrapper;return i.children().remove(),i.remove(),!1},e.recursivelyAddClass=function(t,r){n(t).children().each(function(i,a){n(a).addClass(r);var s=n(a).children();s.length>0&&e.recursivelyAddClass(a,r)})},e.setInterval=function(t,r,i){var a=0,s=0,l=window.setInterval(function(){a+=r,s++,a<=i?t(s,a):e.stopInterval(l)},r);return l},e.stopInterval=function(t){window.clearInterval(t),t=null},e.configureWrappers=function(t){window.setTimeout(function(){var i=t.getDoc(),a=null,s=i.getElementsByClassName("embedpress_wrapper");if(s.length>0){for(var l=0;l<s.length;l++)if(a=n(s[l]),a.data("configured")!=!0){window.setTimeout(function(){e.recursivelyAddClass(a,"embedpress_ignore_mouseout")},500);var c=e.setInterval(function(h){var f=a.find("iframe");f.length>0&&n.each(f,function(m,v){n(v).attr("id")!=="fb_xdm_frame_https"&&n(v).attr("id")!=="fb_xdm_frame_http"&&(a.css("width",n(v).width()+"px"),e.stopInterval(c))})},500,8e3);a.data("configured",!0)}}},200)},e.hidePreviewControllerPanel=function(){e.controllerPanelIsActive()&&(n(e.activeControllerPanel).addClass("hidden"),e.activeControllerPanel=null,e.activeWrapper=null)},e.getElementInContentById=function(t,r){var i=r.getDoc();if(i!==null)return n(i.getElementById(t))},e.displayPreviewControllerPanel=function(t,r){if(e.controllerPanelIsActive()&&t!==e.activeWrapper&&e.hidePreviewControllerPanel(),!e.controllerPanelIsActive()&&!t.hasClass("is-loading")){var i=t.data("uid"),a=e.getElementInContentById("embedpress_controller_panel_"+i,r);if(!a.data("event-set")){var s=e.getElementInContentById("embedpress_button_edit_"+i,r),l=e.getElementInContentById("embedpress_button_remove_"+i,r);e.addEvent("mousedown",s,function(h){e.onClickEditButton(h,r)}),e.addEvent("mousedown",l,function(h){e.onClickRemoveButton(h,r)}),a.data("event-set",!0)}var c=a.next()[0];typeof c!="undefined"&&c.nodeName.toLowerCase()==="iframe"&&a.css("left",n(c).width()/2),a.removeClass("hidden"),e.activeControllerPanel=a,e.activeWrapper=t}}};window.EmbedPress||(window.EmbedPress=new W),window.EmbedPress.init(P.previewSettings)})})(jQuery,String,embedpressPreviewData)})();
