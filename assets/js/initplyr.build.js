var b=Object.defineProperty;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var g=(s,a,t)=>a in s?b(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,i=(s,a)=>{for(var t in a||(a={}))w.call(a,t)&&g(s,t,a[t]);if(h)for(var t of h(a))_.call(a,t)&&g(s,t,a[t]);return s};(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const a=document.createElement("div");a.className="overlay-mask",document.querySelectorAll(".ep-embed-content-wraper").forEach(r=>{s(r)}),new MutationObserver(r=>{r.forEach(p=>{Array.from(p.addedNodes).forEach(y=>{n(y)})})}).observe(document.body,{childList:!0,subtree:!0});function n(r){r.nodeType===Node.ELEMENT_NODE&&r.classList.contains("ep-embed-content-wraper")&&s(r),r.hasChildNodes()&&r.childNodes.forEach(p=>{n(p)})}});function s(a){var y,m;const t=a.getAttribute("data-playerid");console.log({wrapper:a});let e=(y=document.querySelector(`[data-playerid='${t}']`))==null?void 0:y.getAttribute("data-options");if(!e)return!1;if(typeof e=="string")try{e=JSON.parse(e)}catch(d){console.error("Invalid JSON format:",d);return}else{console.error("Options is not a string");return}const n=document.createElement("div");n.className="pip-play",n.innerHTML='<svg width="20" height="20" viewBox="-0.15 -0.112 0.9 0.9" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin" class="jam jam-play"><path fill="#fff" d="M.518.357A.037.037 0 0 0 .506.306L.134.08a.039.039 0 0 0-.02-.006.038.038 0 0 0-.038.037v.453c0 .007.002.014.006.02a.039.039 0 0 0 .052.012L.506.37A.034.034 0 0 0 .518.358zm.028.075L.174.658A.115.115 0 0 1 .017.622.109.109 0 0 1 0 .564V.111C0 .05.051 0 .114 0c.021 0 .042.006.06.017l.372.226a.11.11 0 0 1 0 .189z"/></svg>',n.style.display="none";const r=document.createElement("div");r.className="pip-pause",r.innerHTML='<svg fill="#fff" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 2.5 2.5" xml:space="preserve"><path d="M1.013.499 1.006.5V.499H.748a.054.054 0 0 0-.054.054v1.394c0 .03.024.054.054.054h.266a.054.054 0 0 0 .054-.054V.553a.054.054 0 0 0-.054-.054zm.793 1.448V.553a.054.054 0 0 0-.054-.054L1.745.5V.499h-.258a.054.054 0 0 0-.054.054v1.394c0 .03.024.054.054.054h.265a.054.054 0 0 0 .054-.054z"/></svg>';const p=document.createElement("div");if(p.className="pip-close",p.innerHTML='<svg width="20" height="20" viewBox="0 0 0.9 0.9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M.198.198a.037.037 0 0 1 .053 0L.45.397.648.199a.037.037 0 1 1 .053.053L.503.45l.198.198a.037.037 0 0 1-.053.053L.45.503.252.701A.037.037 0 0 1 .199.648L.397.45.198.252a.037.037 0 0 1 0-.053z" fill="#fff"/></svg>',t&&!a.classList.contains("plyr-initialized")){let d=`[data-playerid='${t}'] .ose-embedpress-responsive`;e.self_hosted&&e.hosted_format==="video"?d=`[data-playerid='${t}'] .ose-embedpress-responsive video`:e.self_hosted&&e.hosted_format==="audio"&&(d=`[data-playerid='${t}'] .ose-embedpress-responsive audio`,a.style.opacity="1"),document.querySelector(`[data-playerid='${t}']`).style.setProperty("--plyr-color-main",e.player_color),(m=document.querySelector(`[data-playerid='${t}'].custom-player-preset-1, [data-playerid='${t}'].custom-player-preset-3, [data-playerid='${t}'].custom-player-preset-4`))==null||m.style.setProperty("--plyr-range-fill-background","#ffffff"),document.querySelector(`[data-playerid='${t}'] iframe`)&&document.querySelector(`[data-playerid='${t}'] iframe`).setAttribute("data-poster",e.poster_thumbnail),document.querySelector(`[data-playerid='${t}'] video`)&&document.querySelector(`[data-playerid='${t}'] video`).setAttribute("data-poster",e.poster_thumbnail);const c=["play-large",e.restart?"restart":"",e.rewind?"rewind":"","play",e.fast_forward?"fast-forward":"","progress","current-time","duration","mute","volume","captions","settings",e.pip?"pip":"","airplay",e.download?"download":"",e.fullscreen?"fullscreen":""].filter(o=>o!=="");new Plyr(d,{controls:c,seekTime:10,poster:e.poster_thumbnail,storage:{enabled:!0,key:"plyr_volume"},displayDuration:!0,tooltips:{controls:e.player_tooltip,seek:e.player_tooltip},hideControls:e.hide_controls,youtube:i(i(i(i(i({},e.autoplay&&{autoplay:e.autoplay}),e.start&&{start:e.start}),e.end&&{end:e.end}),e.rel&&{rel:e.rel}),e.fullscreen&&{fs:e.fullscreen}),vimeo:i(i(i(i({byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,controls:!1},e.t&&{t:e.t}),e.vautoplay&&{autoplay:e.vautoplay}),e.autopause&&{autopause:e.autopause}),e.dnt&&{dnt:e.dnt})}),a.classList.add("plyr-initialized");const l=a.querySelector(".plyr__poster");if(l){const o=setInterval(()=>{l&&l.style.backgroundImage&&(a.style.opacity="1",clearInterval(o))},200)}}const u=setInterval(()=>{let d=document.querySelector(`[data-playerid="${t}"] [data-plyr="pip"]`);if(d){clearInterval(u);let c=document.querySelector(`[data-playerid="${t}"]`).getAttribute("data-options");if(c=JSON.parse(c),!c.self_hosted){const l=document.querySelector(`[data-playerid="${t}"] .plyr__video-wrapper`);if(d.addEventListener("click",()=>{l.classList.toggle("pip-mode");let o=l.parentElement;for(;o;)o.style.zIndex="9999",o=o.parentElement}),c.pip){l.appendChild(n),l.appendChild(r),l.appendChild(p);const o=document.querySelector(`[data-playerid="${t}"] .plyr__video-wrapper .pip-play`),f=document.querySelector(`[data-playerid="${t}"] .plyr__video-wrapper .pip-pause`);document.querySelector(`[data-playerid="${t}"] .plyr__video-wrapper .pip-close`).addEventListener("click",()=>{l.classList.remove("pip-mode"),console.log(l.classList)}),l.addEventListener("click",()=>{const v=document.querySelector(`[data-playerid="${t}"] .plyr__controls [data-plyr="play"]`).getAttribute("aria-pressed");console.log(v),v==="true"?(f.style.display="none",o.style.display="flex"):(o.style.display="none",f.style.display="flex")})}}}},200)}})();
