import{__ as b}from"@wordpress/i18n";import{InspectorControls as ae,BlockControls as ie,useBlockProps as de}from"@wordpress/block-editor";import ce from"react";import{useState as ue,useEffect as I,Fragment as pe}from"@wordpress/element";import fe from"@wordpress/api-fetch";import{applyFilters as Z}from"@wordpress/hooks";import{PanelBody as O,TextControl as B,ToggleControl as k,SelectControl as A,ToolbarGroup as be,ToolbarButton as me,Spinner as he,Placeholder as ye,Button as ge}from"@wordpress/components";import{registerBlockType as ve}from"@wordpress/blocks";function we(){return null}function xe(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Y={exports:{}},L={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _e=ce,ke=Symbol.for("react.element"),je=Symbol.for("react.fragment"),Ce=Object.prototype.hasOwnProperty,Pe=_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ee={key:!0,ref:!0,__self:!0,__source:!0};function X(u,i,o){var d,a={},c=null,m=null;o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),i.ref!==void 0&&(m=i.ref);for(d in i)Ce.call(i,d)&&!Ee.hasOwnProperty(d)&&(a[d]=i[d]);if(u&&u.defaultProps)for(d in i=u.defaultProps,i)a[d]===void 0&&(a[d]=i[d]);return{$$typeof:ke,type:u,key:c,ref:m,props:a,_owner:Pe.current}}L.Fragment=je;L.jsx=X;L.jsxs=X;Y.exports=L;var p=Y.exports;function Te({attributes:u,setAttributes:i}){const{url:o,width:d,height:a,contentShare:c,sharePosition:m,lockContent:n,customPlayer:h,playerPreset:t,playerColor:r,shareFacebook:s,shareTwitter:e,sharePinterest:l,shareLinkedin:y}=u;return p.jsxs(ae,{children:[p.jsxs(O,{title:b("Embed Settings","embedpress"),initialOpen:!0,children:[p.jsx(B,{label:b("URL","embedpress"),value:o,onChange:f=>i({url:f}),help:b("The URL to embed","embedpress")}),p.jsx(B,{label:b("Width","embedpress"),value:d,onChange:f=>i({width:f}),help:b("Width of the embed (e.g., 600px or 100%)","embedpress")}),p.jsx(B,{label:b("Height","embedpress"),value:a,onChange:f=>i({height:f}),help:b("Height of the embed (e.g., 400px)","embedpress")})]}),p.jsx(O,{title:b("Content Protection","embedpress"),initialOpen:!1,children:p.jsx(k,{label:b("Lock Content","embedpress"),checked:n,onChange:f=>i({lockContent:f}),help:b("Require password or user role to view content","embedpress")})}),p.jsxs(O,{title:b("Social Sharing","embedpress"),initialOpen:!1,children:[p.jsx(k,{label:b("Enable Social Sharing","embedpress"),checked:c,onChange:f=>i({contentShare:f})}),c&&p.jsxs(p.Fragment,{children:[p.jsx(A,{label:b("Share Position","embedpress"),value:m,options:[{label:b("Right","embedpress"),value:"right"},{label:b("Left","embedpress"),value:"left"},{label:b("Top","embedpress"),value:"top"},{label:b("Bottom","embedpress"),value:"bottom"}],onChange:f=>i({sharePosition:f})}),p.jsx(k,{label:b("Facebook","embedpress"),checked:s,onChange:f=>i({shareFacebook:f})}),p.jsx(k,{label:b("Twitter","embedpress"),checked:e,onChange:f=>i({shareTwitter:f})}),p.jsx(k,{label:b("Pinterest","embedpress"),checked:l,onChange:f=>i({sharePinterest:f})}),p.jsx(k,{label:b("LinkedIn","embedpress"),checked:y,onChange:f=>i({shareLinkedin:f})})]})]}),p.jsxs(O,{title:b("Custom Player","embedpress"),initialOpen:!1,children:[p.jsx(k,{label:b("Enable Custom Player","embedpress"),checked:h,onChange:f=>i({customPlayer:f}),help:b("Use EmbedPress custom video player","embedpress")}),h&&p.jsxs(p.Fragment,{children:[p.jsx(A,{label:b("Player Preset","embedpress"),value:t,options:[{label:b("Default","embedpress"),value:"preset-default"},{label:b("Modern","embedpress"),value:"preset-modern"},{label:b("Classic","embedpress"),value:"preset-classic"}],onChange:f=>i({playerPreset:f})}),p.jsx(B,{label:b("Player Color","embedpress"),value:r,onChange:f=>i({playerColor:f}),help:b("Hex color code for player theme","embedpress")})]})]})]})}const G=p.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z",fill:"currentColor"}),p.jsx("path",{d:"M10 8.5L15 12L10 15.5V8.5Z",fill:"currentColor"})]}),Se=p.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z",fill:"currentColor"})}),Oe=p.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z",fill:"currentColor"})});function Be({showEditButton:u,switchBackToURLInput:i}){return u?p.jsx(ie,{children:p.jsx(be,{children:p.jsx(me,{className:"components-toolbar__control",label:b("Edit URL","embedpress"),icon:Se,onClick:i})})}):null}function Le(){return p.jsxs("div",{className:"embedpress-loading",children:[p.jsx(he,{}),p.jsx("p",{children:b("Embedding...","embedpress")})]})}function Fe({label:u,onSubmit:i,value:o,cannotEmbed:d,onChange:a,icon:c,DocTitle:m,docLink:n}){const[h,t]=ue(o||""),r=e=>{e.preventDefault(),h.trim()&&i(e)},s=e=>{const l=e.target.value;t(l),a&&a(e)};return p.jsxs(ye,{icon:c||Oe,label:u||b("EmbedPress","embedpress"),className:"embedpress-placeholder",instructions:b("Paste a URL to embed content from 150+ providers","embedpress"),children:[p.jsxs("form",{onSubmit:r,className:"embedpress-placeholder-form",children:[p.jsx("input",{type:"url",value:h,className:"embedpress-placeholder-input",placeholder:b("Enter URL to embed here...","embedpress"),onChange:s}),p.jsx(ge,{type:"submit",variant:"primary",disabled:!h.trim(),children:b("Embed","embedpress")})]}),d&&p.jsx("div",{className:"embedpress-placeholder-error",children:b("Sorry, this content could not be embedded.","embedpress")}),m&&n&&p.jsx("div",{className:"embedpress-placeholder-help",children:p.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"embedpress-placeholder-help-link",children:m})})]})}function He({children:u,className:i,style:o,dangerouslySetInnerHTML:d,...a}){return d?p.jsx("div",{className:`embedpress-embed-wrap ${i||""}`,style:o,dangerouslySetInnerHTML:d,...a}):p.jsx("div",{className:`embedpress-embed-wrap ${i||""}`,style:o,...a,children:u})}const Re=(u,i)=>{if(typeof embedpressObj>"u"||!embedpressObj.ajax_url)return;const o=new XMLHttpRequest;o.open("POST",embedpressObj.ajax_url),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){o.status===200?console.log("EmbedPress: Source data saved successfully"):console.error("EmbedPress: Failed to save source data:",o.statusText)},o.onerror=function(){console.error("EmbedPress: Request failed:",o.statusText)};const d={action:"save_source_data",block_id:u,source_url:i,_source_nonce:embedpressObj.source_nonce||""},a=Object.keys(d).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(d[c])}`).join("&");o.send(a)},Ie=u=>{if(typeof embedpressObj>"u"||!embedpressObj.ajax_url)return;const i=new XMLHttpRequest;i.open("POST",embedpressObj.ajax_url),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){i.status===200?console.log("EmbedPress: Source data deleted successfully"):console.error("EmbedPress: Failed to delete source data:",i.statusText)},i.onerror=function(){console.error("EmbedPress: Request failed:",i.statusText)};const o={action:"delete_source_data",block_id:u,_source_nonce:embedpressObj.source_nonce||""},d=Object.keys(o).map(a=>`${encodeURIComponent(a)}=${encodeURIComponent(o[a])}`).join("&");i.send(d)},Ue=()=>{if(typeof wp>"u"||!wp.data)return;const u=()=>wp.data.select("core/block-editor").getBlocks();let i=u();wp.data.subscribe(()=>{const o=u(),d=i.filter(a=>!o.includes(a));if(d.length&&o.length<i.length){const a=d.filter(c=>c.name==="embedpress/embedpress"&&c.attributes.clientId).map(c=>c.attributes.clientId);a.length>0&&(console.log(`EmbedPress: Blocks with IDs ${a} were removed`),a.forEach(c=>Ie(c)))}i=o})},Me=(u,i,o,d,a)=>{let c=`<div class="ep-social-share share-position-${u}">`;return i&&(c+=`
        <a href="#" class="ep-social-icon facebook" target="_blank">
            <svg fill="#ffffff" height="24" width="24" viewBox="0 0 24 24">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
        </a>`),o&&(c+=`
        <a href="#" class="ep-social-icon twitter" target="_blank">
            <svg fill="#ffffff" height="24" width="24" viewBox="0 0 24 24">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
            </svg>
        </a>`),d&&(c+=`
        <a href="#" class="ep-social-icon pinterest" target="_blank">
            <svg fill="#ffffff" height="24" width="24" viewBox="0 0 24 24">
                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
            </svg>
        </a>`),a&&(c+=`
        <a href="#" class="ep-social-icon linkedin" target="_blank">
            <svg fill="#ffffff" height="24" width="24" viewBox="0 0 24 24">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
        </a>`),c+="</div>",c},$e=({attributes:u})=>{const{customPlayer:i}=u;if(!i)return"";const{playerPreset:o,playerColor:d,posterThumbnail:a,playerPip:c,playerRestart:m,playerRewind:n,playerFastForward:h,playerTooltip:t,playerHideControls:r,playerDownload:s,starttime:e,endtime:l,relatedvideos:y,muteVideo:f,fullscreen:g,vstarttime:v,vautoplay:E,vautopause:j,vdnt:x}=u,T={rewind:n,restart:m,pip:c,poster_thumbnail:a,player_color:d,player_preset:o,fast_forward:h,player_tooltip:t,hide_controls:r,download:s,...e&&{start:e},...l&&{end:l},...y&&{rel:y},...f&&{mute:f},...g&&{fullscreen:g},...v&&{t:v},...E&&{autoplay:E},...j&&{autopause:j},...x&&{dnt:x}};return JSON.stringify(T)};var J={exports:{}},K={exports:{}};(function(){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(o,d){return o<<d|o>>>32-d},rotr:function(o,d){return o<<32-d|o>>>d},endian:function(o){if(o.constructor==Number)return i.rotl(o,8)&16711935|i.rotl(o,24)&4278255360;for(var d=0;d<o.length;d++)o[d]=i.endian(o[d]);return o},randomBytes:function(o){for(var d=[];o>0;o--)d.push(Math.floor(Math.random()*256));return d},bytesToWords:function(o){for(var d=[],a=0,c=0;a<o.length;a++,c+=8)d[c>>>5]|=o[a]<<24-c%32;return d},wordsToBytes:function(o){for(var d=[],a=0;a<o.length*32;a+=8)d.push(o[a>>>5]>>>24-a%32&255);return d},bytesToHex:function(o){for(var d=[],a=0;a<o.length;a++)d.push((o[a]>>>4).toString(16)),d.push((o[a]&15).toString(16));return d.join("")},hexToBytes:function(o){for(var d=[],a=0;a<o.length;a+=2)d.push(parseInt(o.substr(a,2),16));return d},bytesToBase64:function(o){for(var d=[],a=0;a<o.length;a+=3)for(var c=o[a]<<16|o[a+1]<<8|o[a+2],m=0;m<4;m++)a*8+m*6<=o.length*8?d.push(u.charAt(c>>>6*(3-m)&63)):d.push("=");return d.join("")},base64ToBytes:function(o){o=o.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],a=0,c=0;a<o.length;c=++a%4)c!=0&&d.push((u.indexOf(o.charAt(a-1))&Math.pow(2,-2*c+8)-1)<<c*2|u.indexOf(o.charAt(a))>>>6-c*2);return d}};K.exports=i})();var Ve=K.exports,M={utf8:{stringToBytes:function(u){return M.bin.stringToBytes(unescape(encodeURIComponent(u)))},bytesToString:function(u){return decodeURIComponent(escape(M.bin.bytesToString(u)))}},bin:{stringToBytes:function(u){for(var i=[],o=0;o<u.length;o++)i.push(u.charCodeAt(o)&255);return i},bytesToString:function(u){for(var i=[],o=0;o<u.length;o++)i.push(String.fromCharCode(u[o]));return i.join("")}}},W=M;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var De=function(u){return u!=null&&(Q(u)||Ne(u)||!!u._isBuffer)};function Q(u){return!!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function Ne(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&Q(u.slice(0,0))}(function(){var u=Ve,i=W.utf8,o=De,d=W.bin,a=function(c,m){c.constructor==String?m&&m.encoding==="binary"?c=d.stringToBytes(c):c=i.stringToBytes(c):o(c)?c=Array.prototype.slice.call(c,0):!Array.isArray(c)&&c.constructor!==Uint8Array&&(c=c.toString());for(var n=u.bytesToWords(c),h=c.length*8,t=1732584193,r=-271733879,s=-1732584194,e=271733878,l=0;l<n.length;l++)n[l]=(n[l]<<8|n[l]>>>24)&16711935|(n[l]<<24|n[l]>>>8)&4278255360;n[h>>>5]|=128<<h%32,n[(h+64>>>9<<4)+14]=h;for(var y=a._ff,f=a._gg,g=a._hh,v=a._ii,l=0;l<n.length;l+=16){var E=t,j=r,x=s,T=e;t=y(t,r,s,e,n[l+0],7,-680876936),e=y(e,t,r,s,n[l+1],12,-389564586),s=y(s,e,t,r,n[l+2],17,606105819),r=y(r,s,e,t,n[l+3],22,-1044525330),t=y(t,r,s,e,n[l+4],7,-176418897),e=y(e,t,r,s,n[l+5],12,1200080426),s=y(s,e,t,r,n[l+6],17,-1473231341),r=y(r,s,e,t,n[l+7],22,-45705983),t=y(t,r,s,e,n[l+8],7,1770035416),e=y(e,t,r,s,n[l+9],12,-1958414417),s=y(s,e,t,r,n[l+10],17,-42063),r=y(r,s,e,t,n[l+11],22,-1990404162),t=y(t,r,s,e,n[l+12],7,1804603682),e=y(e,t,r,s,n[l+13],12,-40341101),s=y(s,e,t,r,n[l+14],17,-1502002290),r=y(r,s,e,t,n[l+15],22,1236535329),t=f(t,r,s,e,n[l+1],5,-165796510),e=f(e,t,r,s,n[l+6],9,-1069501632),s=f(s,e,t,r,n[l+11],14,643717713),r=f(r,s,e,t,n[l+0],20,-373897302),t=f(t,r,s,e,n[l+5],5,-701558691),e=f(e,t,r,s,n[l+10],9,38016083),s=f(s,e,t,r,n[l+15],14,-660478335),r=f(r,s,e,t,n[l+4],20,-405537848),t=f(t,r,s,e,n[l+9],5,568446438),e=f(e,t,r,s,n[l+14],9,-1019803690),s=f(s,e,t,r,n[l+3],14,-187363961),r=f(r,s,e,t,n[l+8],20,1163531501),t=f(t,r,s,e,n[l+13],5,-1444681467),e=f(e,t,r,s,n[l+2],9,-51403784),s=f(s,e,t,r,n[l+7],14,1735328473),r=f(r,s,e,t,n[l+12],20,-1926607734),t=g(t,r,s,e,n[l+5],4,-378558),e=g(e,t,r,s,n[l+8],11,-2022574463),s=g(s,e,t,r,n[l+11],16,1839030562),r=g(r,s,e,t,n[l+14],23,-35309556),t=g(t,r,s,e,n[l+1],4,-1530992060),e=g(e,t,r,s,n[l+4],11,1272893353),s=g(s,e,t,r,n[l+7],16,-155497632),r=g(r,s,e,t,n[l+10],23,-1094730640),t=g(t,r,s,e,n[l+13],4,681279174),e=g(e,t,r,s,n[l+0],11,-358537222),s=g(s,e,t,r,n[l+3],16,-722521979),r=g(r,s,e,t,n[l+6],23,76029189),t=g(t,r,s,e,n[l+9],4,-640364487),e=g(e,t,r,s,n[l+12],11,-421815835),s=g(s,e,t,r,n[l+15],16,530742520),r=g(r,s,e,t,n[l+2],23,-995338651),t=v(t,r,s,e,n[l+0],6,-198630844),e=v(e,t,r,s,n[l+7],10,1126891415),s=v(s,e,t,r,n[l+14],15,-1416354905),r=v(r,s,e,t,n[l+5],21,-57434055),t=v(t,r,s,e,n[l+12],6,1700485571),e=v(e,t,r,s,n[l+3],10,-1894986606),s=v(s,e,t,r,n[l+10],15,-1051523),r=v(r,s,e,t,n[l+1],21,-2054922799),t=v(t,r,s,e,n[l+8],6,1873313359),e=v(e,t,r,s,n[l+15],10,-30611744),s=v(s,e,t,r,n[l+6],15,-1560198380),r=v(r,s,e,t,n[l+13],21,1309151649),t=v(t,r,s,e,n[l+4],6,-145523070),e=v(e,t,r,s,n[l+11],10,-1120210379),s=v(s,e,t,r,n[l+2],15,718787259),r=v(r,s,e,t,n[l+9],21,-343485551),t=t+E>>>0,r=r+j>>>0,s=s+x>>>0,e=e+T>>>0}return u.endian([t,r,s,e])};a._ff=function(c,m,n,h,t,r,s){var e=c+(m&n|~m&h)+(t>>>0)+s;return(e<<r|e>>>32-r)+m},a._gg=function(c,m,n,h,t,r,s){var e=c+(m&h|n&~h)+(t>>>0)+s;return(e<<r|e>>>32-r)+m},a._hh=function(c,m,n,h,t,r,s){var e=c+(m^n^h)+(t>>>0)+s;return(e<<r|e>>>32-r)+m},a._ii=function(c,m,n,h,t,r,s){var e=c+(n^(m|~h))+(t>>>0)+s;return(e<<r|e>>>32-r)+m},a._blocksize=16,a._digestsize=16,J.exports=function(c,m){if(c==null)throw new Error("Illegal argument "+c);var n=u.wordsToBytes(a(c,m));return m&&m.asBytes?n:m&&m.asString?d.bytesToString(n):u.bytesToHex(n)}})();var ze=J.exports;const U=xe(ze);Ue();function qe(u){const{attributes:i,setAttributes:o,clientId:d}=u,{url:a,editingURL:c,fetching:m,cannotEmbed:n,interactive:h,embedHTML:t,height:r,width:s,contentShare:e,sharePosition:l,lockContent:y,customlogo:f,logoX:g,logoY:v,customlogoUrl:E,logoOpacity:j,customPlayer:x,playerPreset:T,adManager:lt,adSource:at,adFileUrl:it,adXPosition:dt,adYPosition:ct,shareFacebook:ee,shareTwitter:te,sharePinterest:re,shareLinkedin:oe}=i;I(()=>{i.clientId||o({clientId:d})},[d,i.clientId,o]),U(i.clientId||d),I(()=>{typeof embedpressObj<"u"&&(a.includes("youtube.com")||a.includes("youtu.be")?o({customlogo:embedpressObj.youtube_brand_logo_url||""}):a.includes("vimeo.com")?o({customlogo:embedpressObj.vimeo_brand_logo_url||""}):a.includes("wistia.com")?o({customlogo:embedpressObj.wistia_brand_logo_url||""}):a.includes("twitch.com")?o({customlogo:embedpressObj.twitch_brand_logo_url||""}):a.includes("dailymotion.com")&&o({customlogo:embedpressObj.dailymotion_brand_logo_url||""}))},[a,o]);let $="",V="",D=l||"right";e&&($="ep-content-share-enabled",V="ep-share-position-"+D);let N="";x&&(N=T||"preset-default");let z="";e&&(z=Me(l,ee,te,re,oe));const se=Z("embedpress.customLogoComponent",[],i);function ne(){o({editingURL:!0})}function q(){if(!t)return;let _=t.matchAll(/<script.*?src=["'](.*?)["'].*?><\/script>/g);_=[..._];for(const S of _)if(S&&typeof S[1]<"u"){const w=S[1],C=U(w),H=document.getElementById(C);H&&H.remove();const P=document.createElement("script");P.type="text/javascript",P.setAttribute("id",C),P.setAttribute("src",w),document.body.appendChild(P)}}function le(_){_&&_.preventDefault(),a?(o({fetching:!0}),(async w=>{let C={url:w,width:s,height:r};C=Z("embedpress_block_rest_param",C,i);const P={url:`${embedpressObj.site_url}/wp-json/embedpress/v1/oembed/embedpress`,method:"POST",data:C};return await fe(P).then(R=>R).catch(R=>(console.error("EmbedPress API Error:",R),{error:!0}))})(a).then(w=>{o({fetching:!1}),w.data&&w.data.status===404||!w.embed||w.error?o({cannotEmbed:!0,editingURL:!0}):(o({embedHTML:w.embed,cannotEmbed:!1,editingURL:!1}),q())})):o({cannotEmbed:!0,fetching:!1,editingURL:!0}),i.clientId&&a&&Re(i.clientId,a)}I(()=>{t&&!c&&!m&&q()},[t,c,m]);const F=de();return p.jsxs(pe,{children:[p.jsx(Te,{attributes:i,setAttributes:o}),(!t||!!c)&&!m&&p.jsx("div",{...F,children:p.jsx(Fe,{label:b("EmbedPress - Embed anything from 150+ sites","embedpress"),onSubmit:le,value:a,cannotEmbed:n,onChange:_=>o({url:_.target.value}),icon:G,DocTitle:b("Learn more about EmbedPress","embedpress"),docLink:"https://embedpress.com/docs/"})}),m&&p.jsx("div",{className:F.className,children:p.jsx(Le,{})}),t&&!c&&!m&&p.jsx("figure",{...F,"data-source-id":"source-"+i.clientId,children:p.jsxs("div",{className:`gutenberg-block-wraper ${$} ${V}`,children:[p.jsx(He,{className:`position-${D}-wraper ep-embed-content-wraper ${N}`,style:{display:m?"none":"inline-block",position:"relative"},...x?{"data-playerid":U(i.clientId)}:{},...x?{"data-options":$e({attributes:i})}:{},dangerouslySetInnerHTML:{__html:t+se+z}}),!h&&p.jsx("div",{className:"block-library-embed__interactive-overlay",onMouseUp:()=>o({interactive:!0})}),p.jsx(Be,{showEditButton:t&&!n,switchBackToURLInput:ne})]})}),f&&p.jsx("style",{children:`
                        [data-source-id="source-${i.clientId}"] img.watermark {
                            opacity: ${j};
                            left: ${g}px;
                            top: ${v}px;
                        }
                    `})]})}const Ze="https://schemas.wp.org/trunk/block.json",Ae="EmbedPress Block",We="embedpress/embedpress",Ye="embedpress",Xe="Embed content from 150+ providers with advanced customization options including YouTube, Vimeo, Google Docs, social media, and more.",Ge=2,Je="embedpress",Ke="embedpress-blocks-editor",Qe="embedpress-blocks-editor-style",et="embedpress-blocks-style",tt={anchor:!0,align:["wide","full"],html:!1},rt={$schema:Ze,title:Ae,name:We,category:Ye,description:Xe,apiVersion:Ge,textdomain:Je,editorScript:Ke,editorStyle:Qe,style:et,supports:tt},ot={clientId:{type:"string"},url:{type:"string",default:""},embedHTML:{type:"string",default:""},height:{type:"string",default:"600"},width:{type:"string",default:"600"},editingURL:{type:"boolean",default:!1},fetching:{type:"boolean",default:!1},cannotEmbed:{type:"boolean",default:!1},interactive:{type:"boolean",default:!1},align:{type:"string",default:"center"},lockContent:{type:"boolean",default:!1},protectionType:{type:"string",default:"password"},userRole:{type:"array",default:[]},protectionMessage:{type:"string",default:"You do not have access to this content. Only users with the following roles can view it: [user_roles]"},contentPassword:{type:"string",default:""},lockHeading:{type:"string",default:"Content Locked"},lockSubHeading:{type:"string",default:"Content is locked and requires password to access it."},lockErrorMessage:{type:"string",default:"Oops, that wasn't the right password. Try again."},passwordPlaceholder:{type:"string",default:"Password"},submitButtonText:{type:"string",default:"Unlock"},submitUnlockingText:{type:"string",default:"Unlocking"},enableFooterMessage:{type:"boolean",default:!1},footerMessage:{type:"string",default:"In case you don't have the password, kindly reach out to content owner or administrator to request access."},contentShare:{type:"boolean",default:!1},sharePosition:{type:"string",default:"right"},customTitle:{type:"string",default:""},customDescription:{type:"string",default:""},customThumbnail:{type:"string",default:""},shareFacebook:{type:"boolean",default:!0},shareTwitter:{type:"boolean",default:!0},sharePinterest:{type:"boolean",default:!0},shareLinkedin:{type:"boolean",default:!0},customlogo:{type:"string",default:""},logoX:{type:"number",default:5},logoY:{type:"number",default:10},customlogoUrl:{type:"string"},logoOpacity:{type:"number",default:.6},customPlayer:{type:"boolean",default:!1},playerPreset:{type:"string",default:"preset-default"},playerColor:{type:"string",default:"#5b4e96"},autoPause:{type:"boolean",default:!1},posterThumbnail:{type:"string",default:""},playerPip:{type:"boolean",default:!0},playerRestart:{type:"boolean",default:!0},playerRewind:{type:"boolean",default:!1},playerFastForward:{type:"boolean",default:!1},playerTooltip:{type:"boolean",default:!0},playerHideControls:{type:"boolean",default:!1},playerDownload:{type:"boolean",default:!1},ispagination:{type:"boolean",default:!0},ytChannelLayout:{type:"string",default:"gallery"},pagesize:{type:"string",default:"6"},columns:{type:"string",default:"3"},gapbetweenvideos:{type:"number",default:30},videosize:{type:"string",default:"fixed"},starttime:{type:"string"},endtime:{type:"string"},autoplay:{type:"boolean",default:!1},muteVideo:{type:"boolean",default:!0},controls:{type:"string"},fullscreen:{type:"boolean",default:!0},videoannotations:{type:"boolean",default:!0},progressbarcolor:{type:"string",default:"red"},closedcaptions:{type:"boolean",default:!0},modestbranding:{type:"string"},relatedvideos:{type:"boolean",default:!0},vstarttime:{type:"string"},vautoplay:{type:"boolean",default:!1},vscheme:{type:"string"},vtitle:{type:"boolean",default:!0},vauthor:{type:"boolean",default:!0},vavatar:{type:"boolean",default:!0},vloop:{type:"boolean",default:!1},vautopause:{type:"boolean",default:!1},vdnt:{type:"boolean",default:!1},wstarttime:{type:"string"},wautoplay:{type:"boolean",default:!0},scheme:{type:"string"},captions:{type:"boolean",default:!0},playbutton:{type:"boolean",default:!0},smallplaybutton:{type:"boolean",default:!0},playbar:{type:"boolean",default:!0},resumable:{type:"boolean",default:!0},wistiafocus:{type:"boolean",default:!0},volumecontrol:{type:"boolean",default:!0},volume:{type:"number",default:100},rewind:{type:"boolean",default:!1},wfullscreen:{type:"boolean",default:!0},instaLayout:{type:"string",default:"grid"},slidesShow:{type:"string",default:"3"},slidesScroll:{type:"string",default:"1"},carouselAutoplay:{type:"boolean",default:!1},autoplaySpeed:{type:"string",default:"3000"},transitionSpeed:{type:"string",default:"1000"},carouselLoop:{type:"boolean",default:!0},carouselArrows:{type:"boolean",default:!0},carouselSpacing:{type:"string",default:"0"},carouselDots:{type:"boolean",default:!1},adManager:{type:"boolean",default:!1},adSource:{type:"string",default:"image"},adFileUrl:{type:"string",default:""},adWidth:{type:"number",default:300},adHeight:{type:"number",default:250},adXPosition:{type:"number",default:25},adYPosition:{type:"number",default:20}},st=(u,i)=>{console.log("EmbedPress: Attempting to register block",u.name),console.log("EmbedPress: embedpressObj available:",typeof embedpressObj<"u"),typeof embedpressObj<"u"&&(console.log("EmbedPress: embedpressObj:",embedpressObj),console.log("EmbedPress: active_blocks:",embedpressObj.active_blocks));const o=typeof embedpressObj<"u"&&embedpressObj&&embedpressObj.active_blocks&&embedpressObj.active_blocks.embedpress,d=o||typeof embedpressObj>"u"||typeof embedpressObj<"u"&&!embedpressObj.active_blocks;console.log("EmbedPress: Block enabled in settings:",o),console.log("EmbedPress: Should register block:",d),d?(console.log("EmbedPress: Registering block",u.name),ve(u.name,{...u,...i})):console.warn("EmbedPress: Block not registered - disabled in settings",u.name)};st(rt,{icon:G,attributes:ot,keywords:[b("embed","embedpress"),b("embedpress","embedpress"),b("video","embedpress"),b("social","embedpress"),b("youtube","embedpress"),b("vimeo","embedpress"),b("google docs","embedpress"),b("pdf","embedpress")],edit:qe,save:we});const{__:nt}=wp.i18n;wp.blocks&&wp.blocks.registerBlockCollection&&wp.blocks.registerBlockCollection("embedpress",{title:nt("EmbedPress","embedpress"),icon:"embed-generic"});console.log("EmbedPress Blocks loaded successfully with Essential Blocks structure!");
//# sourceMappingURL=blocks.build.js.map
