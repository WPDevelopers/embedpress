import{__ as t}from"@wordpress/i18n";import H from"react";import{useBlockProps as N,InspectorControls as V}from"@wordpress/block-editor";import{useEffect as Y,Fragment as $}from"@wordpress/element";import{applyFilters as W}from"@wordpress/hooks";import{PanelBody as x,TextControl as y,ToggleControl as m,SelectControl as L}from"@wordpress/components";import{t as R}from"./chunks/trackEvent-BPsQiwD-.js";var F={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q=H,K=Symbol.for("react.element"),z=Symbol.for("react.fragment"),J=Object.prototype.hasOwnProperty,Q=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};function M(a,s,n){var d,l={},r=null,i=null;n!==void 0&&(r=""+n),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(i=s.ref);for(d in s)J.call(s,d)&&!X.hasOwnProperty(d)&&(l[d]=s[d]);if(a&&a.defaultProps)for(d in s=a.defaultProps,s)l[d]===void 0&&(l[d]=s[d]);return{$$typeof:K,type:a,key:r,ref:i,props:l,_owner:Q.current}}E.Fragment=z;E.jsx=M;E.jsxs=M;F.exports=E;var e=F.exports;const Z=({attributes:a})=>{const s=N.save();return e.jsx("div",{...s,"data-embedpress-block":JSON.stringify(a)})},A={YOUTUBE:{name:"YouTube",patterns:["youtube.com","youtu.be"],type:"video"},VIMEO:{name:"Vimeo",patterns:["vimeo.com"],type:"video"},WISTIA:{name:"Wistia",patterns:["wistia.com"],type:"video"},TWITTER:{name:"Twitter",patterns:["twitter.com","x.com"],type:"social"},FACEBOOK:{name:"Facebook",patterns:["facebook.com"],type:"social"},INSTAGRAM:{name:"Instagram",patterns:["instagram.com"],type:"social"},TIKTOK:{name:"TikTok",patterns:["tiktok.com"],type:"social"},GOOGLE_DOCS:{name:"Google Docs",patterns:["docs.google.com"],type:"document"},GOOGLE_SHEETS:{name:"Google Sheets",patterns:["sheets.google.com"],type:"document"},GOOGLE_SLIDES:{name:"Google Slides",patterns:["slides.google.com"],type:"document"},CALENDLY:{name:"Calendly",patterns:["calendly.com"],type:"calendar"},OPENSEA:{name:"OpenSea",patterns:["opensea.io"],type:"nft"},SPREAKER:{name:"Spreaker",patterns:["spreaker.com"],type:"audio"}},ee=[{label:"Right",value:"right"},{label:"Left",value:"left"},{label:"Top",value:"top"},{label:"Bottom",value:"bottom"}],te=[{label:"Default",value:"preset-default"},{label:"Modern",value:"preset-modern"},{label:"Classic",value:"preset-classic"},{label:"Minimal",value:"preset-minimal"}],se=[{label:"Password",value:"password"},{label:"User Role",value:"role"},{label:"Both",value:"both"}],oe={OEMBED:"/wp-json/embedpress/v1/oembed/embedpress"},re=({attributes:a,setAttributes:s,provider:n})=>{const{url:d,width:l,height:r,contentShare:i,sharePosition:c,shareFacebook:P,shareTwitter:g,sharePinterest:k,shareLinkedin:j,lockContent:v,protectionType:f,contentPassword:S,customPlayer:w,playerPreset:T,playerColor:C,autoplay:I,muteVideo:u,controls:O,fullscreen:_}=a;return e.jsxs(V,{children:[e.jsxs(x,{title:t("Embed Settings","embedpress"),initialOpen:!0,children:[e.jsx(y,{label:t("URL","embedpress"),value:d,onChange:o=>s({url:o}),placeholder:t("Enter URL to embed...","embedpress"),help:t("Paste any URL from 150+ supported providers","embedpress")}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(y,{label:t("Width","embedpress"),value:l,onChange:o=>s({width:o}),placeholder:"600",type:"number"}),e.jsx(y,{label:t("Height","embedpress"),value:r,onChange:o=>s({height:o}),placeholder:"400",type:"number"})]}),n&&e.jsxs("p",{className:"embedpress-provider-info",children:[e.jsx("strong",{children:t("Detected Provider:","embedpress")})," ",n.name]})]}),e.jsxs(x,{title:t("Social Sharing","embedpress"),initialOpen:!1,children:[e.jsx(m,{label:t("Enable Social Sharing","embedpress"),checked:i,onChange:o=>s({contentShare:o}),help:t("Show social sharing buttons for this embed","embedpress")}),i&&e.jsxs(e.Fragment,{children:[e.jsx(L,{label:t("Share Position","embedpress"),value:c,options:ee,onChange:o=>s({sharePosition:o})}),e.jsx(m,{label:t("Facebook","embedpress"),checked:P,onChange:o=>s({shareFacebook:o})}),e.jsx(m,{label:t("Twitter","embedpress"),checked:g,onChange:o=>s({shareTwitter:o})}),e.jsx(m,{label:t("Pinterest","embedpress"),checked:k,onChange:o=>s({sharePinterest:o})}),e.jsx(m,{label:t("LinkedIn","embedpress"),checked:j,onChange:o=>s({shareLinkedin:o})})]})]}),e.jsxs(x,{title:t("Content Protection","embedpress"),initialOpen:!1,children:[e.jsx(m,{label:t("Lock Content","embedpress"),checked:v,onChange:o=>s({lockContent:o}),help:t("Protect this embed with password or user roles","embedpress")}),v&&e.jsxs(e.Fragment,{children:[e.jsx(L,{label:t("Protection Type","embedpress"),value:f,options:se,onChange:o=>s({protectionType:o})}),(f==="password"||f==="both")&&e.jsx(y,{label:t("Password","embedpress"),value:S,onChange:o=>s({contentPassword:o}),type:"password",help:t("Users will need this password to view the content","embedpress")})]})]}),n&&n.type==="video"&&e.jsxs(x,{title:t("Custom Player","embedpress"),initialOpen:!1,children:[e.jsx(m,{label:t("Enable Custom Player","embedpress"),checked:w,onChange:o=>s({customPlayer:o}),help:t("Use EmbedPress custom video player","embedpress")}),w&&e.jsxs(e.Fragment,{children:[e.jsx(L,{label:t("Player Preset","embedpress"),value:T,options:te,onChange:o=>s({playerPreset:o})}),e.jsx(y,{label:t("Player Color","embedpress"),value:C,onChange:o=>s({playerColor:o}),type:"color"}),e.jsx(m,{label:t("Autoplay","embedpress"),checked:I,onChange:o=>s({autoplay:o})}),e.jsx(m,{label:t("Mute Video","embedpress"),checked:u,onChange:o=>s({muteVideo:o})}),e.jsx(m,{label:t("Show Controls","embedpress"),checked:O,onChange:o=>s({controls:o})}),e.jsx(m,{label:t("Allow Fullscreen","embedpress"),checked:_,onChange:o=>s({fullscreen:o})})]})]})]})};var ne={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(a){(function(){var s={}.hasOwnProperty;function n(){for(var r="",i=0;i<arguments.length;i++){var c=arguments[i];c&&(r=l(r,d(c)))}return r}function d(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return n.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var i="";for(var c in r)s.call(r,c)&&r[c]&&(i=l(i,c));return i}function l(r,i){return i?r?r+" "+i:r+i:r}a.exports?(n.default=n,a.exports=n):window.classNames=n})()})(ne);const U=a=>{if(!a||typeof a!="string")return!1;try{return new URL(a),!0}catch{return!1}},ae=a=>{const{attributes:s,setAttributes:n,clientId:d}=a,{url:l,embedHTML:r,editingURL:i,fetching:c,cannotEmbed:P,height:g,width:k,contentShare:j,sharePosition:v,shareFacebook:f,shareTwitter:S,sharePinterest:w,shareLinkedin:T}=s,C=N();Y(()=>{s.clientId||n({clientId:d})},[d,s.clientId,n]);const u=(p=>{if(!p)return null;for(const[b,h]of Object.entries(A))if(h.patterns.some(G=>p.includes(G)))return h;return null})(l),O=async p=>{if(p&&p.preventDefault(),!l||!U(l)){n({cannotEmbed:!0,fetching:!1,editingURL:!0});return}n({fetching:!0,cannotEmbed:!1});try{R("embed_attempt",{provider:(u==null?void 0:u.name)||"Unknown",url:l,clientId:d});let b={url:l,width:k||"600",height:g||"400"};b=W("embedpress_block_rest_param",b,s);const h=await wp.apiFetch({path:oe.OEMBED,method:"POST",data:b});if(h&&h.embed)n({embedHTML:h.embed,cannotEmbed:!1,editingURL:!1,fetching:!1}),R("embed_success",{provider:(u==null?void 0:u.name)||"Unknown",url:l,clientId:d});else throw new Error("No embed data received")}catch(b){console.error("EmbedPress: Failed to fetch embed",b),n({cannotEmbed:!0,editingURL:!0,fetching:!1}),R("embed_error",{provider:(u==null?void 0:u.name)||"Unknown",url:l,error:b.message,clientId:d})}},_=p=>{n({url:p,cannotEmbed:!1})},o=()=>{n({editingURL:!0})},D=()=>{if(!j)return"";const p=[];return f&&p.push('<a href="#" class="ep-share-facebook">Facebook</a>'),S&&p.push('<a href="#" class="ep-share-twitter">Twitter</a>'),w&&p.push('<a href="#" class="ep-share-pinterest">Pinterest</a>'),T&&p.push('<a href="#" class="ep-share-linkedin">LinkedIn</a>'),`<div class="ep-social-share ep-share-${v}">${p.join("")}</div>`};return e.jsxs($,{children:[e.jsx(re,{attributes:s,setAttributes:n,provider:u}),e.jsxs("div",{...C,children:[(!r||i)&&!c&&e.jsx("div",{className:"embedpress-placeholder",children:e.jsxs("div",{className:"embedpress-placeholder__content",children:[e.jsx("h3",{children:t("EmbedPress","embedpress")}),e.jsx("p",{children:t("Embed content from 150+ providers","embedpress")}),e.jsxs("form",{onSubmit:O,children:[e.jsx("input",{type:"url",value:l,onChange:p=>_(p.target.value),placeholder:t("Enter URL to embed...","embedpress"),style:{marginBottom:"12px",width:"100%",padding:"8px"}}),e.jsx("button",{type:"submit",disabled:!l||!U(l),children:t("Embed","embedpress")})]}),P&&e.jsx("p",{style:{color:"red"},children:t("Sorry, this content could not be embedded.","embedpress")})]})}),c&&e.jsxs("div",{className:"embedpress-loading",children:[e.jsx("div",{className:"embedpress-spinner"}),e.jsx("p",{children:t("Loading embed...","embedpress")})]}),r&&!i&&!c&&e.jsxs("div",{className:"embedpress-embed-wrapper",children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:r+D()},style:{width:k,height:g}}),e.jsx("div",{className:"embedpress-controls",children:e.jsx("button",{onClick:o,children:t("Edit","embedpress")})})]})]})]})},le=[{attributes:{url:{type:"string",default:""},embedHTML:{type:"string",default:""},height:{type:"string",default:"600"},width:{type:"string",default:"600"}},save:({attributes:a})=>e.jsx("div",{className:"embedpress-block","data-url":a.url})}],ie={attributes:{url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",width:"600",height:"400",contentShare:!0,shareFacebook:!0,shareTwitter:!0,sharePinterest:!0,shareLinkedin:!0},innerBlocks:[]},de="https://schemas.wp.org/trunk/block.json",pe="EmbedPress Block",ce="embedpress/embedpress",ue="embed",me="Embed content from 150+ providers with advanced customization options including YouTube, Vimeo, Google Docs, social media, and more.",be=2,he="embedpress",fe="embedpress_blocks-cgb-block-js",ye="embedpress_blocks-cgb-editor-css",ge="embedpress_blocks-cgb-style-css",ke={anchor:!0,align:["wide","full"],html:!1,lightBlockWrapper:!0},ve={"embedpress/clientId":"clientId"},B={$schema:de,title:pe,name:ce,category:ue,description:me,apiVersion:be,textdomain:he,editorScript:fe,editorStyle:ye,style:ge,supports:ke,providesContext:ve},we={clientId:{type:"string"},url:{type:"string",default:""},embedHTML:{type:"string",default:""},height:{type:"string",default:"600"},width:{type:"string",default:"600"},editingURL:{type:"boolean",default:!1},fetching:{type:"boolean",default:!1},cannotEmbed:{type:"boolean",default:!1},interactive:{type:"boolean",default:!1},align:{type:"string",default:"center"},lockContent:{type:"boolean",default:!1},protectionType:{type:"string",default:"password"},userRole:{type:"array",default:[]},protectionMessage:{type:"string",default:"You do not have access to this content. Only users with the following roles can view it: [user_roles]"},contentPassword:{type:"string",default:""},lockHeading:{type:"string",default:"Content Locked"},lockSubHeading:{type:"string",default:"Content is locked and requires password to access it."},lockErrorMessage:{type:"string",default:"Oops, that wasn't the right password. Try again."},passwordPlaceholder:{type:"string",default:"Password"},submitButtonText:{type:"string",default:"Unlock"},submitUnlockingText:{type:"string",default:"Unlocking"},enableFooterMessage:{type:"boolean",default:!1},footerMessage:{type:"string",default:"In case you don't have the password, kindly reach out to content owner or administrator to request access."},contentShare:{type:"boolean",default:!1},sharePosition:{type:"string",default:"right"},customTitle:{type:"string",default:""},customDescription:{type:"string",default:""},customThumbnail:{type:"string",default:""},shareFacebook:{type:"boolean",default:!0},shareTwitter:{type:"boolean",default:!0},sharePinterest:{type:"boolean",default:!0},shareLinkedin:{type:"boolean",default:!0},customlogo:{type:"string",default:""},logoX:{type:"number",default:5},logoY:{type:"number",default:10},customlogoUrl:{type:"string"},logoOpacity:{type:"number",default:.6},customPlayer:{type:"boolean",default:!1},playerPreset:{type:"string",default:"preset-default"},playerColor:{type:"string",default:"#5b4e96"},autoPause:{type:"boolean",default:!1},posterThumbnail:{type:"string",default:""},ispagination:{type:"boolean",default:!0},ytChannelLayout:{type:"string",default:"gallery"},pagesize:{type:"string",default:"6"},columns:{type:"string",default:"3"},gapbetweenvideos:{type:"number",default:30},videosize:{type:"string",default:"fixed"},starttime:{type:"string"},endtime:{type:"string"},autoplay:{type:"boolean",default:!1},muteVideo:{type:"boolean",default:!0},controls:{type:"string"},fullscreen:{type:"boolean",default:!0},videoannotations:{type:"boolean",default:!0},progressbarcolor:{type:"string",default:"red"},closedcaptions:{type:"boolean",default:!0},modestbranding:{type:"string"},relatedvideos:{type:"boolean",default:!0},vstarttime:{type:"string"},vautoplay:{type:"boolean",default:!1},vscheme:{type:"string"},vtitle:{type:"boolean",default:!0},vauthor:{type:"boolean",default:!0},vavatar:{type:"boolean",default:!0},vloop:{type:"boolean",default:!1},vautopause:{type:"boolean",default:!1},vdnt:{type:"boolean",default:!1},wstarttime:{type:"string"},wautoplay:{type:"boolean",default:!0},scheme:{type:"string"},captions:{type:"boolean",default:!0},playbutton:{type:"boolean",default:!0},smallplaybutton:{type:"boolean",default:!0},playbar:{type:"boolean",default:!0},resumable:{type:"boolean",default:!0},wistiafocus:{type:"boolean",default:!0},volumecontrol:{type:"boolean",default:!0},volume:{type:"number",default:100},rewind:{type:"boolean",default:!1},wfullscreen:{type:"boolean",default:!0}};console.log("EmbedPress block registration started with Essential Blocks structure");typeof wp<"u"&&wp.blocks&&wp.blocks.registerBlockType?typeof embedpressObj<"u"&&embedpressObj&&embedpressObj.active_blocks&&embedpressObj.active_blocks.embedpress?(wp.blocks.registerBlockType(B.name,{...B,icon:"embed-generic",attributes:we,keywords:[t("embed","embedpress"),t("embedpress","embedpress"),t("video","embedpress"),t("social","embedpress"),t("youtube","embedpress"),t("vimeo","embedpress"),t("google docs","embedpress"),t("pdf","embedpress")],edit:ae,save:Z,example:ie,deprecated:le}),console.log("EmbedPress block registered successfully with Essential Blocks structure")):console.log("EmbedPress block is disabled in settings"):console.error("WordPress blocks API not available.");const{__:xe}=wp.i18n;wp.blocks&&wp.blocks.registerBlockCollection&&wp.blocks.registerBlockCollection("embedpress",{title:xe("EmbedPress","embedpress"),icon:"embed-generic"});console.log("EmbedPress Blocks loaded successfully with Essential Blocks structure!");
//# sourceMappingURL=blocks.build.js.map
