<!DOCTYPE html>
<html>
<head>
    <title>EmbedPress Analytics Tracking Test</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>EmbedPress Analytics Tracking Test</h1>
    
    <div id="test-results"></div>
    
    <button id="test-tracking">Test Tracking Endpoint</button>
    
    <script>
    $(document).ready(function() {
        $('#test-tracking').click(function() {
            // Replace with your WordPress site URL
            var siteUrl = window.location.origin;
            var restUrl = siteUrl + '/wp-json/embedpress/v1/analytics/track';
            
            var testData = {
                content_id: 'test_' + Date.now(),
                interaction_type: 'view',
                session_id: 'test_session_' + Date.now(),
                page_url: window.location.href,
                post_id: 1,
                screenResolution: screen.width + 'x' + screen.height,
                language: navigator.language,
                userAgent: navigator.userAgent
            };
            
            $('#test-results').html('<p>Testing tracking endpoint...</p>');
            
            $.ajax({
                url: restUrl,
                method: 'POST',
                data: testData,
                success: function(response) {
                    $('#test-results').html(
                        '<div style="color: green;">' +
                        '<h3>✅ Success!</h3>' +
                        '<p>Tracking endpoint is working correctly.</p>' +
                        '<pre>' + JSON.stringify(response, null, 2) + '</pre>' +
                        '</div>'
                    );
                },
                error: function(xhr, status, error) {
                    $('#test-results').html(
                        '<div style="color: red;">' +
                        '<h3>❌ Error!</h3>' +
                        '<p>Tracking endpoint failed.</p>' +
                        '<p><strong>Status:</strong> ' + xhr.status + '</p>' +
                        '<p><strong>Error:</strong> ' + error + '</p>' +
                        '<pre>' + xhr.responseText + '</pre>' +
                        '</div>'
                    );
                }
            });
        });
    });
    </script>
</body>
</html>
